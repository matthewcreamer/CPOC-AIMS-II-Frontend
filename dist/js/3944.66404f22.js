"use strict";(self["webpackChunktims_dexon"]=self["webpackChunktims_dexon"]||[]).push([[3944],{3944:(t,e,a)=>{a.r(e),a.d(e,{default:()=>f});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("DxDataGrid",{attrs:{id:"data-grid-style","key-expr":"id","data-source":t.inspRecordList,"element-attr":t.dataGridAttributes,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"column-hiding-enabled":!0,"word-wrap-enabled":!0},on:{exporting:t.EXPORT_DATA,"row-inserted":t.CREATE_RECORD,"row-updated":t.UPDATE_RECORD,"row-removed":t.DELETE_RECORD}},[a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"form"}},[a("DxForm",{attrs:{"label-location":"top"}},[a("DxItem",{attrs:{"col-count":2,"col-span":2,"item-type":"group"}},[a("DxItem",{attrs:{"data-field":"inspection_date","col-span":1}}),a("DxItem",{attrs:{"data-field":"project_no","col-span":1}}),a("DxItem",{attrs:{"data-field":"report_no","col-span":1}}),a("DxItem",{attrs:{"col-span":1}}),a("DxItem",{attrs:{"data-field":"remark","col-span":2}})],1)],1)],1),a("DxColumn",{attrs:{"data-field":"inspection_date",caption:"Inspection date","data-type":"date",format:"dd MMM yyyy","sort-order":"desc",width:140,"editor-options":t.inspDateInputOptions}},[a("DxRequiredRule")],1),a("DxColumn",{attrs:{"data-field":"project_no",caption:"Project number",width:140,"editor-options":t.projectNoInputOptions}},[a("DxRequiredRule")],1),a("DxColumn",{attrs:{"data-field":"report_no",caption:"Report number",width:140,"editor-options":t.reportNoInputOptions}}),a("DxColumn",{attrs:{"data-field":"remark",caption:"Remark","editor-options":t.remarkInputOptions}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1)])},n=[],r=(a(41539),a(39477)),i=a(17133),s=a.n(i),d=a(71642),l=a(53706),c=a.n(l),p=a(66262),u=a(60082),m=a(48626);const D={name:"inspection-record",components:{DxDataGrid:m.DxDataGrid,DxSearchPanel:m.DxSearchPanel,DxPaging:m.DxPaging,DxPager:m.DxPager,DxScrolling:m.DxScrolling,DxColumn:m.DxColumn,DxExport:m.DxExport,DxForm:m.DxForm,DxItem:u.DxItem,DxEditing:m.DxEditing,DxRequiredRule:m.DxRequiredRule},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"Inspection Record",subpageInnerName:null}),1==this.$store.state.status.server&&this.FETCH_INSP_RECORD()},data:function(){return{inspRecordList:{},dataGridAttributes:{class:"data-grid-style"},inspDateInputOptions:{placeholder:"Select date"},projectNoInputOptions:{placeholder:"Enter project no"},reportNoInputOptions:{placeholder:"Enter report no"},nameInputOptions:{placeholder:"Enter name"},certInputOptions:{placeholder:"Enter cert no"},remarkInputOptions:{placeholder:"Enter remarks"}}},computed:{},methods:{EXPORT_DATA:function(t){var e=new d.Workbook,a=e.addWorksheet("Projects");(0,p.d)({worksheet:a,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){c()(new Blob([t],{type:"application/octet-stream"}),"Projects.xlsx")}))})),t.cancel=!0},FETCH_INSP_RECORD:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id_tag;(0,r.Z)({method:"get",url:"FlowlineInspectionRecord/get-flowline-ir-by-id-line?id_line="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.inspRecordList=e.data,console.log("insp record:"))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},CREATE_RECORD:function(t){var e=this;t.data.id=0,t.data.id_line=this.$route.params.id_tag,t.data.inspection_date=s()(t.data.inspection_date).format("L"),t.data.is_active=!0,console.log(t.data),(0,r.Z)({method:"post",url:"/FlowlineInspectionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){201==t.status&&(console.log("create success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},UPDATE_RECORD:function(t){var e=this;t.data.inspection_date=s()(t.data.inspection_date).format("L"),console.log(t.data),(0,r.Z)({method:"put",url:"/FlowlineInspectionRecord/"+t.data.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){200==t.status&&(console.log("update success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(t){var e=this;(0,r.Z)({method:"delete",url:"/FlowlineInspectionRecord/"+t.data.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){200==t.status&&(console.log("delete success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))}}},g=D;var h=a(1001),x=(0,h.Z)(g,o,n,!1,null,"f65d2126",null);const f=x.exports}}]);
//# sourceMappingURL=3944.66404f22.js.map
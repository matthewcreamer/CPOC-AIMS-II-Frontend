"use strict";(self["webpackChunktims_dexon"]=self["webpackChunktims_dexon"]||[]).push([[9468],{30594:(e,t,i)=>{i.d(t,{Z:()=>d});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-content-loading"},[i("div",{staticClass:"box"},[i("hash-loader",{staticClass:"custom-class",attrs:{color:"#1e1450",loading:!0,size:40,sizeUnit:"px"}})],1)])},n=[];const o={name:"AppLoading",props:{text:String,icon:String,color:String}},s=o;var l=i(1001),r=(0,l.Z)(s,a,n,!1,null,"cf1f01c2",null);const d=r.exports},96348:(e,t,i)=>{i.d(t,{Z:()=>d});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-preview-wrapper"},[i("div",{staticClass:"preview-popup"},[i("v-ons-toolbar-button",{staticClass:"btn-close",on:{click:function(t){return e.CLOSE_PREVIEW()}}},[i("i",{staticClass:"las la-times"})]),i("v-ons-toolbar-button",{staticClass:"btn-close download"},[i("a",{attrs:{target:"_blank",href:e.baseURL+e.imageURL,download:""}},[i("i",{staticClass:"las la-download"})])]),i("img",{attrs:{src:e.baseURL+e.imageURL}})],1)])},n=[];i(74916),i(23123);const o={name:"image-preview",props:{imageURL:String},computed:{baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{DOWNLOAD_IMG:function(e){var t=document.createElement("a");t.href=e,t.download=e.split("/").pop(),document.body.appendChild(t),t.click(),document.body.removeChild(t)},CLOSE_PREVIEW:function(){this.$emit("close-preview")}}},s=o;var l=i(1001),r=(0,l.Z)(s,a,n,!1,null,"4574c401",null);const d=r.exports},19468:(e,t,i)=>{i.r(t),i.d(t,{default:()=>U});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-container"},[i("div",{staticClass:"tab-wrapper"},[i("vue-tabs-chrome",{attrs:{tabs:e.tabs},model:{value:e.tabCurrent,callback:function(t){e.tabCurrent=t},expression:"tabCurrent"}})],1),"info"==e.tabCurrent?i("div",{staticClass:"page-section info-tab-display"},[i("div",{staticClass:"report-sheet report-sheet-info",staticStyle:{"grid-row":"span 2"}},[i("div",{staticClass:"report-container"},[i("div",{staticClass:"sheet-body",staticStyle:{"grid-template-columns":"50% 50%"}},[e._m(0),e._l(e.generalInfo,(function(t){return i("div",{key:t.desc,staticClass:"form-item"},[i("div",{staticClass:"form-item-label"},[i("label",[e._v(e._s(t.desc))])]),i("div",{staticClass:"form-item-value"},[i("label",[e._v(e._s(t.value))])])])}))],2)])]),i("div",{staticClass:"report-sheet"},[i("div",{staticClass:"report-container"},[i("div",{staticClass:"sheet-body"},[i("div",[e._m(1),i("div",{staticClass:"form-item-picture-log"},[i("div",{staticClass:"img-box"},[i("div",{staticClass:"btn-panel"},[e.infoPiping.overview_img_path?i("v-ons-toolbar-button",{staticClass:"pic-toolbar-btn",on:{click:function(t){return e.PREVIEW_PIC(e.infoPiping.overview_img_path)}}},[i("i",{staticClass:"las la-eye"})]):e._e(),e.infoPiping.overview_img_path?i("v-ons-toolbar-button",{staticClass:"pic-toolbar-btn",on:{click:function(t){return e.DELETE_PIC(e.infoPiping.overview_img_path,1)}}},[i("i",{staticClass:"las la-trash"})]):e._e(),i("v-ons-toolbar-button",[e.infoPiping.overview_img_path?e._e():i("label",{staticClass:"pic-toolbar-btn",attrs:{for:"pic-upload-btn"}},[i("i",{staticClass:"las la-plus"})])])],1),e.infoPiping.overview_img_path?i("img",{attrs:{src:e.baseURL+e.infoPiping.overview_img_path}}):e._e(),i("input",{ref:"pic_upload_ov",staticStyle:{display:"none"},attrs:{type:"file",id:"pic-upload-btn"},on:{change:function(t){return e.UPLOAD_PIC(1)}}}),i("div",{},[e.infoPiping.overview_img_path?e._e():i("i",{staticClass:"las la-image"}),e.infoPiping.overview_img_path?e._e():i("label",[e._v("No Image")])])])])])])])]),i("div",{staticClass:"report-sheet"},[i("div",{staticClass:"report-container"},[i("div",{staticClass:"sheet-body"},[i("div",[e._m(2),i("div",{staticClass:"form-item-picture-log"},[i("div",{staticClass:"img-box"},[i("div",{staticClass:"btn-panel"},[e.infoPiping.name_plate_img_path?i("v-ons-toolbar-button",{staticClass:"pic-toolbar-btn",on:{click:function(t){return e.PREVIEW_PIC(e.infoPiping.name_plate_img_path)}}},[i("i",{staticClass:"las la-eye"})]):e._e(),e.infoPiping.name_plate_img_path?i("v-ons-toolbar-button",{staticClass:"pic-toolbar-btn",on:{click:function(t){return e.DELETE_PIC(e.infoPiping.name_plate_img_path,2)}}},[i("i",{staticClass:"las la-trash"})]):e._e(),e.infoPiping.name_plate_img_path?e._e():i("v-ons-toolbar-button",[e.infoPiping.name_plate_img_path?e._e():i("label",{staticClass:"pic-toolbar-btn",attrs:{for:"pic-upload-btn-2"}},[i("i",{staticClass:"las la-plus"})])])],1),e.infoPiping.name_plate_img_path?i("img",{attrs:{src:e.baseURL+e.infoPiping.name_plate_img_path}}):e._e(),i("input",{ref:"pic_upload_np",staticStyle:{display:"none"},attrs:{type:"file",id:"pic-upload-btn-2"},on:{change:function(t){return e.UPLOAD_PIC(2)}}}),e.infoPiping.name_plate_img_path?e._e():i("i",{staticClass:"las la-image"}),e.infoPiping.name_plate_img_path?e._e():i("label",[e._v("No Image")])])])])])])])]):e._e(),"const"==e.tabCurrent?i("div",[i("constTable")],1):e._e(),"insp"==e.tabCurrent?i("div",[i("inspTable")],1):e._e(),"gen"==e.tabCurrent?i("div",[i("genTable")],1):e._e(),1==e.isLoading?i("contentLoading",{attrs:{text:"Loading, please wait...",color:"#fc9b21"}}):e._e(),e.previewImg?i("previewImage",{attrs:{imageURL:e.previewImg},on:{"close-preview":function(t){return e.PREVIEW_PIC_CLOSE()}}}):e._e()],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"section-label",staticStyle:{"grid-column":"span 2"}},[i("label",[e._v("piping information")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"section-label"},[i("label",[e._v("overview picture")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"section-label"},[i("label",[e._v("name plate picture")])])}],o=(i(41539),i(39477)),s=i(17133),l=i.n(s),r=i(25930),d=i.n(r),c=i(30594),p=i(96348),u=function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"page-section"},[t._m(0),a("DxDataGrid",{attrs:{id:"const-data-grid","key-expr":"id","data-source":t.library,"element-attr":t.dataGridAttributes,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"focused-row-enabled":!1,"row-alternation-enabled":!1},on:{"row-inserted":t.ADD_NEW_FILE,"row-removed":t.DELETE_DOC,"init-new-row":function(){e.file=[]}},scopedSlots:t._u([{key:"editCellTemplate",fn:function(e){return[a("div",[a("img",{attrs:{src:"http://tmt-solution.com/public/image-empty.png",width:"150",height:"100"}}),a("DxFileUploader",{attrs:{"select-button-text":"Select File","label-text":"","upload-mode":"useForm"},on:{"value-changed":t.VALUE_CHANGE}})],1)]}},{key:"insertCellTemplate",fn:function(){return[a("div",{staticClass:"widget-container"},[a("DxFileUploader",{attrs:{id:"file-uploader",multiple:!1,"upload-mode":"useForm",visible:!0},on:{"value-changed":t.VALUE_CHANGE}})],1)]},proxy:!0}])},[a("DxEditing",{attrs:{"allow-deleting":!0,"allow-adding":!0,"allow-updating":!0,"use-icons":!0,"show-borders":!0,mode:"form"}},[a("DxForm",{attrs:{"label-location":"top"}})],1),a("DxColumn",{attrs:{"data-field":"file",visible:!1,"edit-cell-template":"insertCellTemplate"}}),a("DxColumn",{attrs:{"data-field":"file_name","allow-adding":!0,"allow-editing":!0,caption:"File name","editor-options":t.fileNameInputOptions}}),a("DxColumn",{attrs:{type:"buttons"}},[a("DxButton",{attrs:{name:"image",hint:"download",icon:"download","on-click":t.DOWNLOAD}}),a("DxButton",{attrs:{name:"delete",hint:"Delete",icon:"trash"}})],1),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{visible:!1,"show-page-size-selector":!0,"allowed-page-sizes":[5,10,"all"],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}}),a("DxForm",[a("DxItem")],1)],1)],1)},g=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-header-toolbar left",staticStyle:{width:"calc(100% - 231px)"}},[i("label",{attrs:{id:"hd"}},[e._v("Construction Document")])])}],m=(i(68309),i(78417)),f=i(48626);const h={name:"LibraryConstruction",components:{DxDataGrid:f.DxDataGrid,DxEditing:f.DxEditing,DxSearchPanel:f.DxSearchPanel,DxPaging:f.DxPaging,DxPager:f.DxPager,DxScrolling:f.DxScrolling,DxColumn:f.DxColumn,DxExport:f.DxExport,DxItem:f.DxItem,DxForm:f.DxForm,DxButton:f.DxButton,DxHeaderFilter:f.DxHeaderFilter,DxFileUploader:m.DxFileUploader},created:function(){console.clear(),this.FETCH_LIBRARY()},data:function(){return{file:[],library:[],dataGridAttributes:{class:"data-grid-style"},fileNameInputOptions:{placeholder:"Enter file name"}}},computed:{baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_LIBRARY:function(){var e=this;this.isLoading=!0;var t=this.$route.params.id_tag;(0,o.Z)({method:"get",url:"/PipingLibrary/get-library-by-type?id="+t+"&type=1",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&(e.library=t.data,e.isLoading=!1)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},ADD_NEW_FILE:function(e){var t,i=this,a=JSON.parse(localStorage.getItem("user")),n=new FormData;if(n.append("id",0),n.append("id_line",this.$route.params.id_tag),n.append("file_name",null!==(t=e.data.file_name)&&void 0!==t?t:""),n.append("id_type",1),n.append("created_by",a.id),n.append("file",this.file),0==this.file.length)return this.$ons.notification.alert("Please select file").then((function(e){0==e&&i.FETCH_LIBRARY()}));(0,o.Z)({method:"post",url:"/PipingLibrary",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:n}).then((function(e){console.log(e),201==e.status&&i.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),i.isLoading=!1,i.$ons.notification.alert(e.message,{title:"Add New File failed"}).then((function(e){0==e&&i.FETCH_LIBRARY()}))}))["finally"]((function(){i.isLoading=!1}))},VALUE_CHANGE:function(e){console.log(e),console.log(e.value[0].name);var t=new FileReader;t.readAsDataURL(e.value[0]),t.onload=function(){},this.file=e.value[0]},DOWNLOAD:function(e){var t=this.baseURL+e.row.data.file_path,i=document.createElement("a");i.href=t,i.setAttribute("download",e.row.data.file_name),document.body.appendChild(i),i.click()},DELETE_DOC:function(e){var t=this,i=e.data.id;(0,o.Z)({method:"delete",url:"/PipingLibrary/"+i,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&t.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),t.isLoading=!1,t.$ons.notification.alert(e.message,{title:"Delete failed"}).then((function(e){0==e&&t.FETCH_LIBRARY()}))}))["finally"]((function(){t.isLoading=!1}))}}},_=h;var v=i(1001),b=(0,v.Z)(_,u,g,!1,null,"36c8621e",null);const D=b.exports;var x=function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"page-section"},[t._m(0),a("DxDataGrid",{attrs:{id:"const-data-grid","key-expr":"id","data-source":t.library,"element-attr":t.dataGridAttributes,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"focused-row-enabled":!1,"row-alternation-enabled":!1},on:{"row-inserted":t.ADD_NEW_FILE,"row-removed":t.DELETE_DOC,"init-new-row":function(){e.file=[]}},scopedSlots:t._u([{key:"editCellTemplate",fn:function(e){return[a("div",[a("img",{attrs:{src:"http://tmt-solution.com/public/image-empty.png",width:"150",height:"100"}}),a("DxFileUploader",{attrs:{"select-button-text":"Select File","label-text":"","upload-mode":"useForm"},on:{"value-changed":t.VALUE_CHANGE}})],1)]}},{key:"insertCellTemplate",fn:function(){return[a("div",{staticClass:"widget-container"},[a("DxFileUploader",{attrs:{id:"file-uploader",multiple:!1,"upload-mode":"useForm",visible:!0},on:{"value-changed":t.VALUE_CHANGE}})],1)]},proxy:!0}])},[a("DxEditing",{attrs:{"allow-deleting":!0,"allow-adding":!0,"allow-updating":!0,"use-icons":!0,"show-borders":!0,mode:"form"}},[a("DxForm",{attrs:{"label-location":"top"}})],1),a("DxColumn",{attrs:{"data-field":"file",visible:!1,"edit-cell-template":"insertCellTemplate"}}),a("DxColumn",{attrs:{"data-field":"file_name","allow-adding":!0,"allow-editing":!0,caption:"File name","editor-options":t.fileNameInputOptions}}),a("DxColumn",{attrs:{type:"buttons"}},[a("DxButton",{attrs:{name:"image",hint:"download",icon:"download","on-click":t.DOWNLOAD}}),a("DxButton",{attrs:{name:"delete",hint:"Delete",icon:"trash"}})],1),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{visible:!1,"show-page-size-selector":!0,"allowed-page-sizes":[5,10,"all"],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}}),a("DxForm",[a("DxItem")],1)],1)],1)},C=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-header-toolbar left",staticStyle:{width:"calc(100% - 231px)"}},[i("label",{attrs:{id:"hd"}},[e._v("Inspection Document")])])}];const E={name:"LibraryInspection",components:{DxDataGrid:f.DxDataGrid,DxEditing:f.DxEditing,DxSearchPanel:f.DxSearchPanel,DxPaging:f.DxPaging,DxPager:f.DxPager,DxScrolling:f.DxScrolling,DxColumn:f.DxColumn,DxExport:f.DxExport,DxItem:f.DxItem,DxForm:f.DxForm,DxButton:f.DxButton,DxHeaderFilter:f.DxHeaderFilter,DxFileUploader:m.DxFileUploader},created:function(){console.clear(),this.FETCH_LIBRARY()},data:function(){return{file:[],library:[],dataGridAttributes:{class:"data-grid-style"},fileNameInputOptions:{placeholder:"Enter file name"}}},computed:{baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_LIBRARY:function(){var e=this;this.isLoading=!0;var t=this.$route.params.id_tag;(0,o.Z)({method:"get",url:"/PipingLibrary/get-library-by-type?id="+t+"&type=2",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&(e.library=t.data,e.isLoading=!1)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},ADD_NEW_FILE:function(e){var t,i=this,a=JSON.parse(localStorage.getItem("user")),n=new FormData;if(n.append("id",0),n.append("id_line",this.$route.params.id_tag),n.append("file_name",null!==(t=e.data.file_name)&&void 0!==t?t:""),n.append("id_type",2),n.append("created_by",a.id),n.append("file",this.file),0==this.file.length)return this.$ons.notification.alert("Please select file").then((function(e){0==e&&i.FETCH_LIBRARY()}));(0,o.Z)({method:"post",url:"/PipingLibrary",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:n}).then((function(e){console.log(e),201==e.status&&i.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),i.isLoading=!1,i.$ons.notification.alert(e.message,{title:"Add New File failed"}).then((function(e){0==e&&i.FETCH_LIBRARY()}))}))["finally"]((function(){i.isLoading=!1}))},VALUE_CHANGE:function(e){console.log(e),console.log(e.value[0].name);var t=new FileReader;t.readAsDataURL(e.value[0]),t.onload=function(){},this.file=e.value[0]},DOWNLOAD:function(e){var t=this.baseURL+e.row.data.file_path,i=document.createElement("a");i.href=t,i.setAttribute("download",e.row.data.file_name),document.body.appendChild(i),i.click()},DELETE_DOC:function(e){var t=this,i=e.data.id;(0,o.Z)({method:"delete",url:"/PipingLibrary/"+i,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&t.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),t.isLoading=!1,t.$ons.notification.alert(e.message,{title:"Delete failed"}).then((function(e){0==e&&t.FETCH_LIBRARY()}))}))["finally"]((function(){t.isLoading=!1}))}}},P=E;var L=(0,v.Z)(P,x,C,!1,null,"52bf4f1e",null);const w=L.exports;var I=function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"page-section"},[t._m(0),a("DxDataGrid",{attrs:{id:"const-data-grid","key-expr":"id","data-source":t.library,"element-attr":t.dataGridAttributes,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"focused-row-enabled":!1,"row-alternation-enabled":!1},on:{"row-inserted":t.ADD_NEW_FILE,"row-removed":t.DELETE_DOC,"init-new-row":function(){e.file=[]}},scopedSlots:t._u([{key:"editCellTemplate",fn:function(e){return[a("div",[a("img",{attrs:{src:"http://tmt-solution.com/public/image-empty.png",width:"150",height:"100"}}),a("DxFileUploader",{attrs:{"select-button-text":"Select File","label-text":"","upload-mode":"useForm"},on:{"value-changed":t.VALUE_CHANGE}})],1)]}},{key:"insertCellTemplate",fn:function(){return[a("div",{staticClass:"widget-container"},[a("DxFileUploader",{attrs:{id:"file-uploader",multiple:!1,"upload-mode":"useForm",visible:!0},on:{"value-changed":t.VALUE_CHANGE}})],1)]},proxy:!0}])},[a("DxEditing",{attrs:{"allow-deleting":!0,"allow-adding":!0,"allow-updating":!0,"use-icons":!0,"show-borders":!0,mode:"form"}},[a("DxForm",{attrs:{"label-location":"top"}})],1),a("DxColumn",{attrs:{"data-field":"file",visible:!1,"edit-cell-template":"insertCellTemplate"}}),a("DxColumn",{attrs:{"data-field":"file_name","allow-adding":!0,"allow-editing":!0,caption:"File name","editor-options":t.fileNameInputOptions}}),a("DxColumn",{attrs:{type:"buttons"}},[a("DxButton",{attrs:{name:"image",hint:"download",icon:"download","on-click":t.DOWNLOAD}}),a("DxButton",{attrs:{name:"delete",hint:"Delete",icon:"trash"}})],1),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{visible:!1,"show-page-size-selector":!0,"allowed-page-sizes":[5,10,"all"],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}}),a("DxForm",[a("DxItem")],1)],1)],1)},y=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-header-toolbar left",staticStyle:{width:"calc(100% - 231px)"}},[i("label",{attrs:{id:"hd"}},[e._v("General Document")])])}];const F={name:"LibraryGeneral",components:{DxDataGrid:f.DxDataGrid,DxEditing:f.DxEditing,DxSearchPanel:f.DxSearchPanel,DxPaging:f.DxPaging,DxPager:f.DxPager,DxScrolling:f.DxScrolling,DxColumn:f.DxColumn,DxExport:f.DxExport,DxItem:f.DxItem,DxForm:f.DxForm,DxButton:f.DxButton,DxHeaderFilter:f.DxHeaderFilter,DxFileUploader:m.DxFileUploader},created:function(){console.clear(),this.FETCH_LIBRARY()},data:function(){return{file:[],library:[],dataGridAttributes:{class:"data-grid-style"},fileNameInputOptions:{placeholder:"Enter file name"}}},computed:{baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_LIBRARY:function(){var e=this;this.isLoading=!0;var t=this.$route.params.id_tag;(0,o.Z)({method:"get",url:"/PipingLibrary/get-library-by-type?id="+t+"&type=3",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&(e.library=t.data,e.isLoading=!1)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},ADD_NEW_FILE:function(e){var t,i=this,a=JSON.parse(localStorage.getItem("user")),n=new FormData;if(n.append("id",0),n.append("id_line",this.$route.params.id_tag),n.append("file_name",null!==(t=e.data.file_name)&&void 0!==t?t:""),n.append("id_type",3),n.append("created_by",a.id),n.append("file",this.file),0==this.file.length)return this.$ons.notification.alert("Please select file").then((function(e){0==e&&i.FETCH_LIBRARY()}));(0,o.Z)({method:"post",url:"/PipingLibrary",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:n}).then((function(e){console.log(e),201==e.status&&i.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),i.isLoading=!1,i.$ons.notification.alert(e.message,{title:"Add New File failed"}).then((function(e){0==e&&i.FETCH_LIBRARY()}))}))["finally"]((function(){i.isLoading=!1}))},VALUE_CHANGE:function(e){console.log(e),console.log(e.value[0].name);var t=new FileReader;t.readAsDataURL(e.value[0]),t.onload=function(){},this.file=e.value[0]},DOWNLOAD:function(e){var t=this.baseURL+e.row.data.file_path,i=document.createElement("a");i.href=t,i.setAttribute("download",e.row.data.file_name),document.body.appendChild(i),i.click()},DELETE_DOC:function(e){var t=this,i=e.data.id;(0,o.Z)({method:"delete",url:"/PipingLibrary/"+i,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&t.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),t.isLoading=!1,t.$ons.notification.alert(e.message,{title:"Delete failed"}).then((function(e){0==e&&t.FETCH_LIBRARY()}))}))["finally"]((function(){t.isLoading=!1}))}}},A=F;var R=(0,v.Z)(A,I,y,!1,null,"0cf99aff",null);const S=R.exports,N={name:"PipingInformation",components:{VueTabsChrome:d(),contentLoading:c.Z,previewImage:p.Z,constTable:D,inspTable:w,genTable:S},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"Piping Information",subpageInnerName:null}),this.FETCH_INFO()},data:function(){return{infoPiping:{design_temp_max_c:"-",design_temp_min_c:"-",design_temp_max_f:"-",design_temp_min_f:"-"},file_pic_upload:"",tabCurrent:"info",tabs:[{label:"General Information",key:"info",closable:!1},{label:"Construction Document",key:"const",closable:!1},{label:"Inspection Report",key:"insp",closable:!1},{label:"General Document",key:"gen",closable:!1}],previewImg:"",isLoading:!1}},computed:{generalInfo:function(){var e=[{desc:"Tag No.",value:this.infoPiping.id},{desc:"Insulation",value:this.infoPiping.insulation},{desc:"Line No.",value:this.infoPiping.line_no},{desc:"Insulation Type",value:this.infoPiping.insulation_type},{desc:"Site Name",value:this.infoPiping.site_name},{desc:"Insulation Size (mm)",value:this.infoPiping.insulation_size},{desc:"From",value:this.infoPiping.line_from},{desc:"Design Corrosion Allowance (mm)",value:this.infoPiping.CAd},{desc:"To",value:this.infoPiping.line_to},{desc:"Design Life (year)",value:this.infoPiping.Ld},{desc:"NPS (inch)",value:this.infoPiping.nps},{desc:"Design Pressure (barg)",value:this.infoPiping.design_pressure_barg},{desc:"P&ID No.",value:this.infoPiping.pid_no},{desc:"Design Pressure (psi)",value:this.infoPiping.design_pressure_psi},{desc:"Drawing No.",value:this.infoPiping.drawing_no},{desc:"Operating Pressure (barg)",value:this.infoPiping.operating_pressure_barg},{desc:"In-service Date",value:this.infoPiping.inservice_date?l()(this.infoPiping.inservice_date).format("LL"):null},{desc:"Operating Pressure (psi)",value:this.infoPiping.operating_pressure_psi},{desc:"Design Code",value:this.infoPiping.piping_code},{desc:"Design Temperature (째C)",value:this.infoPiping.design_temp_max_c},{desc:"Pipe Spec",value:this.infoPiping.spec_class},{desc:"Design Temperature (째F) ",value:this.infoPiping.design_temp_max_f},{desc:"Service",value:this.infoPiping.service_desc},{desc:"Operating Temperature (째C)",value:this.infoPiping.operating_temp_c},{desc:"Material",value:this.infoPiping.material_name},{desc:"Operating Temperature (째F)",value:this.infoPiping.operating_temp_f},{desc:"Stress (psi)",value:this.infoPiping.stress_psi},{desc:"Inspection Interval (year)",value:this.infoPiping.ins_interval},{desc:"Joint Efficiency",value:this.infoPiping.e},{desc:"Inventory Group",value:this.infoPiping.inventory_group_name},{desc:"Dead Leg",value:this.infoPiping.deadleg},{desc:"Service Class",value:this.infoPiping.service_class},{desc:"System",value:this.infoPiping.system_name},{desc:"Piping Group",value:this.infoPiping.piping_group_name}];return e},baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},watch:{$route:{handler:function(){this.FETCH_INFO()}}},methods:{FETCH_INFO:function(){var e=this;this.isLoading=!0;var t=this.$route.params.id_tag;(0,o.Z)({method:"get",url:"/PipingInfo/piping-info-view-by-id?id_piping="+t,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.infoPiping=t.data[0],e.infoPiping.minmax_temp_c=null!==e.infoPiping.design_temp_min_c&&null!==e.infoPiping.design_temp_max_c?e.infoPiping.design_temp_min_c+"/"+e.infoPiping.design_temp_max_c:"-/-",e.infoPiping.minmax_temp_f=null!==e.infoPiping.design_temp_min_f&&null!==e.infoPiping.design_temp_max_f?e.infoPiping.design_temp_min_f+"/"+e.infoPiping.design_temp_max_f:"-/-")}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},UPLOAD_PIC:function(e){var t=this;this.isLoading=!0;var i=this.$route.params.id_tag;if(this.file_pic_upload=1==e?this.$refs.pic_upload_ov.files[0]:this.$refs.pic_upload_np.files[0],this.file_pic_upload&&"image/jpeg"==this.file_pic_upload.type||"image/png"==this.file_pic_upload.type)if(this.file_pic_upload.size<2e7)(0,o.Z)({method:"post",url:"/PipingInfo/upload-pic",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id:i,file:this.file_pic_upload,type:e}}).then((function(e){200==e.status&&t.FETCH_INFO()}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){t.isLoading=!1}));else{this.$ons.notification.alert("File size too large. (20 MB max)");var a=document.getElementById("pic-upload-btn");a.val="",this.isLoading=!1}else{this.$ons.notification.alert("Incorrect filetype. <br/> Only JPEG/PNG file can be uploaded.");var n=document.getElementById("pic-upload-btn");n.val="",this.isLoading=!1}},DELETE_PIC:function(e,t){var i=this;this.$ons.notification.confirm("Confirm delete?").then((function(a){if(1==a){i.isLoading=!0,console.log("==> PIPING INFO IMG DELETE: START");var n=i.$route.params.id_tag;console.log("==> ID TAG (PIPING): "+n),(0,o.Z)({method:"delete",url:"/PipingInfo/delete-pic/",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id:n,file_path:e,type:t}}).then((function(e){console.log(e),200==e.status&&(i.FETCH_INFO(),console.log("==> PIPING INFO IMG DELETE: DONE"),i.isLoading=!1)}))["catch"]((function(e){i.isLoading=!1,i.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){i.FETCH_INFO()}))}}))},PREVIEW_PIC:function(e){e&&(this.previewImg=e)},PREVIEW_PIC_CLOSE:function(){this.previewImg=""}}},T=N;var O=(0,v.Z)(T,a,n,!1,null,"72084bb6",null);const U=O.exports}}]);
//# sourceMappingURL=9468.448ffdfb.js.map
{"version":3,"file":"js/4844.33b9c10a.js","mappings":"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","sources":["webpack://tims-dexon/./src/components/app-structures/app-loading.vue?c69a","webpack://tims-dexon/src/components/app-structures/app-loading.vue","webpack://tims-dexon/./src/components/app-structures/app-loading.vue?3cfb","webpack://tims-dexon/./src/components/app-structures/app-loading.vue","webpack://tims-dexon/./node_modules/core-js/internals/number-is-finite.js","webpack://tims-dexon/./node_modules/core-js/modules/es.number.is-finite.js","webpack://tims-dexon/./node_modules/core-js/modules/es.object.values.js","webpack://tims-dexon/./node_modules/core-js/modules/es.regexp.flags.js","webpack://tims-dexon/./node_modules/core-js/modules/es.typed-array.int32-array.js","webpack://tims-dexon/./node_modules/@xmldom/xmldom/lib/conventions.js","webpack://tims-dexon/./node_modules/@xmldom/xmldom/lib/dom-parser.js","webpack://tims-dexon/./node_modules/@xmldom/xmldom/lib/dom.js","webpack://tims-dexon/./node_modules/@xmldom/xmldom/lib/entities.js","webpack://tims-dexon/./node_modules/@xmldom/xmldom/lib/index.js","webpack://tims-dexon/./node_modules/@xmldom/xmldom/lib/sax.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://tims-dexon/./node_modules/easy-template-x/dist/es/easy-template-x.js","webpack://tims-dexon/./node_modules/lodash.get/index.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://tims-dexon/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-loading\"},[_c('div',{staticClass:\"box\"},[_c('hash-loader',{staticClass:\"custom-class\",attrs:{\"color\":\"#1e1450\",\"loading\":true,\"size\":40,\"sizeUnit\":\"px\"}}),_c('h5',{staticClass:\"app-name\"},[_vm._v(_vm._s(_vm.text))])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-loading\">\n    <div class=\"box\">\n      <hash-loader\n        class=\"custom-class\"\n        color=\"#1e1450\"\n        :loading=\"true\"\n        :size=\"40\"\n        sizeUnit=\"px\"\n      ></hash-loader>\n      <h5 class=\"app-name\">{{ text }}</h5>\n      <!-- <h6>please wait...</h6> -->\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"app-user-logging-in\",\n  props: {\n    text: String,\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/style/main.scss\";\n.app-loading {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: 10;\n  background-color: #fdfdfd;\n  top: 0;\n  left: 0;\n  .box {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    width: 300px;\n    height: fit-content;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n    img {\n      width: 100px;\n      filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.1));\n    }\n    h5 {\n      font-size: 12px;\n      color: $web-font-color-grey;\n      font-weight: 600;\n    }\n    h6 {\n      font-size: 12px;\n      color: $web-font-color-grey;\n      font-weight: 400;\n      margin: 10px 0 20px 0;\n    }\n    .app-name {\n      color: $web-font-color-black;\n      font-weight: 500;\n      margin-bottom: 0;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./app-loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./app-loading.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./app-loading.vue?vue&type=template&id=7261fb9f&scoped=true&\"\nimport script from \"./app-loading.vue?vue&type=script&lang=js&\"\nexport * from \"./app-loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./app-loading.vue?vue&type=style&index=0&id=7261fb9f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7261fb9f\",\n  null\n  \n)\n\nexport default component.exports","var global = require('../internals/global');\n\nvar globalIsFinite = global.isFinite;\n\n// `Number.isFinite` method\n// https://tc39.es/ecma262/#sec-number.isfinite\n// eslint-disable-next-line es-x/no-number-isfinite -- safe\nmodule.exports = Number.isFinite || function isFinite(it) {\n  return typeof it == 'number' && globalIsFinite(it);\n};\n","var $ = require('../internals/export');\nvar numberIsFinite = require('../internals/number-is-finite');\n\n// `Number.isFinite` method\n// https://tc39.es/ecma262/#sec-number.isfinite\n$({ target: 'Number', stat: true }, { isFinite: numberIsFinite });\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectDefinePropertyModule = require('../internals/object-define-property');\nvar regExpFlags = require('../internals/regexp-flags');\nvar fails = require('../internals/fails');\n\nvar RegExpPrototype = RegExp.prototype;\n\nvar FORCED = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\n  return Object.getOwnPropertyDescriptor(RegExpPrototype, 'flags').get.call({ dotAll: true, sticky: true }) !== 'sy';\n});\n\n// `RegExp.prototype.flags` getter\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nif (FORCED) objectDefinePropertyModule.f(RegExpPrototype, 'flags', {\n  configurable: true,\n  get: regExpFlags\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Int32Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Int32', function (init) {\n  return function Int32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","'use strict'\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * Since we can not rely on `Object.assign` we provide a simplified version\n * that is sufficient for our needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n *\n * @returns {Object} target\n * @throws TypeError if target is not an object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object')\n\t}\n\tfor (var key in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\ttarget[key] = source[key]\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n","var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to https://www.w3.org/TR/xml11/#sec-line-ends:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA\n * > 2. the two-character sequence #xD #x85\n * > 3. the single character #x85\n * > 4. the single character #x2028\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n */\nfunction normalizeLineEndings(input) {\n\treturn input\n\t\t.replace(/\\r[\\n\\u0085]/g, '\\n')\n\t\t.replace(/[\\r\\u0085\\u2028]/g, '\\n')\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {DOMHandler} [domBuilder]\n * @property {Function} [errorHandler]\n * @property {(string) => string} [normalizeLineEndings] used to replace line endings before parsing\n * \t\t\t\t\t\tdefaults to `normalizeLineEndings`\n * @property {Locator} [locator]\n * @property {Record<string, string>} [xmlns]\n *\n * @see normalizeLineEndings\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code\n * from a string into a DOM `Document`.\n *\n * _xmldom is different from the spec in that it allows an `options` parameter,\n * to override the default behavior._\n *\n * @param {DOMParserOptions} [options]\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tvar normalize = options.normalizeLineEndings || normalizeLineEndings;\n\tif (source && typeof source === 'string') {\n\t\tsax.parse(\n\t\t\tnormalize(source),\n\t\t\tdefaultNSMap,\n\t\t\tentityMap\n\t\t)\n\t} else {\n\t\tsax.errorHandler.error('invalid doc source')\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.DOMParser = DOMParser;\n","var conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tif (Object.prototype.hasOwnProperty.call(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0,\n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long\n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * @private\n\t * @param {function (Node):boolean} predicate\n\t * @returns {Node[]}\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * @private\n\t * @param {Node} item\n\t * @returns {number}\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\n\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises\n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises\n\t\t_insertBefore(this, newChild,oldChild, assertPreReplacementValidityInDocument);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(Object.prototype.hasOwnProperty.call(map, prefix)){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n\tthis.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\n/**\n * Updates `el.childNodes`, updating the indexed items and it's `length`.\n * Passing `newChild` means it will be appended.\n * Otherwise it's assumed that an item has been removed,\n * and `el.firstNode` and it's `.nextSibling` are used\n * to walk the current list of child nodes.\n *\n * @param {Document} doc\n * @param {Node} el\n * @param {Node} [newChild]\n * @private\n */\nfunction _onUpdateChild (doc, el, newChild) {\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif (newChild) {\n\t\t\tcs[cs.length++] = newChild;\n\t\t} else {\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t\tdelete cs[cs.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n *\n * @param {Node} parentNode\n * @param {Node} child\n * @returns {Node} the child that was removed.\n * @private\n */\nfunction _removeChild (parentNode, child) {\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif (previous) {\n\t\tprevious.nextSibling = next;\n\t} else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif (next) {\n\t\tnext.previousSibling = previous;\n\t} else {\n\t\tparentNode.lastChild = previous;\n\t}\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(isElementNode(node) ||\n\t\t\tisTextNode(node) ||\n\t\t\tisDocTypeNode(node) ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tHIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif(cp){\n\t\tcp.removeChild(node);//remove and update\n\t}\n\tif(node.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t}else{\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparent.firstChild = newFirst;\n\t}\n\tif(child == null){\n\t\tparent.lastChild = newLast;\n\t}else{\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parent;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parent.ownerDocument||parent, parent);\n\t//console.log(parent.lastChild.nextSibling == null)\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\treturn node;\n}\n\n/**\n * Appends `newChild` to `parentNode`.\n * If `newChild` is already connected to a `parentNode` it is first removed from it.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n * @param {Node} parentNode\n * @param {Node} newChild\n * @returns {Node}\n * @private\n */\nfunction _appendSingleChild (parentNode, newChild) {\n\tif (newChild.parentNode) {\n\t\tnewChild.parentNode.removeChild(newChild);\n\t}\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = parentNode.lastChild;\n\tnewChild.nextSibling = null;\n\tif (newChild.previousSibling) {\n\t\tnewChild.previousSibling.nextSibling = newChild;\n\t} else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\treturn newChild;\n}\n\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n *\n * Literal whitespace other than space that appear in attribute values\n * are serialized as their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces)\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&>]/g,_xmlEncoder)\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE：\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor (var n in node) {\n\t\tif (Object.prototype.hasOwnProperty.call(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != \"object\") {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","var freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({amp:'&', apos:\"'\", gt:'>', lt:'<', quot:'\"'})\n\n/**\n * A map of currently 241 entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n       lt: '<',\n       gt: '>',\n       amp: '&',\n       quot: '\"',\n       apos: \"'\",\n       Agrave: \"À\",\n       Aacute: \"Á\",\n       Acirc: \"Â\",\n       Atilde: \"Ã\",\n       Auml: \"Ä\",\n       Aring: \"Å\",\n       AElig: \"Æ\",\n       Ccedil: \"Ç\",\n       Egrave: \"È\",\n       Eacute: \"É\",\n       Ecirc: \"Ê\",\n       Euml: \"Ë\",\n       Igrave: \"Ì\",\n       Iacute: \"Í\",\n       Icirc: \"Î\",\n       Iuml: \"Ï\",\n       ETH: \"Ð\",\n       Ntilde: \"Ñ\",\n       Ograve: \"Ò\",\n       Oacute: \"Ó\",\n       Ocirc: \"Ô\",\n       Otilde: \"Õ\",\n       Ouml: \"Ö\",\n       Oslash: \"Ø\",\n       Ugrave: \"Ù\",\n       Uacute: \"Ú\",\n       Ucirc: \"Û\",\n       Uuml: \"Ü\",\n       Yacute: \"Ý\",\n       THORN: \"Þ\",\n       szlig: \"ß\",\n       agrave: \"à\",\n       aacute: \"á\",\n       acirc: \"â\",\n       atilde: \"ã\",\n       auml: \"ä\",\n       aring: \"å\",\n       aelig: \"æ\",\n       ccedil: \"ç\",\n       egrave: \"è\",\n       eacute: \"é\",\n       ecirc: \"ê\",\n       euml: \"ë\",\n       igrave: \"ì\",\n       iacute: \"í\",\n       icirc: \"î\",\n       iuml: \"ï\",\n       eth: \"ð\",\n       ntilde: \"ñ\",\n       ograve: \"ò\",\n       oacute: \"ó\",\n       ocirc: \"ô\",\n       otilde: \"õ\",\n       ouml: \"ö\",\n       oslash: \"ø\",\n       ugrave: \"ù\",\n       uacute: \"ú\",\n       ucirc: \"û\",\n       uuml: \"ü\",\n       yacute: \"ý\",\n       thorn: \"þ\",\n       yuml: \"ÿ\",\n       nbsp: \"\\u00a0\",\n       iexcl: \"¡\",\n       cent: \"¢\",\n       pound: \"£\",\n       curren: \"¤\",\n       yen: \"¥\",\n       brvbar: \"¦\",\n       sect: \"§\",\n       uml: \"¨\",\n       copy: \"©\",\n       ordf: \"ª\",\n       laquo: \"«\",\n       not: \"¬\",\n       shy: \"­­\",\n       reg: \"®\",\n       macr: \"¯\",\n       deg: \"°\",\n       plusmn: \"±\",\n       sup2: \"²\",\n       sup3: \"³\",\n       acute: \"´\",\n       micro: \"µ\",\n       para: \"¶\",\n       middot: \"·\",\n       cedil: \"¸\",\n       sup1: \"¹\",\n       ordm: \"º\",\n       raquo: \"»\",\n       frac14: \"¼\",\n       frac12: \"½\",\n       frac34: \"¾\",\n       iquest: \"¿\",\n       times: \"×\",\n       divide: \"÷\",\n       forall: \"∀\",\n       part: \"∂\",\n       exist: \"∃\",\n       empty: \"∅\",\n       nabla: \"∇\",\n       isin: \"∈\",\n       notin: \"∉\",\n       ni: \"∋\",\n       prod: \"∏\",\n       sum: \"∑\",\n       minus: \"−\",\n       lowast: \"∗\",\n       radic: \"√\",\n       prop: \"∝\",\n       infin: \"∞\",\n       ang: \"∠\",\n       and: \"∧\",\n       or: \"∨\",\n       cap: \"∩\",\n       cup: \"∪\",\n       'int': \"∫\",\n       there4: \"∴\",\n       sim: \"∼\",\n       cong: \"≅\",\n       asymp: \"≈\",\n       ne: \"≠\",\n       equiv: \"≡\",\n       le: \"≤\",\n       ge: \"≥\",\n       sub: \"⊂\",\n       sup: \"⊃\",\n       nsub: \"⊄\",\n       sube: \"⊆\",\n       supe: \"⊇\",\n       oplus: \"⊕\",\n       otimes: \"⊗\",\n       perp: \"⊥\",\n       sdot: \"⋅\",\n       Alpha: \"Α\",\n       Beta: \"Β\",\n       Gamma: \"Γ\",\n       Delta: \"Δ\",\n       Epsilon: \"Ε\",\n       Zeta: \"Ζ\",\n       Eta: \"Η\",\n       Theta: \"Θ\",\n       Iota: \"Ι\",\n       Kappa: \"Κ\",\n       Lambda: \"Λ\",\n       Mu: \"Μ\",\n       Nu: \"Ν\",\n       Xi: \"Ξ\",\n       Omicron: \"Ο\",\n       Pi: \"Π\",\n       Rho: \"Ρ\",\n       Sigma: \"Σ\",\n       Tau: \"Τ\",\n       Upsilon: \"Υ\",\n       Phi: \"Φ\",\n       Chi: \"Χ\",\n       Psi: \"Ψ\",\n       Omega: \"Ω\",\n       alpha: \"α\",\n       beta: \"β\",\n       gamma: \"γ\",\n       delta: \"δ\",\n       epsilon: \"ε\",\n       zeta: \"ζ\",\n       eta: \"η\",\n       theta: \"θ\",\n       iota: \"ι\",\n       kappa: \"κ\",\n       lambda: \"λ\",\n       mu: \"μ\",\n       nu: \"ν\",\n       xi: \"ξ\",\n       omicron: \"ο\",\n       pi: \"π\",\n       rho: \"ρ\",\n       sigmaf: \"ς\",\n       sigma: \"σ\",\n       tau: \"τ\",\n       upsilon: \"υ\",\n       phi: \"φ\",\n       chi: \"χ\",\n       psi: \"ψ\",\n       omega: \"ω\",\n       thetasym: \"ϑ\",\n       upsih: \"ϒ\",\n       piv: \"ϖ\",\n       OElig: \"Œ\",\n       oelig: \"œ\",\n       Scaron: \"Š\",\n       scaron: \"š\",\n       Yuml: \"Ÿ\",\n       fnof: \"ƒ\",\n       circ: \"ˆ\",\n       tilde: \"˜\",\n       ensp: \" \",\n       emsp: \" \",\n       thinsp: \" \",\n       zwnj: \"‌\",\n       zwj: \"‍\",\n       lrm: \"‎\",\n       rlm: \"‏\",\n       ndash: \"–\",\n       mdash: \"—\",\n       lsquo: \"‘\",\n       rsquo: \"’\",\n       sbquo: \"‚\",\n       ldquo: \"“\",\n       rdquo: \"”\",\n       bdquo: \"„\",\n       dagger: \"†\",\n       Dagger: \"‡\",\n       bull: \"•\",\n       hellip: \"…\",\n       permil: \"‰\",\n       prime: \"′\",\n       Prime: \"″\",\n       lsaquo: \"‹\",\n       rsaquo: \"›\",\n       oline: \"‾\",\n       euro: \"€\",\n       trade: \"™\",\n       larr: \"←\",\n       uarr: \"↑\",\n       rarr: \"→\",\n       darr: \"↓\",\n       harr: \"↔\",\n       crarr: \"↵\",\n       lceil: \"⌈\",\n       rceil: \"⌉\",\n       lfloor: \"⌊\",\n       rfloor: \"⌋\",\n       loz: \"◊\",\n       spades: \"♠\",\n       clubs: \"♣\",\n       hearts: \"♥\",\n       diams: \"♦\"\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES\n","var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n","var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif (Object.hasOwnProperty.call(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: 这里有可能sax回退，有位置错误风险\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(/&#?\\w+;/g, entityReplacer),\n\t\t\tstartIndex\n\t\t)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//忘记闭合\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","import { DOMParser } from '@xmldom/xmldom';\nimport getProp from 'lodash.get';\nimport * as JSZip from 'jszip';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass MalformedFileError extends Error {\n  constructor(expectedFileType) {\n    super(`Malformed file detected. Make sure the file is a valid ${expectedFileType} file.`);\n\n    _defineProperty(this, \"expectedFileType\", void 0);\n\n    this.expectedFileType = expectedFileType; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, MalformedFileError.prototype);\n  }\n\n}\n\nclass MaxXmlDepthError extends Error {\n  constructor(maxDepth) {\n    super(`XML maximum depth reached (max depth: ${maxDepth}).`);\n\n    _defineProperty(this, \"maxDepth\", void 0);\n\n    this.maxDepth = maxDepth; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, MaxXmlDepthError.prototype);\n  }\n\n}\n\nclass MissingArgumentError extends Error {\n  constructor(argName) {\n    super(`Argument '${argName}' is missing.`);\n\n    _defineProperty(this, \"argName\", void 0);\n\n    this.argName = argName; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, MissingArgumentError.prototype);\n  }\n\n}\n\nclass MissingCloseDelimiterError extends Error {\n  constructor(openDelimiterText) {\n    super(`Close delimiter is missing from '${openDelimiterText}'.`);\n\n    _defineProperty(this, \"openDelimiterText\", void 0);\n\n    this.openDelimiterText = openDelimiterText; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, MissingCloseDelimiterError.prototype);\n  }\n\n}\n\nclass MissingStartDelimiterError extends Error {\n  constructor(closeDelimiterText) {\n    super(`Open delimiter is missing from '${closeDelimiterText}'.`);\n\n    _defineProperty(this, \"closeDelimiterText\", void 0);\n\n    this.closeDelimiterText = closeDelimiterText; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, MissingStartDelimiterError.prototype);\n  }\n\n}\n\nclass UnclosedTagError extends Error {\n  constructor(tagName) {\n    super(`Tag '${tagName}' is never closed.`);\n\n    _defineProperty(this, \"tagName\", void 0);\n\n    this.tagName = tagName; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, UnclosedTagError.prototype);\n  }\n\n}\n\nclass UnidentifiedFileTypeError extends Error {\n  constructor() {\n    super(`The filetype for this file could not be identified, is this file corrupted?`); // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, UnidentifiedFileTypeError.prototype);\n  }\n\n}\n\nclass UnknownContentTypeError extends Error {\n  constructor(contentType, tagRawText, path) {\n    super(`Content type '${contentType}' does not have a registered plugin to handle it.`);\n\n    _defineProperty(this, \"tagRawText\", void 0);\n\n    _defineProperty(this, \"contentType\", void 0);\n\n    _defineProperty(this, \"path\", void 0);\n\n    this.contentType = contentType;\n    this.tagRawText = tagRawText;\n    this.path = path; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, UnknownContentTypeError.prototype);\n  }\n\n}\n\nclass UnopenedTagError extends Error {\n  constructor(tagName) {\n    super(`Tag '${tagName}' is closed but was never opened.`);\n\n    _defineProperty(this, \"tagName\", void 0);\n\n    this.tagName = tagName; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, UnopenedTagError.prototype);\n  }\n\n}\n\nclass UnsupportedFileTypeError extends Error {\n  constructor(fileType) {\n    super(`Filetype \"${fileType}\" is not supported.`);\n\n    _defineProperty(this, \"fileType\", void 0);\n\n    this.fileType = fileType; // typescript hack: https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, UnsupportedFileTypeError.prototype);\n  }\n\n}\n\nfunction pushMany(destArray, items) {\n  Array.prototype.push.apply(destArray, items);\n}\nfunction first(array) {\n  if (!array.length) return undefined;\n  return array[0];\n}\nfunction last(array) {\n  if (!array.length) return undefined;\n  return array[array.length - 1];\n}\nfunction toDictionary(array, keySelector, valueSelector) {\n  if (!array.length) return {};\n  const res = {};\n  array.forEach((item, index) => {\n    const key = keySelector(item, index);\n    const value = valueSelector ? valueSelector(item, index) : item;\n    if (res[key]) throw new Error(`Key '${key}' already exists in the dictionary.`);\n    res[key] = value;\n  });\n  return res;\n}\n\nclass Base64 {\n  static encode(str) {\n    // browser\n    if (typeof btoa !== 'undefined') return btoa(str); // node\n    // https://stackoverflow.com/questions/23097928/node-js-btoa-is-not-defined-error#38446960\n\n    return new Buffer(str, 'binary').toString('base64');\n  }\n\n}\n\nfunction inheritsFrom(derived, base) {\n  // https://stackoverflow.com/questions/14486110/how-to-check-if-a-javascript-class-inherits-another-without-creating-an-obj\n  return derived === base || derived.prototype instanceof base;\n}\nfunction isPromiseLike(candidate) {\n  return !!candidate && typeof candidate === 'object' && typeof candidate.then === 'function';\n}\n\nconst Binary = {\n  //\n  // type detection\n  //\n  isBlob(binary) {\n    return this.isBlobConstructor(binary.constructor);\n  },\n\n  isArrayBuffer(binary) {\n    return this.isArrayBufferConstructor(binary.constructor);\n  },\n\n  isBuffer(binary) {\n    return this.isBufferConstructor(binary.constructor);\n  },\n\n  isBlobConstructor(binaryType) {\n    return typeof Blob !== 'undefined' && inheritsFrom(binaryType, Blob);\n  },\n\n  isArrayBufferConstructor(binaryType) {\n    return typeof ArrayBuffer !== 'undefined' && inheritsFrom(binaryType, ArrayBuffer);\n  },\n\n  isBufferConstructor(binaryType) {\n    return typeof Buffer !== 'undefined' && inheritsFrom(binaryType, Buffer);\n  },\n\n  //\n  // utilities\n  //\n  toBase64(binary) {\n    if (this.isBlob(binary)) {\n      return new Promise(resolve => {\n        const fileReader = new FileReader();\n\n        fileReader.onload = function () {\n          const base64 = Base64.encode(this.result);\n          resolve(base64);\n        };\n\n        fileReader.readAsBinaryString(binary);\n      });\n    }\n\n    if (this.isBuffer(binary)) {\n      return Promise.resolve(binary.toString('base64'));\n    }\n\n    if (this.isArrayBuffer(binary)) {\n      // https://stackoverflow.com/questions/9267899/arraybuffer-to-base64-encoded-string#42334410\n      const binaryStr = new Uint8Array(binary).reduce((str, byte) => str + String.fromCharCode(byte), '');\n      const base64 = Base64.encode(binaryStr);\n      return Promise.resolve(base64);\n    }\n\n    throw new Error(`Binary type '${binary.constructor.name}' is not supported.`);\n  }\n\n};\n\nfunction isNumber(value) {\n  return Number.isFinite(value);\n}\n\nclass Path {\n  static getFilename(path) {\n    const lastSlashIndex = path.lastIndexOf('/');\n    return path.substr(lastSlashIndex + 1);\n  }\n\n  static getDirectory(path) {\n    const lastSlashIndex = path.lastIndexOf('/');\n    return path.substring(0, lastSlashIndex);\n  }\n\n  static combine(...parts) {\n    return parts.filter(part => part === null || part === void 0 ? void 0 : part.trim()).join('/');\n  }\n\n}\n\nclass Regex {\n  static escape(str) {\n    // https://stackoverflow.com/questions/1144783/how-to-replace-all-occurrences-of-a-string-in-javascript\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n  }\n\n}\n\n/**\r\n * Secure Hash Algorithm (SHA1)\r\n *\r\n * Taken from here: http://www.webtoolkit.info/javascript-sha1.html\r\n *\r\n * Recommended here: https://stackoverflow.com/questions/6122571/simple-non-secure-hash-function-for-javascript#6122732\r\n */\nfunction sha1(msg) {\n  msg = utf8Encode(msg);\n  const msgLength = msg.length;\n  let i, j;\n  const wordArray = [];\n\n  for (i = 0; i < msgLength - 3; i += 4) {\n    j = msg.charCodeAt(i) << 24 | msg.charCodeAt(i + 1) << 16 | msg.charCodeAt(i + 2) << 8 | msg.charCodeAt(i + 3);\n    wordArray.push(j);\n  }\n\n  switch (msgLength % 4) {\n    case 0:\n      i = 0x080000000;\n      break;\n\n    case 1:\n      i = msg.charCodeAt(msgLength - 1) << 24 | 0x0800000;\n      break;\n\n    case 2:\n      i = msg.charCodeAt(msgLength - 2) << 24 | msg.charCodeAt(msgLength - 1) << 16 | 0x08000;\n      break;\n\n    case 3:\n      i = msg.charCodeAt(msgLength - 3) << 24 | msg.charCodeAt(msgLength - 2) << 16 | msg.charCodeAt(msgLength - 1) << 8 | 0x80;\n      break;\n  }\n\n  wordArray.push(i);\n\n  while (wordArray.length % 16 != 14) {\n    wordArray.push(0);\n  }\n\n  wordArray.push(msgLength >>> 29);\n  wordArray.push(msgLength << 3 & 0x0ffffffff);\n  const w = new Array(80);\n  let H0 = 0x67452301;\n  let H1 = 0xEFCDAB89;\n  let H2 = 0x98BADCFE;\n  let H3 = 0x10325476;\n  let H4 = 0xC3D2E1F0;\n  let A, B, C, D, E;\n  let temp;\n\n  for (let blockStart = 0; blockStart < wordArray.length; blockStart += 16) {\n    for (i = 0; i < 16; i++) {\n      w[i] = wordArray[blockStart + i];\n    }\n\n    for (i = 16; i <= 79; i++) {\n      w[i] = rotateLeft(w[i - 3] ^ w[i - 8] ^ w[i - 14] ^ w[i - 16], 1);\n    }\n\n    A = H0;\n    B = H1;\n    C = H2;\n    D = H3;\n    E = H4;\n\n    for (i = 0; i <= 19; i++) {\n      temp = rotateLeft(A, 5) + (B & C | ~B & D) + E + w[i] + 0x5A827999 & 0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotateLeft(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 20; i <= 39; i++) {\n      temp = rotateLeft(A, 5) + (B ^ C ^ D) + E + w[i] + 0x6ED9EBA1 & 0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotateLeft(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 40; i <= 59; i++) {\n      temp = rotateLeft(A, 5) + (B & C | B & D | C & D) + E + w[i] + 0x8F1BBCDC & 0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotateLeft(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    for (i = 60; i <= 79; i++) {\n      temp = rotateLeft(A, 5) + (B ^ C ^ D) + E + w[i] + 0xCA62C1D6 & 0x0ffffffff;\n      E = D;\n      D = C;\n      C = rotateLeft(B, 30);\n      B = A;\n      A = temp;\n    }\n\n    H0 = H0 + A & 0x0ffffffff;\n    H1 = H1 + B & 0x0ffffffff;\n    H2 = H2 + C & 0x0ffffffff;\n    H3 = H3 + D & 0x0ffffffff;\n    H4 = H4 + E & 0x0ffffffff;\n  }\n\n  temp = cvtHex(H0) + cvtHex(H1) + cvtHex(H2) + cvtHex(H3) + cvtHex(H4);\n  return temp.toLowerCase();\n}\n\nfunction rotateLeft(n, s) {\n  const t4 = n << s | n >>> 32 - s;\n  return t4;\n}\n\nfunction cvtHex(val) {\n  let str = \"\";\n\n  for (let i = 7; i >= 0; i--) {\n    const v = val >>> i * 4 & 0x0f;\n    str += v.toString(16);\n  }\n\n  return str;\n}\n\nfunction utf8Encode(str) {\n  str = str.replace(/\\r\\n/g, \"\\n\");\n  let utfStr = \"\";\n\n  for (let n = 0; n < str.length; n++) {\n    const c = str.charCodeAt(n);\n\n    if (c < 128) {\n      utfStr += String.fromCharCode(c);\n    } else if (c > 127 && c < 2048) {\n      utfStr += String.fromCharCode(c >> 6 | 192);\n      utfStr += String.fromCharCode(c & 63 | 128);\n    } else {\n      utfStr += String.fromCharCode(c >> 12 | 224);\n      utfStr += String.fromCharCode(c >> 6 & 63 | 128);\n      utfStr += String.fromCharCode(c & 63 | 128);\n    }\n  }\n\n  return utfStr;\n}\n\nfunction stringValue(val) {\n  if (val === null || val === undefined) {\n    return '';\n  }\n\n  return val.toString();\n}\n\nclass XmlDepthTracker {\n  constructor(maxDepth) {\n    this.maxDepth = maxDepth;\n\n    _defineProperty(this, \"depth\", 0);\n  }\n\n  increment() {\n    this.depth++;\n\n    if (this.depth > this.maxDepth) {\n      throw new MaxXmlDepthError(this.maxDepth);\n    }\n  }\n\n  decrement() {\n    this.depth--;\n  }\n\n}\n\nlet XmlNodeType;\n\n(function (XmlNodeType) {\n  XmlNodeType[\"Text\"] = \"Text\";\n  XmlNodeType[\"General\"] = \"General\";\n})(XmlNodeType || (XmlNodeType = {}));\n\nconst TEXT_NODE_NAME = '#text'; // see: https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName\n\nconst XmlNode = {\n  //\n  // factories\n  //\n  createTextNode(text) {\n    return {\n      nodeType: XmlNodeType.Text,\n      nodeName: TEXT_NODE_NAME,\n      textContent: text\n    };\n  },\n\n  createGeneralNode(name) {\n    return {\n      nodeType: XmlNodeType.General,\n      nodeName: name\n    };\n  },\n\n  //\n  // serialization\n  //\n\n  /**\r\n   * Encode string to make it safe to use inside xml tags.\r\n   *\r\n   * https://stackoverflow.com/questions/7918868/how-to-escape-xml-entities-in-javascript\r\n   */\n  encodeValue(str) {\n    if (str === null || str === undefined) throw new MissingArgumentError(\"str\");\n    if (typeof str !== 'string') throw new TypeError(`Expected a string, got '${str.constructor.name}'.`);\n    return str.replace(/[<>&'\"]/g, c => {\n      switch (c) {\n        case '<':\n          return '&lt;';\n\n        case '>':\n          return '&gt;';\n\n        case '&':\n          return '&amp;';\n\n        case '\\'':\n          return '&apos;';\n\n        case '\"':\n          return '&quot;';\n      }\n\n      return '';\n    });\n  },\n\n  serialize(node) {\n    if (this.isTextNode(node)) return this.encodeValue(node.textContent || ''); // attributes\n\n    let attributes = '';\n\n    if (node.attributes) {\n      const attributeNames = Object.keys(node.attributes);\n\n      if (attributeNames.length) {\n        attributes = ' ' + attributeNames.map(name => `${name}=\"${this.encodeValue(node.attributes[name] || '')}\"`).join(' ');\n      }\n    } // open tag\n\n\n    const hasChildren = (node.childNodes || []).length > 0;\n    const suffix = hasChildren ? '' : '/';\n    const openTag = `<${node.nodeName}${attributes}${suffix}>`;\n    let xml;\n\n    if (hasChildren) {\n      // child nodes\n      const childrenXml = node.childNodes.map(child => this.serialize(child)).join(''); // close tag\n\n      const closeTag = `</${node.nodeName}>`;\n      xml = openTag + childrenXml + closeTag;\n    } else {\n      xml = openTag;\n    }\n\n    return xml;\n  },\n\n  /**\r\n   * The conversion is always deep.\r\n   */\n  fromDomNode(domNode) {\n    let xmlNode; // basic properties\n\n    if (domNode.nodeType === domNode.TEXT_NODE) {\n      xmlNode = this.createTextNode(domNode.textContent);\n    } else {\n      xmlNode = this.createGeneralNode(domNode.nodeName); // attributes\n\n      if (domNode.nodeType === domNode.ELEMENT_NODE) {\n        const attributes = domNode.attributes;\n\n        if (attributes) {\n          xmlNode.attributes = {};\n\n          for (let i = 0; i < attributes.length; i++) {\n            const curAttribute = attributes.item(i);\n            xmlNode.attributes[curAttribute.name] = curAttribute.value;\n          }\n        }\n      }\n    } // children\n\n\n    if (domNode.childNodes) {\n      xmlNode.childNodes = [];\n      let prevChild;\n\n      for (let i = 0; i < domNode.childNodes.length; i++) {\n        // clone child\n        const domChild = domNode.childNodes.item(i);\n        const curChild = this.fromDomNode(domChild); // set references\n\n        xmlNode.childNodes.push(curChild);\n        curChild.parentNode = xmlNode;\n\n        if (prevChild) {\n          prevChild.nextSibling = curChild;\n        }\n\n        prevChild = curChild;\n      }\n    }\n\n    return xmlNode;\n  },\n\n  //\n  // core functions\n  //\n  isTextNode(node) {\n    if (node.nodeType === XmlNodeType.Text || node.nodeName === TEXT_NODE_NAME) {\n      if (!(node.nodeType === XmlNodeType.Text && node.nodeName === TEXT_NODE_NAME)) {\n        throw new Error(`Invalid text node. Type: '${node.nodeType}', Name: '${node.nodeName}'.`);\n      }\n\n      return true;\n    }\n\n    return false;\n  },\n\n  cloneNode(node, deep) {\n    if (!node) throw new MissingArgumentError(\"node\");\n\n    if (!deep) {\n      const clone = Object.assign({}, node);\n      clone.parentNode = null;\n      clone.childNodes = node.childNodes ? [] : null;\n      clone.nextSibling = null;\n      return clone;\n    } else {\n      const clone = cloneNodeDeep(node);\n      clone.parentNode = null;\n      return clone;\n    }\n  },\n\n  /**\r\n   * Insert the node as a new sibling, before the original node.\r\n   *\r\n   * * **Note**: It is more efficient to use the insertChild function if you\r\n   *   already know the relevant index.\r\n   */\n  insertBefore(newNode, referenceNode) {\n    if (!newNode) throw new MissingArgumentError(\"newNode\");\n    if (!referenceNode) throw new MissingArgumentError(\"referenceNode\");\n    if (!referenceNode.parentNode) throw new Error(`'${\"referenceNode\"}' has no parent`);\n    const childNodes = referenceNode.parentNode.childNodes;\n    const beforeNodeIndex = childNodes.indexOf(referenceNode);\n    XmlNode.insertChild(referenceNode.parentNode, newNode, beforeNodeIndex);\n  },\n\n  /**\r\n   * Insert the node as a new sibling, after the original node.\r\n   *\r\n   * * **Note**: It is more efficient to use the insertChild function if you\r\n   *   already know the relevant index.\r\n   */\n  insertAfter(newNode, referenceNode) {\n    if (!newNode) throw new MissingArgumentError(\"newNode\");\n    if (!referenceNode) throw new MissingArgumentError(\"referenceNode\");\n    if (!referenceNode.parentNode) throw new Error(`'${\"referenceNode\"}' has no parent`);\n    const childNodes = referenceNode.parentNode.childNodes;\n    const referenceNodeIndex = childNodes.indexOf(referenceNode);\n    XmlNode.insertChild(referenceNode.parentNode, newNode, referenceNodeIndex + 1);\n  },\n\n  insertChild(parent, child, childIndex) {\n    if (!parent) throw new MissingArgumentError(\"parent\");\n    if (XmlNode.isTextNode(parent)) throw new Error('Appending children to text nodes is forbidden');\n    if (!child) throw new MissingArgumentError(\"child\");\n    if (!parent.childNodes) parent.childNodes = []; // revert to append\n\n    if (childIndex === parent.childNodes.length) {\n      XmlNode.appendChild(parent, child);\n      return;\n    }\n\n    if (childIndex > parent.childNodes.length) throw new RangeError(`Child index ${childIndex} is out of range. Parent has only ${parent.childNodes.length} child nodes.`); // update references\n\n    child.parentNode = parent;\n    const childAfter = parent.childNodes[childIndex];\n    child.nextSibling = childAfter;\n\n    if (childIndex > 0) {\n      const childBefore = parent.childNodes[childIndex - 1];\n      childBefore.nextSibling = child;\n    } // append\n\n\n    parent.childNodes.splice(childIndex, 0, child);\n  },\n\n  appendChild(parent, child) {\n    if (!parent) throw new MissingArgumentError(\"parent\");\n    if (XmlNode.isTextNode(parent)) throw new Error('Appending children to text nodes is forbidden');\n    if (!child) throw new MissingArgumentError(\"child\");\n    if (!parent.childNodes) parent.childNodes = []; // update references\n\n    if (parent.childNodes.length) {\n      const currentLastChild = parent.childNodes[parent.childNodes.length - 1];\n      currentLastChild.nextSibling = child;\n    }\n\n    child.nextSibling = null;\n    child.parentNode = parent; // append\n\n    parent.childNodes.push(child);\n  },\n\n  /**\r\n   * Removes the node from it's parent.\r\n   *\r\n   * * **Note**: It is more efficient to call removeChild(parent, childIndex).\r\n   */\n  remove(node) {\n    if (!node) throw new MissingArgumentError(\"node\");\n    if (!node.parentNode) throw new Error('Node has no parent');\n    removeChild(node.parentNode, node);\n  },\n\n  removeChild,\n\n  //\n  // utility functions\n  //\n\n  /**\r\n   * Gets the last direct child text node if it exists. Otherwise creates a\r\n   * new text node, appends it to 'node' and return the newly created text\r\n   * node.\r\n   *\r\n   * The function also makes sure the returned text node has a valid string\r\n   * value.\r\n   */\n  lastTextChild(node) {\n    if (XmlNode.isTextNode(node)) {\n      return node;\n    } // existing text nodes\n\n\n    if (node.childNodes) {\n      const allTextNodes = node.childNodes.filter(child => XmlNode.isTextNode(child));\n\n      if (allTextNodes.length) {\n        const lastTextNode = last(allTextNodes);\n        if (!lastTextNode.textContent) lastTextNode.textContent = '';\n        return lastTextNode;\n      }\n    } // create new text node\n\n\n    const newTextNode = {\n      nodeType: XmlNodeType.Text,\n      nodeName: TEXT_NODE_NAME,\n      textContent: ''\n    };\n    XmlNode.appendChild(node, newTextNode);\n    return newTextNode;\n  },\n\n  /**\r\n   * Remove sibling nodes between 'from' and 'to' excluding both.\r\n   * Return the removed nodes.\r\n   */\n  removeSiblings(from, to) {\n    if (from === to) return [];\n    const removed = [];\n    let lastRemoved;\n    from = from.nextSibling;\n\n    while (from !== to) {\n      const removeMe = from;\n      from = from.nextSibling;\n      XmlNode.remove(removeMe);\n      removed.push(removeMe);\n      if (lastRemoved) lastRemoved.nextSibling = removeMe;\n      lastRemoved = removeMe;\n    }\n\n    return removed;\n  },\n\n  /**\r\n   * Split the original node into two sibling nodes. Returns both nodes.\r\n   *\r\n   * @param parent The node to split\r\n   * @param child The node that marks the split position.\r\n   * @param removeChild Should this method remove the child while splitting.\r\n   *\r\n   * @returns Two nodes - `left` and `right`. If the `removeChild` argument is\r\n   * `false` then the original child node is the first child of `right`.\r\n   */\n  splitByChild(parent, child, removeChild) {\n    if (child.parentNode != parent) throw new Error(`Node '${\"child\"}' is not a direct child of '${\"parent\"}'.`); // create childless clone 'left'\n\n    const left = XmlNode.cloneNode(parent, false);\n\n    if (parent.parentNode) {\n      XmlNode.insertBefore(left, parent);\n    }\n\n    const right = parent; // move nodes from 'right' to 'left'\n\n    let curChild = right.childNodes[0];\n\n    while (curChild != child) {\n      XmlNode.remove(curChild);\n      XmlNode.appendChild(left, curChild);\n      curChild = right.childNodes[0];\n    } // remove child\n\n\n    if (removeChild) {\n      XmlNode.removeChild(right, 0);\n    }\n\n    return [left, right];\n  },\n\n  findParent(node, predicate) {\n    while (node) {\n      if (predicate(node)) return node;\n      node = node.parentNode;\n    }\n\n    return null;\n  },\n\n  findParentByName(node, nodeName) {\n    return XmlNode.findParent(node, n => n.nodeName === nodeName);\n  },\n\n  findChildByName(node, childName) {\n    if (!node) return null;\n    return (node.childNodes || []).find(child => child.nodeName === childName);\n  },\n\n  /**\r\n   * Returns all siblings between 'firstNode' and 'lastNode' inclusive.\r\n   */\n  siblingsInRange(firstNode, lastNode) {\n    if (!firstNode) throw new MissingArgumentError(\"firstNode\");\n    if (!lastNode) throw new MissingArgumentError(\"lastNode\");\n    const range = [];\n    let curNode = firstNode;\n\n    while (curNode && curNode !== lastNode) {\n      range.push(curNode);\n      curNode = curNode.nextSibling;\n    }\n\n    if (!curNode) throw new Error('Nodes are not siblings.');\n    range.push(lastNode);\n    return range;\n  },\n\n  /**\r\n   * Recursively removes text nodes leaving only \"general nodes\".\r\n   */\n  removeEmptyTextNodes(node) {\n    recursiveRemoveEmptyTextNodes(node);\n  }\n\n}; //\n// overloaded functions\n//\n\n/**\r\n * Remove a child node from it's parent. Returns the removed child.\r\n *\r\n * * **Note:** Prefer calling with explicit index.\r\n */\n\nfunction removeChild(parent, childOrIndex) {\n  if (!parent) throw new MissingArgumentError(\"parent\");\n  if (childOrIndex === null || childOrIndex === undefined) throw new MissingArgumentError(\"childOrIndex\");\n  if (!parent.childNodes || !parent.childNodes.length) throw new Error('Parent node has node children'); // get child index\n\n  let childIndex;\n\n  if (typeof childOrIndex === 'number') {\n    childIndex = childOrIndex;\n  } else {\n    childIndex = parent.childNodes.indexOf(childOrIndex);\n    if (childIndex === -1) throw new Error('Specified child node is not a child of the specified parent');\n  }\n\n  if (childIndex >= parent.childNodes.length) throw new RangeError(`Child index ${childIndex} is out of range. Parent has only ${parent.childNodes.length} child nodes.`); // update references\n\n  const child = parent.childNodes[childIndex];\n\n  if (childIndex > 0) {\n    const beforeChild = parent.childNodes[childIndex - 1];\n    beforeChild.nextSibling = child.nextSibling;\n  }\n\n  child.parentNode = null;\n  child.nextSibling = null; // remove and return\n\n  return parent.childNodes.splice(childIndex, 1)[0];\n} //\n// private functions\n//\n\n\nfunction cloneNodeDeep(original) {\n  const clone = {}; // basic properties\n\n  clone.nodeType = original.nodeType;\n  clone.nodeName = original.nodeName;\n\n  if (XmlNode.isTextNode(original)) {\n    clone.textContent = original.textContent;\n  } else {\n    const attributes = original.attributes;\n\n    if (attributes) {\n      clone.attributes = Object.assign({}, attributes);\n    }\n  } // children\n\n\n  if (original.childNodes) {\n    clone.childNodes = [];\n    let prevChildClone;\n\n    for (const child of original.childNodes) {\n      // clone child\n      const childClone = cloneNodeDeep(child); // set references\n\n      clone.childNodes.push(childClone);\n      childClone.parentNode = clone;\n\n      if (prevChildClone) {\n        prevChildClone.nextSibling = childClone;\n      }\n\n      prevChildClone = childClone;\n    }\n  }\n\n  return clone;\n}\n\nfunction recursiveRemoveEmptyTextNodes(node) {\n  if (!node.childNodes) return node;\n  const oldChildren = node.childNodes;\n  node.childNodes = [];\n\n  for (const child of oldChildren) {\n    if (XmlNode.isTextNode(child)) {\n      // https://stackoverflow.com/questions/1921688/filtering-whitespace-only-strings-in-javascript#1921694\n      if (child.textContent && child.textContent.match(/\\S/)) {\n        node.childNodes.push(child);\n      }\n\n      continue;\n    }\n\n    const strippedChild = recursiveRemoveEmptyTextNodes(child);\n    node.childNodes.push(strippedChild);\n  }\n\n  return node;\n}\n\nclass XmlParser {\n  /**\r\n   * We always use the DOMParser from 'xmldom', even in the browser since it\r\n   * handles xml namespaces more forgivingly (required mainly by the\r\n   * RawXmlPlugin).\r\n   */\n  parse(str) {\n    const doc = this.domParse(str);\n    return XmlNode.fromDomNode(doc.documentElement);\n  }\n\n  domParse(str) {\n    if (str === null || str === undefined) throw new MissingArgumentError(\"str\");\n    return XmlParser.parser.parseFromString(str, \"text/xml\");\n  }\n\n  serialize(xmlNode) {\n    return XmlParser.xmlHeader + XmlNode.serialize(xmlNode);\n  }\n\n}\n\n_defineProperty(XmlParser, \"xmlHeader\", '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>');\n\n_defineProperty(XmlParser, \"parser\", new DOMParser());\n\nclass MatchState {\n  constructor() {\n    _defineProperty(this, \"delimiterIndex\", 0);\n\n    _defineProperty(this, \"openNodes\", []);\n\n    _defineProperty(this, \"firstMatchIndex\", -1);\n  }\n\n  reset() {\n    this.delimiterIndex = 0;\n    this.openNodes = [];\n    this.firstMatchIndex = -1;\n  }\n\n}\n\nclass DelimiterSearcher {\n  constructor(docxParser) {\n    this.docxParser = docxParser;\n\n    _defineProperty(this, \"maxXmlDepth\", 20);\n\n    _defineProperty(this, \"startDelimiter\", \"{\");\n\n    _defineProperty(this, \"endDelimiter\", \"}\");\n\n    if (!docxParser) throw new MissingArgumentError(\"docxParser\");\n  }\n\n  findDelimiters(node) {\n    //\n    // Performance note: \n    //\n    // The search efficiency is o(m*n) where n is the text size and m is the\n    // delimiter length. We could use a variation of the KMP algorithm here\n    // to reduce it to o(m+n) but since our m is expected to be small\n    // (delimiters defaults to 2 characters and even on custom inputs are\n    // not expected to be much longer) it does not worth the extra\n    // complexity and effort.\n    //\n    const delimiters = [];\n    const match = new MatchState();\n    const depth = new XmlDepthTracker(this.maxXmlDepth);\n    let lookForOpenDelimiter = true;\n\n    while (node) {\n      // reset state on paragraph transition\n      if (this.docxParser.isParagraphNode(node)) {\n        match.reset();\n      } // skip irrelevant nodes\n\n\n      if (!this.shouldSearchNode(node)) {\n        node = this.findNextNode(node, depth);\n        continue;\n      } // search delimiters in text nodes\n\n\n      match.openNodes.push(node);\n      let textIndex = 0;\n\n      while (textIndex < node.textContent.length) {\n        const delimiterPattern = lookForOpenDelimiter ? this.startDelimiter : this.endDelimiter; // char match\n\n        const char = node.textContent[textIndex];\n\n        if (char === delimiterPattern[match.delimiterIndex]) {\n          // first match\n          if (match.firstMatchIndex === -1) {\n            match.firstMatchIndex = textIndex;\n          } // full delimiter match\n\n\n          if (match.delimiterIndex === delimiterPattern.length - 1) {\n            // move all delimiters characters to the same text node\n            if (match.openNodes.length > 1) {\n              const firstNode = first(match.openNodes);\n              const lastNode = last(match.openNodes);\n              this.docxParser.joinTextNodesRange(firstNode, lastNode);\n              textIndex += firstNode.textContent.length - node.textContent.length;\n              node = firstNode;\n            } // store delimiter\n\n\n            const delimiterMark = this.createDelimiterMark(match, lookForOpenDelimiter);\n            delimiters.push(delimiterMark); // update state\n\n            lookForOpenDelimiter = !lookForOpenDelimiter;\n            match.reset();\n\n            if (textIndex < node.textContent.length - 1) {\n              match.openNodes.push(node);\n            }\n          } else {\n            match.delimiterIndex++;\n          }\n        } // no match\n        else {\n          //\n          // go back to first open node\n          //\n          // Required for cases where the text has repeating\n          // characters that are the same as a delimiter prefix.  \n          // For instance:  \n          // Delimiter is '{!' and template text contains the string '{{!'\n          //\n          if (match.firstMatchIndex !== -1) {\n            node = first(match.openNodes);\n            textIndex = match.firstMatchIndex;\n          } // update state\n\n\n          match.reset();\n\n          if (textIndex < node.textContent.length - 1) {\n            match.openNodes.push(node);\n          }\n        }\n\n        textIndex++;\n      }\n\n      node = this.findNextNode(node, depth);\n    }\n\n    return delimiters;\n  }\n\n  shouldSearchNode(node) {\n    if (!XmlNode.isTextNode(node)) return false;\n    if (!node.textContent) return false;\n    if (!node.parentNode) return false;\n    if (!this.docxParser.isTextNode(node.parentNode)) return false;\n    return true;\n  }\n\n  findNextNode(node, depth) {\n    // children\n    if (node.childNodes && node.childNodes.length) {\n      depth.increment();\n      return node.childNodes[0];\n    } // siblings\n\n\n    if (node.nextSibling) return node.nextSibling; // parent sibling\n\n    while (node.parentNode) {\n      if (node.parentNode.nextSibling) {\n        depth.decrement();\n        return node.parentNode.nextSibling;\n      } // go up\n\n\n      depth.decrement();\n      node = node.parentNode;\n    }\n\n    return null;\n  }\n\n  createDelimiterMark(match, isOpenDelimiter) {\n    return {\n      index: match.firstMatchIndex,\n      isOpen: isOpenDelimiter,\n      xmlTextNode: match.openNodes[0]\n    };\n  }\n\n}\n\nclass ScopeData {\n  static defaultResolver(args) {\n    let result;\n    const lastKey = last(args.strPath);\n    const curPath = args.strPath.slice();\n\n    while (result === undefined && curPath.length) {\n      curPath.pop();\n      result = getProp(args.data, curPath.concat(lastKey));\n    }\n\n    return result;\n  }\n\n  constructor(data) {\n    _defineProperty(this, \"scopeDataResolver\", void 0);\n\n    _defineProperty(this, \"allData\", void 0);\n\n    _defineProperty(this, \"path\", []);\n\n    _defineProperty(this, \"strPath\", []);\n\n    this.allData = data;\n  }\n\n  pathPush(pathPart) {\n    this.path.push(pathPart);\n    const strItem = isNumber(pathPart) ? pathPart.toString() : pathPart.name;\n    this.strPath.push(strItem);\n  }\n\n  pathPop() {\n    this.strPath.pop();\n    return this.path.pop();\n  }\n\n  pathString() {\n    return this.strPath.join(\".\");\n  }\n\n  getScopeData() {\n    const args = {\n      path: this.path,\n      strPath: this.strPath,\n      data: this.allData\n    };\n\n    if (this.scopeDataResolver) {\n      return this.scopeDataResolver(args);\n    }\n\n    return ScopeData.defaultResolver(args);\n  }\n\n}\n\nlet TagDisposition;\n\n(function (TagDisposition) {\n  TagDisposition[\"Open\"] = \"Open\";\n  TagDisposition[\"Close\"] = \"Close\";\n  TagDisposition[\"SelfClosed\"] = \"SelfClosed\";\n})(TagDisposition || (TagDisposition = {}));\n\nclass TagParser {\n  constructor(docParser, delimiters) {\n    this.docParser = docParser;\n    this.delimiters = delimiters;\n\n    _defineProperty(this, \"tagRegex\", void 0);\n\n    if (!docParser) throw new MissingArgumentError(\"docParser\");\n    if (!delimiters) throw new MissingArgumentError(\"delimiters\");\n    this.tagRegex = new RegExp(`^${Regex.escape(delimiters.tagStart)}(.*?)${Regex.escape(delimiters.tagEnd)}`, 'm');\n  }\n\n  parse(delimiters) {\n    const tags = [];\n    let openedTag;\n    let openedDelimiter;\n\n    for (let i = 0; i < delimiters.length; i++) {\n      const delimiter = delimiters[i]; // close before open\n\n      if (!openedTag && !delimiter.isOpen) {\n        const closeTagText = delimiter.xmlTextNode.textContent;\n        throw new MissingStartDelimiterError(closeTagText);\n      } // open before close\n\n\n      if (openedTag && delimiter.isOpen) {\n        const openTagText = openedDelimiter.xmlTextNode.textContent;\n        throw new MissingCloseDelimiterError(openTagText);\n      } // valid open\n\n\n      if (!openedTag && delimiter.isOpen) {\n        openedTag = {};\n        openedDelimiter = delimiter;\n      } // valid close\n\n\n      if (openedTag && !delimiter.isOpen) {\n        // normalize the underlying xml structure\n        // (make sure the tag's node only includes the tag's text)\n        this.normalizeTagNodes(openedDelimiter, delimiter, i, delimiters);\n        openedTag.xmlTextNode = openedDelimiter.xmlTextNode; // extract tag info from tag's text\n\n        this.processTag(openedTag);\n        tags.push(openedTag);\n        openedTag = null;\n        openedDelimiter = null;\n      }\n    }\n\n    return tags;\n  }\n  /**\r\n   * Consolidate all tag's text into a single text node.\r\n   *\r\n   * Example:\r\n   *\r\n   * Text node before: \"some text {some tag} some more text\"\r\n   * Text nodes after: [ \"some text \", \"{some tag}\", \" some more text\" ]\r\n   */\n\n\n  normalizeTagNodes(openDelimiter, closeDelimiter, closeDelimiterIndex, allDelimiters) {\n    let startTextNode = openDelimiter.xmlTextNode;\n    let endTextNode = closeDelimiter.xmlTextNode;\n    const sameNode = startTextNode === endTextNode; // trim start\n\n    if (openDelimiter.index > 0) {\n      this.docParser.splitTextNode(startTextNode, openDelimiter.index, true);\n\n      if (sameNode) {\n        closeDelimiter.index -= openDelimiter.index;\n      }\n    } // trim end\n\n\n    if (closeDelimiter.index < endTextNode.textContent.length - 1) {\n      endTextNode = this.docParser.splitTextNode(endTextNode, closeDelimiter.index + this.delimiters.tagEnd.length, true);\n\n      if (sameNode) {\n        startTextNode = endTextNode;\n      }\n    } // join nodes\n\n\n    if (!sameNode) {\n      this.docParser.joinTextNodesRange(startTextNode, endTextNode);\n      endTextNode = startTextNode;\n    } // update offsets of next delimiters\n\n\n    for (let i = closeDelimiterIndex + 1; i < allDelimiters.length; i++) {\n      let updated = false;\n      const curDelimiter = allDelimiters[i];\n\n      if (curDelimiter.xmlTextNode === openDelimiter.xmlTextNode) {\n        curDelimiter.index -= openDelimiter.index;\n        updated = true;\n      }\n\n      if (curDelimiter.xmlTextNode === closeDelimiter.xmlTextNode) {\n        curDelimiter.index -= closeDelimiter.index + this.delimiters.tagEnd.length;\n        updated = true;\n      }\n\n      if (!updated) break;\n    } // update references\n\n\n    openDelimiter.xmlTextNode = startTextNode;\n    closeDelimiter.xmlTextNode = endTextNode;\n  }\n\n  processTag(tag) {\n    tag.rawText = tag.xmlTextNode.textContent;\n    const tagParts = this.tagRegex.exec(tag.rawText);\n    const tagContent = (tagParts[1] || '').trim();\n\n    if (!tagContent || !tagContent.length) {\n      tag.disposition = TagDisposition.SelfClosed;\n      return;\n    }\n\n    if (tagContent.startsWith(this.delimiters.containerTagOpen)) {\n      tag.disposition = TagDisposition.Open;\n      tag.name = tagContent.slice(this.delimiters.containerTagOpen.length).trim();\n    } else if (tagContent.startsWith(this.delimiters.containerTagClose)) {\n      tag.disposition = TagDisposition.Close;\n      tag.name = tagContent.slice(this.delimiters.containerTagClose.length).trim();\n    } else {\n      tag.disposition = TagDisposition.SelfClosed;\n      tag.name = tagContent;\n    }\n  }\n\n}\n\nlet MimeType;\n\n(function (MimeType) {\n  MimeType[\"Png\"] = \"image/png\";\n  MimeType[\"Jpeg\"] = \"image/jpeg\";\n  MimeType[\"Gif\"] = \"image/gif\";\n  MimeType[\"Bmp\"] = \"image/bmp\";\n  MimeType[\"Svg\"] = \"image/svg+xml\";\n})(MimeType || (MimeType = {}));\n\nclass MimeTypeHelper {\n  static getDefaultExtension(mime) {\n    switch (mime) {\n      case MimeType.Png:\n        return 'png';\n\n      case MimeType.Jpeg:\n        return 'jpg';\n\n      case MimeType.Gif:\n        return 'gif';\n\n      case MimeType.Bmp:\n        return 'bmp';\n\n      case MimeType.Svg:\n        return 'svg';\n\n      default:\n        throw new UnsupportedFileTypeError(mime);\n    }\n  }\n\n  static getOfficeRelType(mime) {\n    switch (mime) {\n      case MimeType.Png:\n      case MimeType.Jpeg:\n      case MimeType.Gif:\n      case MimeType.Bmp:\n      case MimeType.Svg:\n        return \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image\";\n\n      default:\n        throw new UnsupportedFileTypeError(mime);\n    }\n  }\n\n}\n\n/* eslint-disable @typescript-eslint/member-ordering */\nclass TemplatePlugin {\n  constructor() {\n    _defineProperty(this, \"contentType\", void 0);\n\n    _defineProperty(this, \"utilities\", void 0);\n  }\n\n  /**\r\n   * Called by the TemplateHandler at runtime.\r\n   */\n  setUtilities(utilities) {\n    this.utilities = utilities;\n  }\n  /**\r\n   * This method is called for each self-closing tag.\r\n   * It should implement the specific document manipulation required by the tag.\r\n   */\n\n\n  simpleTagReplacements(tag, data, context) {// noop\n  }\n  /**\r\n   * This method is called for each container tag. It should implement the\r\n   * specific document manipulation required by the tag.\r\n   *\r\n   * @param tags All tags between the opening tag and closing tag (inclusive,\r\n   * i.e. tags[0] is the opening tag and the last item in the tags array is\r\n   * the closing tag).\r\n   */\n\n\n  containerTagReplacements(tags, data, context) {// noop\n  }\n\n}\n\n/**\r\n * Apparently it is not that important for the ID to be unique...\r\n * Word displays two images correctly even if they both have the same ID.\r\n * Further more, Word will assign each a unique ID upon saving (it assigns\r\n * consecutive integers starting with 1).\r\n *\r\n * Note: The same principal applies to image names.\r\n *\r\n * Tested in Word v1908\r\n */\nlet nextImageId = 1;\nclass ImagePlugin extends TemplatePlugin {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"contentType\", 'image');\n  }\n\n  async simpleTagReplacements(tag, data, context) {\n    const wordTextNode = this.utilities.docxParser.containingTextNode(tag.xmlTextNode);\n    const content = data.getScopeData();\n\n    if (!content || !content.source) {\n      XmlNode.remove(wordTextNode);\n      return;\n    } // add the image file into the archive\n\n\n    const mediaFilePath = await context.docx.mediaFiles.add(content.source, content.format);\n    const relType = MimeTypeHelper.getOfficeRelType(content.format);\n    const relId = await context.currentPart.rels.add(mediaFilePath, relType);\n    await context.docx.contentTypes.ensureContentType(content.format); // create the xml markup\n\n    const imageId = nextImageId++;\n    const imageXml = this.createMarkup(imageId, relId, content.width, content.height);\n    XmlNode.insertAfter(imageXml, wordTextNode);\n    XmlNode.remove(wordTextNode);\n  }\n\n  createMarkup(imageId, relId, width, height) {\n    // http://officeopenxml.com/drwPicInline.php\n    //\n    // Performance note:\n    //\n    // I've tried to improve the markup generation performance by parsing\n    // the string once and caching the result (and of course customizing it\n    // per image) but it made no change whatsoever (in both cases 1000 items\n    // loop takes around 8 seconds on my machine) so I'm sticking with this\n    // approach which I find to be more readable.\n    //\n    const name = `Picture ${imageId}`;\n    const markupText = `\n            <w:drawing>\n                <wp:inline distT=\"0\" distB=\"0\" distL=\"0\" distR=\"0\">\n                    <wp:extent cx=\"${this.pixelsToEmu(width)}\" cy=\"${this.pixelsToEmu(height)}\"/>\n                    <wp:effectExtent l=\"0\" t=\"0\" r=\"0\" b=\"0\"/>\n                    <wp:docPr id=\"${imageId}\" name=\"${name}\"/>\n                    <wp:cNvGraphicFramePr>\n                        <a:graphicFrameLocks xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\" noChangeAspect=\"1\"/>\n                    </wp:cNvGraphicFramePr>\n                    <a:graphic xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\">\n                        <a:graphicData uri=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n                            ${this.pictureMarkup(name, relId, width, height)}\n                        </a:graphicData>\n                    </a:graphic>\n                </wp:inline>\n            </w:drawing>\n        `;\n    const markupXml = this.utilities.xmlParser.parse(markupText);\n    XmlNode.removeEmptyTextNodes(markupXml); // remove whitespace\n\n    return markupXml;\n  }\n\n  pictureMarkup(name, relId, width, height) {\n    // http://officeopenxml.com/drwPic.php\n    // legend:\n    // nvPicPr - non-visual picture properties - id, name, etc.\n    // blipFill - binary large image (or) picture fill - image size, image fill, etc.\n    // spPr - shape properties - frame size, frame fill, etc.\n    return `\n            <pic:pic xmlns:pic=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n                <pic:nvPicPr>\n                    <pic:cNvPr id=\"0\" name=\"${name}\"/>\n                    <pic:cNvPicPr>\n                        <a:picLocks noChangeAspect=\"1\" noChangeArrowheads=\"1\"/>\n                    </pic:cNvPicPr>\n                </pic:nvPicPr>\n                <pic:blipFill>\n                    <a:blip r:embed=\"${relId}\">\n                        <a:extLst>\n                            <a:ext uri=\"{28A0092B-C50C-407E-A947-70E740481C1C}\">\n                                <a14:useLocalDpi xmlns:a14=\"http://schemas.microsoft.com/office/drawing/2010/main\" val=\"0\"/>\n                            </a:ext>\n                        </a:extLst>\n                    </a:blip>\n                    <a:srcRect/>\n                    <a:stretch>\n                        <a:fillRect/>\n                    </a:stretch>\n                </pic:blipFill>\n                <pic:spPr bwMode=\"auto\">\n                    <a:xfrm>\n                        <a:off x=\"0\" y=\"0\"/>\n                        <a:ext cx=\"${this.pixelsToEmu(width)}\" cy=\"${this.pixelsToEmu(height)}\"/>\n                    </a:xfrm>\n                    <a:prstGeom prst=\"rect\">\n                        <a:avLst/>\n                    </a:prstGeom>\n                    <a:noFill/>\n                    <a:ln>\n                        <a:noFill/>\n                    </a:ln>\n                </pic:spPr>\n            </pic:pic>\n        `;\n  }\n\n  pixelsToEmu(pixels) {\n    // https://stackoverflow.com/questions/20194403/openxml-distance-size-units\n    // https://docs.microsoft.com/en-us/windows/win32/vml/msdn-online-vml-units#other-units-of-measurement\n    // https://en.wikipedia.org/wiki/Office_Open_XML_file_formats#DrawingML\n    // http://www.java2s.com/Code/CSharp/2D-Graphics/ConvertpixelstoEMUEMUtopixels.htm\n    return Math.round(pixels * 9525);\n  }\n\n}\n\nlet ContentPartType;\n\n(function (ContentPartType) {\n  ContentPartType[\"MainDocument\"] = \"MainDocument\";\n  ContentPartType[\"DefaultHeader\"] = \"DefaultHeader\";\n  ContentPartType[\"FirstHeader\"] = \"FirstHeader\";\n  ContentPartType[\"EvenPagesHeader\"] = \"EvenPagesHeader\";\n  ContentPartType[\"DefaultFooter\"] = \"DefaultFooter\";\n  ContentPartType[\"FirstFooter\"] = \"FirstFooter\";\n  ContentPartType[\"EvenPagesFooter\"] = \"EvenPagesFooter\";\n})(ContentPartType || (ContentPartType = {}));\n\n/**\r\n * http://officeopenxml.com/anatomyofOOXML.php\r\n */\nclass ContentTypesFile {\n  constructor(zip, xmlParser) {\n    this.zip = zip;\n    this.xmlParser = xmlParser;\n\n    _defineProperty(this, \"addedNew\", false);\n\n    _defineProperty(this, \"root\", void 0);\n\n    _defineProperty(this, \"contentTypes\", void 0);\n  }\n\n  async ensureContentType(mime) {\n    // parse the content types file\n    await this.parseContentTypesFile(); // already exists\n\n    if (this.contentTypes[mime]) return; // add new\n\n    const extension = MimeTypeHelper.getDefaultExtension(mime);\n    const typeNode = XmlNode.createGeneralNode('Default');\n    typeNode.attributes = {\n      \"Extension\": extension,\n      \"ContentType\": mime\n    };\n    this.root.childNodes.push(typeNode); // update state\n\n    this.addedNew = true;\n    this.contentTypes[mime] = true;\n  }\n\n  async count() {\n    await this.parseContentTypesFile();\n    return this.root.childNodes.filter(node => !XmlNode.isTextNode(node)).length;\n  }\n  /**\r\n   * Save the Content Types file back to the zip.\r\n   * Called automatically by the holding `Docx` before exporting.\r\n   */\n\n\n  async save() {\n    // not change - no need to save\n    if (!this.addedNew) return;\n    const xmlContent = this.xmlParser.serialize(this.root);\n    this.zip.setFile(ContentTypesFile.contentTypesFilePath, xmlContent);\n  }\n\n  async parseContentTypesFile() {\n    if (this.root) return; // parse the xml file\n\n    const contentTypesXml = await this.zip.getFile(ContentTypesFile.contentTypesFilePath).getContentText();\n    this.root = this.xmlParser.parse(contentTypesXml); // build the content types lookup\n\n    this.contentTypes = {};\n\n    for (const node of this.root.childNodes) {\n      if (node.nodeName !== 'Default') continue;\n      const genNode = node;\n      const contentTypeAttribute = genNode.attributes['ContentType'];\n      if (!contentTypeAttribute) continue;\n      this.contentTypes[contentTypeAttribute] = true;\n    }\n  }\n\n}\n\n_defineProperty(ContentTypesFile, \"contentTypesFilePath\", '[Content_Types].xml');\n\n/**\r\n * Handles media files of the main document.\r\n */\nclass MediaFiles {\n  constructor(zip) {\n    this.zip = zip;\n\n    _defineProperty(this, \"hashes\", void 0);\n\n    _defineProperty(this, \"files\", new Map());\n\n    _defineProperty(this, \"nextFileId\", 0);\n  }\n  /**\r\n   * Returns the media file path.\r\n   */\n\n\n  async add(mediaFile, mime) {\n    // check if already added\n    if (this.files.has(mediaFile)) return this.files.get(mediaFile); // hash existing media files\n\n    await this.hashMediaFiles(); // hash the new file\n    // Note: Even though hashing the base64 string may seem inefficient\n    // (requires extra step in some cases) in practice it is significantly\n    // faster than hashing a 'binarystring'.\n\n    const base64 = await Binary.toBase64(mediaFile);\n    const hash = sha1(base64); // check if file already exists\n    // note: this can be optimized by keeping both mapping by filename as well as by hash\n\n    let path = Object.keys(this.hashes).find(p => this.hashes[p] === hash);\n    if (path) return path; // generate unique media file name\n\n    const extension = MimeTypeHelper.getDefaultExtension(mime);\n\n    do {\n      this.nextFileId++;\n      path = `${MediaFiles.mediaDir}/media${this.nextFileId}.${extension}`;\n    } while (this.hashes[path]); // add media to zip\n\n\n    await this.zip.setFile(path, mediaFile); // add media to our lookups\n\n    this.hashes[path] = hash;\n    this.files.set(mediaFile, path); // return\n\n    return path;\n  }\n\n  async count() {\n    await this.hashMediaFiles();\n    return Object.keys(this.hashes).length;\n  }\n\n  async hashMediaFiles() {\n    if (this.hashes) return;\n    this.hashes = {};\n\n    for (const path of this.zip.listFiles()) {\n      if (!path.startsWith(MediaFiles.mediaDir)) continue;\n      const filename = Path.getFilename(path);\n      if (!filename) continue;\n      const fileData = await this.zip.getFile(path).getContentBase64();\n      const fileHash = sha1(fileData);\n      this.hashes[filename] = fileHash;\n    }\n  }\n\n}\n\n_defineProperty(MediaFiles, \"mediaDir\", 'word/media');\n\nclass Relationship {\n  static fromXml(xml) {\n    var _xml$attributes, _xml$attributes2, _xml$attributes3, _xml$attributes4;\n\n    return new Relationship({\n      id: (_xml$attributes = xml.attributes) === null || _xml$attributes === void 0 ? void 0 : _xml$attributes['Id'],\n      type: (_xml$attributes2 = xml.attributes) === null || _xml$attributes2 === void 0 ? void 0 : _xml$attributes2['Type'],\n      target: (_xml$attributes3 = xml.attributes) === null || _xml$attributes3 === void 0 ? void 0 : _xml$attributes3['Target'],\n      targetMode: (_xml$attributes4 = xml.attributes) === null || _xml$attributes4 === void 0 ? void 0 : _xml$attributes4['TargetMode']\n    });\n  }\n\n  constructor(initial) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"type\", void 0);\n\n    _defineProperty(this, \"target\", void 0);\n\n    _defineProperty(this, \"targetMode\", void 0);\n\n    Object.assign(this, initial);\n  }\n\n  toXml() {\n    const node = XmlNode.createGeneralNode('Relationship');\n    node.attributes = {}; // set only non-empty attributes\n\n    for (const propKey of Object.keys(this)) {\n      const value = this[propKey];\n\n      if (value && typeof value === 'string') {\n        const attrName = propKey[0].toUpperCase() + propKey.substr(1);\n        node.attributes[attrName] = value;\n      }\n    }\n\n    return node;\n  }\n\n}\n\n/**\r\n * Handles the relationship logic of a single docx \"part\".\r\n * http://officeopenxml.com/anatomyofOOXML.php\r\n */\n\nclass Rels {\n  constructor(partPath, zip, xmlParser) {\n    this.zip = zip;\n    this.xmlParser = xmlParser;\n\n    _defineProperty(this, \"rels\", void 0);\n\n    _defineProperty(this, \"relTargets\", void 0);\n\n    _defineProperty(this, \"nextRelId\", 0);\n\n    _defineProperty(this, \"partDir\", void 0);\n\n    _defineProperty(this, \"relsFilePath\", void 0);\n\n    this.partDir = partPath && Path.getDirectory(partPath);\n    const partFilename = partPath && Path.getFilename(partPath);\n    this.relsFilePath = Path.combine(this.partDir, '_rels', `${partFilename !== null && partFilename !== void 0 ? partFilename : ''}.rels`);\n  }\n  /**\r\n   * Returns the rel ID.\r\n   */\n\n\n  async add(relTarget, relType, relTargetMode) {\n    // if relTarget is an internal file it should be relative to the part dir\n    if (this.partDir && relTarget.startsWith(this.partDir)) {\n      relTarget = relTarget.substr(this.partDir.length + 1);\n    } // parse rels file\n\n\n    await this.parseRelsFile(); // already exists?\n\n    const relTargetKey = this.getRelTargetKey(relType, relTarget);\n    let relId = this.relTargets[relTargetKey];\n    if (relId) return relId; // create rel node\n\n    relId = this.getNextRelId();\n    const rel = new Relationship({\n      id: relId,\n      type: relType,\n      target: relTarget,\n      targetMode: relTargetMode\n    }); // update lookups\n\n    this.rels[relId] = rel;\n    this.relTargets[relTargetKey] = relId; // return\n\n    return relId;\n  }\n\n  async list() {\n    await this.parseRelsFile();\n    return Object.values(this.rels);\n  }\n  /**\r\n   * Save the rels file back to the zip.\r\n   * Called automatically by the holding `Docx` before exporting.\r\n   */\n\n\n  async save() {\n    // not change - no need to save\n    if (!this.rels) return; // create rels xml\n\n    const root = this.createRootNode();\n    root.childNodes = Object.values(this.rels).map(rel => rel.toXml()); // serialize and save\n\n    const xmlContent = this.xmlParser.serialize(root);\n    this.zip.setFile(this.relsFilePath, xmlContent);\n  } //\n  // private methods\n  //\n\n\n  getNextRelId() {\n    let relId;\n\n    do {\n      this.nextRelId++;\n      relId = 'rId' + this.nextRelId;\n    } while (this.rels[relId]);\n\n    return relId;\n  }\n\n  async parseRelsFile() {\n    // already parsed\n    if (this.rels) return; // parse xml\n\n    let root;\n    const relsFile = this.zip.getFile(this.relsFilePath);\n\n    if (relsFile) {\n      const xml = await relsFile.getContentText();\n      root = this.xmlParser.parse(xml);\n    } else {\n      root = this.createRootNode();\n    } // parse relationship nodes\n\n\n    this.rels = {};\n    this.relTargets = {};\n\n    for (const relNode of root.childNodes) {\n      const attributes = relNode.attributes;\n      if (!attributes) continue;\n      const idAttr = attributes['Id'];\n      if (!idAttr) continue; // store rel\n\n      const rel = Relationship.fromXml(relNode);\n      this.rels[idAttr] = rel; // create rel target lookup\n\n      const typeAttr = attributes['Type'];\n      const targetAttr = attributes['Target'];\n\n      if (typeAttr && targetAttr) {\n        const relTargetKey = this.getRelTargetKey(typeAttr, targetAttr);\n        this.relTargets[relTargetKey] = idAttr;\n      }\n    }\n  }\n\n  getRelTargetKey(type, target) {\n    return `${type} - ${target}`;\n  }\n\n  createRootNode() {\n    const root = XmlNode.createGeneralNode('Relationships');\n    root.attributes = {\n      'xmlns': 'http://schemas.openxmlformats.org/package/2006/relationships'\n    };\n    root.childNodes = [];\n    return root;\n  }\n\n}\n\n/**\r\n * Represents an xml file that is part of an OPC package.\r\n *\r\n * See: https://en.wikipedia.org/wiki/Open_Packaging_Conventions\r\n */\n\nclass XmlPart {\n  constructor(path, zip, xmlParser) {\n    this.path = path;\n    this.zip = zip;\n    this.xmlParser = xmlParser;\n\n    _defineProperty(this, \"rels\", void 0);\n\n    _defineProperty(this, \"root\", void 0);\n\n    this.rels = new Rels(this.path, zip, xmlParser);\n  } //\n  // public methods\n  //\n\n  /**\r\n   * Get the xml root node of the part.\r\n   * Changes to the xml will be persisted to the underlying zip file.\r\n   */\n\n\n  async xmlRoot() {\n    if (!this.root) {\n      const xml = await this.zip.getFile(this.path).getContentText();\n      this.root = this.xmlParser.parse(xml);\n    }\n\n    return this.root;\n  }\n  /**\r\n   * Get the text content of the part.\r\n   */\n\n\n  async getText() {\n    const xmlDocument = await this.xmlRoot(); // ugly but good enough...\n\n    const xml = this.xmlParser.serialize(xmlDocument);\n    const domDocument = this.xmlParser.domParse(xml);\n    return domDocument.documentElement.textContent;\n  }\n\n  async saveChanges() {\n    // save xml\n    if (this.root) {\n      const xmlRoot = await this.xmlRoot();\n      const xmlContent = this.xmlParser.serialize(xmlRoot);\n      this.zip.setFile(this.path, xmlContent);\n    } // save rels\n\n\n    await this.rels.save();\n  }\n\n}\n\n/**\r\n * Represents a single docx file.\r\n */\n\nclass Docx {\n  //\n  // static methods\n  //\n  static async open(zip, xmlParser) {\n    const mainDocumentPath = await Docx.getMainDocumentPath(zip, xmlParser);\n    if (!mainDocumentPath) throw new MalformedFileError('docx');\n    return new Docx(mainDocumentPath, zip, xmlParser);\n  }\n\n  static async getMainDocumentPath(zip, xmlParser) {\n    var _relations$find;\n\n    const rootPart = '';\n    const rootRels = new Rels(rootPart, zip, xmlParser);\n    const relations = await rootRels.list();\n    return (_relations$find = relations.find(rel => rel.type == Docx.mainDocumentRelType)) === null || _relations$find === void 0 ? void 0 : _relations$find.target;\n  } //\n  // fields\n  //\n\n\n  /**\r\n   * **Notice:** You should only use this property if there is no other way to\r\n   * do what you need. Use with caution.\r\n   */\n  get rawZipFile() {\n    return this.zip;\n  } //\n  // constructor\n  //\n\n\n  constructor(mainDocumentPath, zip, xmlParser) {\n    this.zip = zip;\n    this.xmlParser = xmlParser;\n\n    _defineProperty(this, \"mainDocument\", void 0);\n\n    _defineProperty(this, \"mediaFiles\", void 0);\n\n    _defineProperty(this, \"contentTypes\", void 0);\n\n    _defineProperty(this, \"_parts\", {});\n\n    this.mainDocument = new XmlPart(mainDocumentPath, zip, xmlParser);\n    this.mediaFiles = new MediaFiles(zip);\n    this.contentTypes = new ContentTypesFile(zip, xmlParser);\n  } //\n  // public methods\n  //\n\n\n  async getContentPart(type) {\n    switch (type) {\n      case ContentPartType.MainDocument:\n        return this.mainDocument;\n\n      default:\n        return await this.getHeaderOrFooter(type);\n    }\n  }\n  /**\r\n   * Returns the xml parts of the main document, headers and footers.\r\n   */\n\n\n  async getContentParts() {\n    const partTypes = [ContentPartType.MainDocument, ContentPartType.DefaultHeader, ContentPartType.FirstHeader, ContentPartType.EvenPagesHeader, ContentPartType.DefaultFooter, ContentPartType.FirstFooter, ContentPartType.EvenPagesFooter];\n    const parts = await Promise.all(partTypes.map(p => this.getContentPart(p)));\n    return parts.filter(p => !!p);\n  }\n\n  async export(outputType) {\n    await this.saveChanges();\n    return await this.zip.export(outputType);\n  } //\n  // private methods\n  //\n\n\n  async getHeaderOrFooter(type) {\n    var _sectionProps$childNo, _attributes;\n\n    const nodeName = this.headerFooterNodeName(type);\n    const nodeTypeAttribute = this.headerFooterType(type); // find the last section properties\n    // see: http://officeopenxml.com/WPsection.php\n\n    const docRoot = await this.mainDocument.xmlRoot();\n    const body = docRoot.childNodes[0];\n    const sectionProps = last(body.childNodes.filter(node => node.nodeType === XmlNodeType.General));\n    if (sectionProps.nodeName != 'w:sectPr') return null; // find the header or footer reference\n\n    const reference = (_sectionProps$childNo = sectionProps.childNodes) === null || _sectionProps$childNo === void 0 ? void 0 : _sectionProps$childNo.find(node => {\n      var _node$attributes;\n\n      return node.nodeType === XmlNodeType.General && node.nodeName === nodeName && ((_node$attributes = node.attributes) === null || _node$attributes === void 0 ? void 0 : _node$attributes['w:type']) === nodeTypeAttribute;\n    });\n    const relId = reference === null || reference === void 0 ? void 0 : (_attributes = reference.attributes) === null || _attributes === void 0 ? void 0 : _attributes['r:id'];\n    if (!relId) return null; // return the XmlPart\n\n    const rels = await this.mainDocument.rels.list();\n    const relTarget = rels.find(r => r.id === relId).target;\n\n    if (!this._parts[relTarget]) {\n      const part = new XmlPart(\"word/\" + relTarget, this.zip, this.xmlParser);\n      this._parts[relTarget] = part;\n    }\n\n    return this._parts[relTarget];\n  }\n\n  headerFooterNodeName(contentPartType) {\n    switch (contentPartType) {\n      case ContentPartType.DefaultHeader:\n      case ContentPartType.FirstHeader:\n      case ContentPartType.EvenPagesHeader:\n        return 'w:headerReference';\n\n      case ContentPartType.DefaultFooter:\n      case ContentPartType.FirstFooter:\n      case ContentPartType.EvenPagesFooter:\n        return 'w:footerReference';\n\n      default:\n        throw new Error(`Invalid content part type: '${contentPartType}'.`);\n    }\n  }\n\n  headerFooterType(contentPartType) {\n    // https://docs.microsoft.com/en-us/dotnet/api/documentformat.openxml.wordprocessing.headerfootervalues?view=openxml-2.8.1\n    switch (contentPartType) {\n      case ContentPartType.DefaultHeader:\n      case ContentPartType.DefaultFooter:\n        return 'default';\n\n      case ContentPartType.FirstHeader:\n      case ContentPartType.FirstFooter:\n        return 'first';\n\n      case ContentPartType.EvenPagesHeader:\n      case ContentPartType.EvenPagesFooter:\n        return 'even';\n\n      default:\n        throw new Error(`Invalid content part type: '${contentPartType}'.`);\n    }\n  }\n\n  async saveChanges() {\n    const parts = [this.mainDocument, ...Object.values(this._parts)];\n\n    for (const part of parts) {\n      await part.saveChanges();\n    }\n\n    await this.contentTypes.save();\n  }\n\n}\n\n_defineProperty(Docx, \"mainDocumentRelType\", 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument');\n\nclass DocxParser {\n  /*\r\n   * Word markup intro:\r\n   *\r\n   * In Word text nodes are contained in \"run\" nodes (which specifies text\r\n   * properties such as font and color). The \"run\" nodes in turn are\r\n   * contained in paragraph nodes which is the core unit of content.\r\n   *\r\n   * Example:\r\n   *\r\n   * <w:p>    <-- paragraph\r\n   *   <w:r>      <-- run\r\n   *     <w:rPr>      <-- run properties\r\n   *       <w:b/>     <-- bold\r\n   *     </w:rPr>\r\n   *     <w:t>This is text.</w:t>     <-- actual text\r\n   *   </w:r>\r\n   * </w:p>\r\n   *\r\n   * see: http://officeopenxml.com/WPcontentOverview.php\r\n   */\n  //\n  // constructor\n  //\n  constructor(xmlParser) {\n    this.xmlParser = xmlParser;\n  } //\n  // parse document\n  //\n\n\n  load(zip) {\n    return Docx.open(zip, this.xmlParser);\n  } //\n  // content manipulation\n  //\n\n  /**\r\n   * Split the text node into two text nodes, each with it's own wrapping <w:t> node.\r\n   * Returns the newly created text node.\r\n   *\r\n   * @param textNode\r\n   * @param splitIndex\r\n   * @param addBefore Should the new node be added before or after the original node.\r\n   */\n\n\n  splitTextNode(textNode, splitIndex, addBefore) {\n    let firstXmlTextNode;\n    let secondXmlTextNode; // split nodes\n\n    const wordTextNode = this.containingTextNode(textNode);\n    const newWordTextNode = XmlNode.cloneNode(wordTextNode, true); // set space preserve to prevent display differences after splitting\n    // (otherwise if there was a space in the middle of the text node and it\n    // is now at the beginning or end of the text node it will be ignored)\n\n    this.setSpacePreserveAttribute(wordTextNode);\n    this.setSpacePreserveAttribute(newWordTextNode);\n\n    if (addBefore) {\n      // insert new node before existing one\n      XmlNode.insertBefore(newWordTextNode, wordTextNode);\n      firstXmlTextNode = XmlNode.lastTextChild(newWordTextNode);\n      secondXmlTextNode = textNode;\n    } else {\n      // insert new node after existing one\n      const curIndex = wordTextNode.parentNode.childNodes.indexOf(wordTextNode);\n      XmlNode.insertChild(wordTextNode.parentNode, newWordTextNode, curIndex + 1);\n      firstXmlTextNode = textNode;\n      secondXmlTextNode = XmlNode.lastTextChild(newWordTextNode);\n    } // edit text\n\n\n    const firstText = firstXmlTextNode.textContent;\n    const secondText = secondXmlTextNode.textContent;\n    firstXmlTextNode.textContent = firstText.substring(0, splitIndex);\n    secondXmlTextNode.textContent = secondText.substring(splitIndex);\n    return addBefore ? firstXmlTextNode : secondXmlTextNode;\n  }\n  /**\r\n   * Split the paragraph around the specified text node.\r\n   *\r\n   * @returns Two paragraphs - `left` and `right`. If the `removeTextNode` argument is\r\n   * `false` then the original text node is the first text node of `right`.\r\n   */\n\n\n  splitParagraphByTextNode(paragraph, textNode, removeTextNode) {\n    // input validation\n    const containingParagraph = this.containingParagraphNode(textNode);\n    if (containingParagraph != paragraph) throw new Error(`Node '${\"textNode\"}' is not a descendant of '${\"paragraph\"}'.`);\n    const runNode = this.containingRunNode(textNode);\n    const wordTextNode = this.containingTextNode(textNode); // create run clone\n\n    const leftRun = XmlNode.cloneNode(runNode, false);\n    const rightRun = runNode;\n    XmlNode.insertBefore(leftRun, rightRun); // copy props from original run node (preserve style)\n\n    const runProps = rightRun.childNodes.find(node => node.nodeName === DocxParser.RUN_PROPERTIES_NODE);\n\n    if (runProps) {\n      const leftRunProps = XmlNode.cloneNode(runProps, true);\n      XmlNode.appendChild(leftRun, leftRunProps);\n    } // move nodes from 'right' to 'left'\n\n\n    const firstRunChildIndex = runProps ? 1 : 0;\n    let curChild = rightRun.childNodes[firstRunChildIndex];\n\n    while (curChild != wordTextNode) {\n      XmlNode.remove(curChild);\n      XmlNode.appendChild(leftRun, curChild);\n      curChild = rightRun.childNodes[firstRunChildIndex];\n    } // remove text node\n\n\n    if (removeTextNode) {\n      XmlNode.removeChild(rightRun, firstRunChildIndex);\n    } // create paragraph clone\n\n\n    const leftPara = XmlNode.cloneNode(containingParagraph, false);\n    const rightPara = containingParagraph;\n    XmlNode.insertBefore(leftPara, rightPara); // copy props from original paragraph (preserve style)\n\n    const paragraphProps = rightPara.childNodes.find(node => node.nodeName === DocxParser.PARAGRAPH_PROPERTIES_NODE);\n\n    if (paragraphProps) {\n      const leftParagraphProps = XmlNode.cloneNode(paragraphProps, true);\n      XmlNode.appendChild(leftPara, leftParagraphProps);\n    } // move nodes from 'right' to 'left'\n\n\n    const firstParaChildIndex = paragraphProps ? 1 : 0;\n    curChild = rightPara.childNodes[firstParaChildIndex];\n\n    while (curChild != rightRun) {\n      XmlNode.remove(curChild);\n      XmlNode.appendChild(leftPara, curChild);\n      curChild = rightPara.childNodes[firstParaChildIndex];\n    } // clean paragraphs - remove empty runs\n\n\n    if (this.isEmptyRun(leftRun)) XmlNode.remove(leftRun);\n    if (this.isEmptyRun(rightRun)) XmlNode.remove(rightRun);\n    return [leftPara, rightPara];\n  }\n  /**\r\n   * Move all text between the 'from' and 'to' nodes to the 'from' node.\r\n   */\n\n\n  joinTextNodesRange(from, to) {\n    // find run nodes\n    const firstRunNode = this.containingRunNode(from);\n    const secondRunNode = this.containingRunNode(to);\n    const paragraphNode = firstRunNode.parentNode;\n    if (secondRunNode.parentNode !== paragraphNode) throw new Error('Can not join text nodes from separate paragraphs.'); // find \"word text nodes\"\n\n    const firstWordTextNode = this.containingTextNode(from);\n    const secondWordTextNode = this.containingTextNode(to);\n    const totalText = []; // iterate runs\n\n    let curRunNode = firstRunNode;\n\n    while (curRunNode) {\n      // iterate text nodes\n      let curWordTextNode;\n\n      if (curRunNode === firstRunNode) {\n        curWordTextNode = firstWordTextNode;\n      } else {\n        curWordTextNode = this.firstTextNodeChild(curRunNode);\n      }\n\n      while (curWordTextNode) {\n        if (curWordTextNode.nodeName !== DocxParser.TEXT_NODE) continue; // move text to first node\n\n        const curXmlTextNode = XmlNode.lastTextChild(curWordTextNode);\n        totalText.push(curXmlTextNode.textContent); // next text node\n\n        const textToRemove = curWordTextNode;\n\n        if (curWordTextNode === secondWordTextNode) {\n          curWordTextNode = null;\n        } else {\n          curWordTextNode = curWordTextNode.nextSibling;\n        } // remove current text node\n\n\n        if (textToRemove !== firstWordTextNode) {\n          XmlNode.remove(textToRemove);\n        }\n      } // next run\n\n\n      const runToRemove = curRunNode;\n\n      if (curRunNode === secondRunNode) {\n        curRunNode = null;\n      } else {\n        curRunNode = curRunNode.nextSibling;\n      } // remove current run\n\n\n      if (!runToRemove.childNodes || !runToRemove.childNodes.length) {\n        XmlNode.remove(runToRemove);\n      }\n    } // set the text content\n\n\n    const firstXmlTextNode = XmlNode.lastTextChild(firstWordTextNode);\n    firstXmlTextNode.textContent = totalText.join('');\n  }\n  /**\r\n   * Take all runs from 'second' and move them to 'first'.\r\n   */\n\n\n  joinParagraphs(first, second) {\n    if (first === second) return;\n    let childIndex = 0;\n\n    while (second.childNodes && childIndex < second.childNodes.length) {\n      const curChild = second.childNodes[childIndex];\n\n      if (curChild.nodeName === DocxParser.RUN_NODE) {\n        XmlNode.removeChild(second, childIndex);\n        XmlNode.appendChild(first, curChild);\n      } else {\n        childIndex++;\n      }\n    }\n  }\n\n  setSpacePreserveAttribute(node) {\n    if (!node.attributes) {\n      node.attributes = {};\n    }\n\n    if (!node.attributes['xml:space']) {\n      node.attributes['xml:space'] = 'preserve';\n    }\n  } //\n  // node queries\n  //\n\n\n  isTextNode(node) {\n    return node.nodeName === DocxParser.TEXT_NODE;\n  }\n\n  isRunNode(node) {\n    return node.nodeName === DocxParser.RUN_NODE;\n  }\n\n  isRunPropertiesNode(node) {\n    return node.nodeName === DocxParser.RUN_PROPERTIES_NODE;\n  }\n\n  isTableCellNode(node) {\n    return node.nodeName === DocxParser.TABLE_CELL_NODE;\n  }\n\n  isParagraphNode(node) {\n    return node.nodeName === DocxParser.PARAGRAPH_NODE;\n  }\n\n  isListParagraph(paragraphNode) {\n    const paragraphProperties = this.paragraphPropertiesNode(paragraphNode);\n    const listNumberProperties = XmlNode.findChildByName(paragraphProperties, DocxParser.NUMBER_PROPERTIES_NODE);\n    return !!listNumberProperties;\n  }\n\n  paragraphPropertiesNode(paragraphNode) {\n    if (!this.isParagraphNode(paragraphNode)) throw new Error(`Expected paragraph node but received a '${paragraphNode.nodeName}' node.`);\n    return XmlNode.findChildByName(paragraphNode, DocxParser.PARAGRAPH_PROPERTIES_NODE);\n  }\n  /**\r\n   * Search for the first direct child **Word** text node (i.e. a <w:t> node).\r\n   */\n\n\n  firstTextNodeChild(node) {\n    if (!node) return null;\n    if (node.nodeName !== DocxParser.RUN_NODE) return null;\n    if (!node.childNodes) return null;\n\n    for (const child of node.childNodes) {\n      if (child.nodeName === DocxParser.TEXT_NODE) return child;\n    }\n\n    return null;\n  }\n  /**\r\n   * Search **upwards** for the first **Word** text node (i.e. a <w:t> node).\r\n   */\n\n\n  containingTextNode(node) {\n    if (!node) return null;\n    if (!XmlNode.isTextNode(node)) throw new Error(`'Invalid argument ${\"node\"}. Expected a XmlTextNode.`);\n    return XmlNode.findParentByName(node, DocxParser.TEXT_NODE);\n  }\n  /**\r\n   * Search **upwards** for the first run node.\r\n   */\n\n\n  containingRunNode(node) {\n    return XmlNode.findParentByName(node, DocxParser.RUN_NODE);\n  }\n  /**\r\n   * Search **upwards** for the first paragraph node.\r\n   */\n\n\n  containingParagraphNode(node) {\n    return XmlNode.findParentByName(node, DocxParser.PARAGRAPH_NODE);\n  }\n  /**\r\n   * Search **upwards** for the first \"table row\" node.\r\n   */\n\n\n  containingTableRowNode(node) {\n    return XmlNode.findParentByName(node, DocxParser.TABLE_ROW_NODE);\n  } //\n  // advanced node queries\n  //\n\n\n  isEmptyTextNode(node) {\n    var _node$childNodes;\n\n    if (!this.isTextNode(node)) throw new Error(`Text node expected but '${node.nodeName}' received.`);\n    if (!((_node$childNodes = node.childNodes) !== null && _node$childNodes !== void 0 && _node$childNodes.length)) return true;\n    const xmlTextNode = node.childNodes[0];\n    if (!XmlNode.isTextNode(xmlTextNode)) throw new Error(\"Invalid XML structure. 'w:t' node should contain a single text node only.\");\n    if (!xmlTextNode.textContent) return true;\n    return false;\n  }\n\n  isEmptyRun(node) {\n    if (!this.isRunNode(node)) throw new Error(`Run node expected but '${node.nodeName}' received.`);\n\n    for (const child of (_node$childNodes2 = node.childNodes) !== null && _node$childNodes2 !== void 0 ? _node$childNodes2 : []) {\n      var _node$childNodes2;\n\n      if (this.isRunPropertiesNode(child)) continue;\n      if (this.isTextNode(child) && this.isEmptyTextNode(child)) continue;\n      return false;\n    }\n\n    return true;\n  }\n\n}\n\n_defineProperty(DocxParser, \"PARAGRAPH_NODE\", 'w:p');\n\n_defineProperty(DocxParser, \"PARAGRAPH_PROPERTIES_NODE\", 'w:pPr');\n\n_defineProperty(DocxParser, \"RUN_NODE\", 'w:r');\n\n_defineProperty(DocxParser, \"RUN_PROPERTIES_NODE\", 'w:rPr');\n\n_defineProperty(DocxParser, \"TEXT_NODE\", 'w:t');\n\n_defineProperty(DocxParser, \"TABLE_ROW_NODE\", 'w:tr');\n\n_defineProperty(DocxParser, \"TABLE_CELL_NODE\", 'w:tc');\n\n_defineProperty(DocxParser, \"NUMBER_PROPERTIES_NODE\", 'w:numPr');\n\nclass LinkPlugin extends TemplatePlugin {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"contentType\", 'link');\n  }\n\n  async simpleTagReplacements(tag, data, context) {\n    const wordTextNode = this.utilities.docxParser.containingTextNode(tag.xmlTextNode);\n    const content = data.getScopeData();\n\n    if (!content || !content.target) {\n      XmlNode.remove(wordTextNode);\n      return;\n    } // add rel\n\n\n    const relId = await context.currentPart.rels.add(content.target, LinkPlugin.linkRelType, 'External'); // generate markup\n\n    const wordRunNode = this.utilities.docxParser.containingRunNode(wordTextNode);\n    const linkMarkup = this.generateMarkup(content, relId, wordRunNode); // add to document\n\n    this.insertHyperlinkNode(linkMarkup, wordRunNode, wordTextNode);\n  }\n\n  generateMarkup(content, relId, wordRunNode) {\n    // http://officeopenxml.com/WPhyperlink.php\n    const markupText = `\n            <w:hyperlink r:id=\"${relId}\" w:history=\"1\">\n                <w:r>\n                    <w:t>${content.text || content.target}</w:t>\n                </w:r>\n            </w:hyperlink>\n        `;\n    const markupXml = this.utilities.xmlParser.parse(markupText);\n    XmlNode.removeEmptyTextNodes(markupXml); // remove whitespace\n    // copy props from original run node (preserve style)\n\n    const runProps = wordRunNode.childNodes.find(node => node.nodeName === DocxParser.RUN_PROPERTIES_NODE);\n\n    if (runProps) {\n      const linkRunProps = XmlNode.cloneNode(runProps, true);\n      markupXml.childNodes[0].childNodes.unshift(linkRunProps);\n    }\n\n    return markupXml;\n  }\n\n  insertHyperlinkNode(linkMarkup, tagRunNode, tagTextNode) {\n    // Links are inserted at the 'run' level.\n    // Therefor we isolate the link tag to it's own run (it is already\n    // isolated to it's own text node), insert the link markup and remove\n    // the run.\n    let textNodesInRun = tagRunNode.childNodes.filter(node => node.nodeName === DocxParser.TEXT_NODE);\n\n    if (textNodesInRun.length > 1) {\n      const [runBeforeTag] = XmlNode.splitByChild(tagRunNode, tagTextNode, true);\n      textNodesInRun = runBeforeTag.childNodes.filter(node => node.nodeName === DocxParser.TEXT_NODE);\n      XmlNode.insertAfter(linkMarkup, runBeforeTag);\n\n      if (textNodesInRun.length === 0) {\n        XmlNode.remove(runBeforeTag);\n      }\n    } // already isolated\n    else {\n      XmlNode.insertAfter(linkMarkup, tagRunNode);\n      XmlNode.remove(tagRunNode);\n    }\n  }\n\n}\n\n_defineProperty(LinkPlugin, \"linkRelType\", 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink');\n\nclass LoopListStrategy {\n  constructor() {\n    _defineProperty(this, \"utilities\", void 0);\n  }\n\n  setUtilities(utilities) {\n    this.utilities = utilities;\n  }\n\n  isApplicable(openTag, closeTag) {\n    const containingParagraph = this.utilities.docxParser.containingParagraphNode(openTag.xmlTextNode);\n    return this.utilities.docxParser.isListParagraph(containingParagraph);\n  }\n\n  splitBefore(openTag, closeTag) {\n    const firstParagraph = this.utilities.docxParser.containingParagraphNode(openTag.xmlTextNode);\n    const lastParagraph = this.utilities.docxParser.containingParagraphNode(closeTag.xmlTextNode);\n    const paragraphsToRepeat = XmlNode.siblingsInRange(firstParagraph, lastParagraph); // remove the loop tags\n\n    XmlNode.remove(openTag.xmlTextNode);\n    XmlNode.remove(closeTag.xmlTextNode);\n    return {\n      firstNode: firstParagraph,\n      nodesToRepeat: paragraphsToRepeat,\n      lastNode: lastParagraph\n    };\n  }\n\n  mergeBack(paragraphGroups, firstParagraph, lastParagraphs) {\n    for (const curParagraphsGroup of paragraphGroups) {\n      for (const paragraph of curParagraphsGroup) {\n        XmlNode.insertBefore(paragraph, lastParagraphs);\n      }\n    } // remove the old paragraphs\n\n\n    XmlNode.remove(firstParagraph);\n\n    if (firstParagraph !== lastParagraphs) {\n      XmlNode.remove(lastParagraphs);\n    }\n  }\n\n}\n\nclass LoopParagraphStrategy {\n  constructor() {\n    _defineProperty(this, \"utilities\", void 0);\n  }\n\n  setUtilities(utilities) {\n    this.utilities = utilities;\n  }\n\n  isApplicable(openTag, closeTag) {\n    return true;\n  }\n\n  splitBefore(openTag, closeTag) {\n    // gather some info\n    let firstParagraph = this.utilities.docxParser.containingParagraphNode(openTag.xmlTextNode);\n    let lastParagraph = this.utilities.docxParser.containingParagraphNode(closeTag.xmlTextNode);\n    const areSame = firstParagraph === lastParagraph; // split first paragraph\n\n    let splitResult = this.utilities.docxParser.splitParagraphByTextNode(firstParagraph, openTag.xmlTextNode, true);\n    firstParagraph = splitResult[0];\n    let afterFirstParagraph = splitResult[1];\n    if (areSame) lastParagraph = afterFirstParagraph; // split last paragraph\n\n    splitResult = this.utilities.docxParser.splitParagraphByTextNode(lastParagraph, closeTag.xmlTextNode, true);\n    const beforeLastParagraph = splitResult[0];\n    lastParagraph = splitResult[1];\n    if (areSame) afterFirstParagraph = beforeLastParagraph; // disconnect splitted paragraph from their parents\n\n    XmlNode.remove(afterFirstParagraph);\n    if (!areSame) XmlNode.remove(beforeLastParagraph); // extract all paragraphs in between\n\n    let middleParagraphs;\n\n    if (areSame) {\n      middleParagraphs = [afterFirstParagraph];\n    } else {\n      const inBetween = XmlNode.removeSiblings(firstParagraph, lastParagraph);\n      middleParagraphs = [afterFirstParagraph].concat(inBetween).concat(beforeLastParagraph);\n    }\n\n    return {\n      firstNode: firstParagraph,\n      nodesToRepeat: middleParagraphs,\n      lastNode: lastParagraph\n    };\n  }\n\n  mergeBack(middleParagraphs, firstParagraph, lastParagraph) {\n    let mergeTo = firstParagraph;\n\n    for (const curParagraphsGroup of middleParagraphs) {\n      // merge first paragraphs\n      this.utilities.docxParser.joinParagraphs(mergeTo, curParagraphsGroup[0]); // add middle and last paragraphs to the original document\n\n      for (let i = 1; i < curParagraphsGroup.length; i++) {\n        XmlNode.insertBefore(curParagraphsGroup[i], lastParagraph);\n        mergeTo = curParagraphsGroup[i];\n      }\n    } // merge last paragraph\n\n\n    this.utilities.docxParser.joinParagraphs(mergeTo, lastParagraph); // remove the old last paragraph (was merged into the new one)\n\n    XmlNode.remove(lastParagraph);\n  }\n\n}\n\nclass LoopTableStrategy {\n  constructor() {\n    _defineProperty(this, \"utilities\", void 0);\n  }\n\n  setUtilities(utilities) {\n    this.utilities = utilities;\n  }\n\n  isApplicable(openTag, closeTag) {\n    const containingParagraph = this.utilities.docxParser.containingParagraphNode(openTag.xmlTextNode);\n    if (!containingParagraph.parentNode) return false;\n    return this.utilities.docxParser.isTableCellNode(containingParagraph.parentNode);\n  }\n\n  splitBefore(openTag, closeTag) {\n    const firstRow = this.utilities.docxParser.containingTableRowNode(openTag.xmlTextNode);\n    const lastRow = this.utilities.docxParser.containingTableRowNode(closeTag.xmlTextNode);\n    const rowsToRepeat = XmlNode.siblingsInRange(firstRow, lastRow); // remove the loop tags\n\n    XmlNode.remove(openTag.xmlTextNode);\n    XmlNode.remove(closeTag.xmlTextNode);\n    return {\n      firstNode: firstRow,\n      nodesToRepeat: rowsToRepeat,\n      lastNode: lastRow\n    };\n  }\n\n  mergeBack(rowGroups, firstRow, lastRow) {\n    for (const curRowsGroup of rowGroups) {\n      for (const row of curRowsGroup) {\n        XmlNode.insertBefore(row, lastRow);\n      }\n    } // remove the old rows\n\n\n    XmlNode.remove(firstRow);\n\n    if (firstRow !== lastRow) {\n      XmlNode.remove(lastRow);\n    }\n  }\n\n}\n\nconst LOOP_CONTENT_TYPE = 'loop';\nclass LoopPlugin extends TemplatePlugin {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"contentType\", LOOP_CONTENT_TYPE);\n\n    _defineProperty(this, \"loopStrategies\", [new LoopTableStrategy(), new LoopListStrategy(), new LoopParagraphStrategy() // the default strategy\n    ]);\n  }\n\n  setUtilities(utilities) {\n    this.utilities = utilities;\n    this.loopStrategies.forEach(strategy => strategy.setUtilities(utilities));\n  }\n\n  async containerTagReplacements(tags, data, context) {\n    let value = data.getScopeData(); // Non array value - treat as a boolean condition.\n\n    const isCondition = !Array.isArray(value);\n\n    if (isCondition) {\n      if (!!value) {\n        value = [{}];\n      } else {\n        value = [];\n      }\n    } // vars\n\n\n    const openTag = tags[0];\n    const closeTag = last(tags); // select the suitable strategy\n\n    const loopStrategy = this.loopStrategies.find(strategy => strategy.isApplicable(openTag, closeTag));\n    if (!loopStrategy) throw new Error(`No loop strategy found for tag '${openTag.rawText}'.`); // prepare to loop\n\n    const {\n      firstNode,\n      nodesToRepeat,\n      lastNode\n    } = loopStrategy.splitBefore(openTag, closeTag); // repeat (loop) the content\n\n    const repeatedNodes = this.repeat(nodesToRepeat, value.length); // recursive compilation\n    // (this step can be optimized in the future if we'll keep track of the\n    // path to each token and use that to create new tokens instead of\n    // search through the text again)\n\n    const compiledNodes = await this.compile(isCondition, repeatedNodes, data, context); // merge back to the document\n\n    loopStrategy.mergeBack(compiledNodes, firstNode, lastNode);\n  }\n\n  repeat(nodes, times) {\n    if (!nodes.length || !times) return [];\n    const allResults = [];\n\n    for (let i = 0; i < times; i++) {\n      const curResult = nodes.map(node => XmlNode.cloneNode(node, true));\n      allResults.push(curResult);\n    }\n\n    return allResults;\n  }\n\n  async compile(isCondition, nodeGroups, data, context) {\n    const compiledNodeGroups = []; // compile each node group with it's relevant data\n\n    for (let i = 0; i < nodeGroups.length; i++) {\n      // create dummy root node\n      const curNodes = nodeGroups[i];\n      const dummyRootNode = XmlNode.createGeneralNode('dummyRootNode');\n      curNodes.forEach(node => XmlNode.appendChild(dummyRootNode, node)); // compile the new root\n\n      const conditionTag = this.updatePathBefore(isCondition, data, i);\n      await this.utilities.compiler.compile(dummyRootNode, data, context);\n      this.updatePathAfter(isCondition, data, conditionTag); // disconnect from dummy root\n\n      const curResult = [];\n\n      while (dummyRootNode.childNodes && dummyRootNode.childNodes.length) {\n        const child = XmlNode.removeChild(dummyRootNode, 0);\n        curResult.push(child);\n      }\n\n      compiledNodeGroups.push(curResult);\n    }\n\n    return compiledNodeGroups;\n  }\n\n  updatePathBefore(isCondition, data, groupIndex) {\n    // if it's a condition - don't go deeper in the path\n    // (so we need to extract the already pushed condition tag)\n    if (isCondition) {\n      if (groupIndex > 0) {\n        // should never happen - conditions should have at most one (synthetic) child...\n        throw new Error(`Internal error: Unexpected group index ${groupIndex} for boolean condition at path \"${data.pathString()}\".`);\n      }\n\n      return data.pathPop();\n    } // else, it's an array - push the current index\n\n\n    data.pathPush(groupIndex);\n    return null;\n  }\n\n  updatePathAfter(isCondition, data, conditionTag) {\n    // reverse the \"before\" path operation\n    if (isCondition) {\n      data.pathPush(conditionTag);\n    } else {\n      data.pathPop();\n    }\n  }\n\n}\n\nclass RawXmlPlugin extends TemplatePlugin {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"contentType\", 'rawXml');\n  }\n\n  simpleTagReplacements(tag, data) {\n    const value = data.getScopeData();\n    const replaceNode = value !== null && value !== void 0 && value.replaceParagraph ? this.utilities.docxParser.containingParagraphNode(tag.xmlTextNode) : this.utilities.docxParser.containingTextNode(tag.xmlTextNode);\n\n    if (typeof (value === null || value === void 0 ? void 0 : value.xml) === 'string') {\n      const newNode = this.utilities.xmlParser.parse(value.xml);\n      XmlNode.insertBefore(newNode, replaceNode);\n    }\n\n    XmlNode.remove(replaceNode);\n  }\n\n}\n\nconst TEXT_CONTENT_TYPE = 'text';\nclass TextPlugin extends TemplatePlugin {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"contentType\", TEXT_CONTENT_TYPE);\n  }\n\n  /**\r\n   * Replace the node text content with the specified value.\r\n   */\n  simpleTagReplacements(tag, data) {\n    const value = data.getScopeData();\n    const lines = stringValue(value).split('\\n');\n\n    if (lines.length < 2) {\n      this.replaceSingleLine(tag.xmlTextNode, lines.length ? lines[0] : '');\n    } else {\n      this.replaceMultiLine(tag.xmlTextNode, lines);\n    }\n  }\n\n  replaceSingleLine(textNode, text) {\n    // set text\n    textNode.textContent = text; // make sure leading and trailing whitespace are preserved\n\n    const wordTextNode = this.utilities.docxParser.containingTextNode(textNode);\n    this.utilities.docxParser.setSpacePreserveAttribute(wordTextNode);\n  }\n\n  replaceMultiLine(textNode, lines) {\n    const runNode = this.utilities.docxParser.containingRunNode(textNode); // first line\n\n    textNode.textContent = lines[0]; // other lines\n\n    for (let i = 1; i < lines.length; i++) {\n      // add line break\n      const lineBreak = this.getLineBreak();\n      XmlNode.appendChild(runNode, lineBreak); // add text\n\n      const lineNode = this.createWordTextNode(lines[i]);\n      XmlNode.appendChild(runNode, lineNode);\n    }\n  }\n\n  getLineBreak() {\n    return XmlNode.createGeneralNode('w:br');\n  }\n\n  createWordTextNode(text) {\n    const wordTextNode = XmlNode.createGeneralNode(DocxParser.TEXT_NODE);\n    wordTextNode.attributes = {};\n    this.utilities.docxParser.setSpacePreserveAttribute(wordTextNode);\n    wordTextNode.childNodes = [XmlNode.createTextNode(text)];\n    return wordTextNode;\n  }\n\n}\n\nfunction createDefaultPlugins() {\n  return [new LoopPlugin(), new RawXmlPlugin(), new ImagePlugin(), new LinkPlugin(), new TextPlugin()];\n}\n\nconst PluginContent = {\n  isPluginContent(content) {\n    return !!content && typeof content._type === 'string';\n  }\n\n};\n\n/**\r\n * The TemplateCompiler works roughly the same way as a source code compiler.\r\n * It's main steps are:\r\n *\r\n * 1. find delimiters (lexical analysis) :: (Document) => DelimiterMark[]\r\n * 2. extract tags (syntax analysis) :: (DelimiterMark[]) => Tag[]\r\n * 3. perform document replace (code generation) :: (Tag[], data) => Document*\r\n *\r\n * see: https://en.wikipedia.org/wiki/Compiler\r\n */\nclass TemplateCompiler {\n  constructor(delimiterSearcher, tagParser, plugins, options) {\n    this.delimiterSearcher = delimiterSearcher;\n    this.tagParser = tagParser;\n    this.options = options;\n\n    _defineProperty(this, \"pluginsLookup\", void 0);\n\n    this.pluginsLookup = toDictionary(plugins, p => p.contentType);\n  }\n  /**\r\n   * Compiles the template and performs the required replacements using the\r\n   * specified data.\r\n   */\n\n\n  async compile(node, data, context) {\n    const tags = this.parseTags(node);\n    await this.doTagReplacements(tags, data, context);\n  }\n\n  parseTags(node) {\n    const delimiters = this.delimiterSearcher.findDelimiters(node);\n    const tags = this.tagParser.parse(delimiters);\n    return tags;\n  } //\n  // private methods\n  //\n\n\n  async doTagReplacements(tags, data, context) {\n    for (let tagIndex = 0; tagIndex < tags.length; tagIndex++) {\n      const tag = tags[tagIndex];\n      data.pathPush(tag);\n      const contentType = this.detectContentType(tag, data);\n      const plugin = this.pluginsLookup[contentType];\n\n      if (!plugin) {\n        throw new UnknownContentTypeError(contentType, tag.rawText, data.pathString());\n      }\n\n      if (tag.disposition === TagDisposition.SelfClosed) {\n        await this.simpleTagReplacements(plugin, tag, data, context);\n      } else if (tag.disposition === TagDisposition.Open) {\n        // get all tags between the open and close tags\n        const closingTagIndex = this.findCloseTagIndex(tagIndex, tag, tags);\n        const scopeTags = tags.slice(tagIndex, closingTagIndex + 1);\n        tagIndex = closingTagIndex; // replace container tag\n\n        const job = plugin.containerTagReplacements(scopeTags, data, context);\n\n        if (isPromiseLike(job)) {\n          await job;\n        }\n      }\n\n      data.pathPop();\n    }\n  }\n\n  detectContentType(tag, data) {\n    // explicit content type\n    const scopeData = data.getScopeData();\n    if (PluginContent.isPluginContent(scopeData)) return scopeData._type; // implicit - loop\n\n    if (tag.disposition === TagDisposition.Open || tag.disposition === TagDisposition.Close) return this.options.containerContentType; // implicit - text\n\n    return this.options.defaultContentType;\n  }\n\n  async simpleTagReplacements(plugin, tag, data, context) {\n    if (this.options.skipEmptyTags && stringValue(data.getScopeData()) === '') {\n      return;\n    }\n\n    const job = plugin.simpleTagReplacements(tag, data, context);\n\n    if (isPromiseLike(job)) {\n      await job;\n    }\n  }\n\n  findCloseTagIndex(fromIndex, openTag, tags) {\n    let openTags = 0;\n    let i = fromIndex;\n\n    for (; i < tags.length; i++) {\n      const tag = tags[i];\n\n      if (tag.disposition === TagDisposition.Open) {\n        openTags++;\n        continue;\n      }\n\n      if (tag.disposition == TagDisposition.Close) {\n        openTags--;\n\n        if (openTags === 0) {\n          return i;\n        }\n\n        if (openTags < 0) {\n          // As long as we don't change the input to\n          // this method (fromIndex in particular) this\n          // should never happen.\n          throw new UnopenedTagError(tag.name);\n        }\n\n        continue;\n      }\n    }\n\n    if (i === tags.length) {\n      throw new UnclosedTagError(openTag.name);\n    }\n\n    return i;\n  }\n\n}\n\nclass TemplateExtension {\n  constructor() {\n    _defineProperty(this, \"utilities\", void 0);\n  }\n\n  /**\r\n   * Called by the TemplateHandler at runtime.\r\n   */\n  setUtilities(utilities) {\n    this.utilities = utilities;\n  }\n\n}\n\nclass JsZipHelper {\n  static toJsZipOutputType(binaryOrType) {\n    if (!binaryOrType) throw new MissingArgumentError(\"binaryOrType\");\n    let binaryType;\n\n    if (typeof binaryOrType === 'function') {\n      binaryType = binaryOrType;\n    } else {\n      binaryType = binaryOrType.constructor;\n    }\n\n    if (Binary.isBlobConstructor(binaryType)) return 'blob';\n    if (Binary.isArrayBufferConstructor(binaryType)) return 'arraybuffer';\n    if (Binary.isBufferConstructor(binaryType)) return 'nodebuffer';\n    throw new Error(`Binary type '${binaryType.name}' is not supported.`);\n  }\n\n}\n\nclass ZipObject {\n  get name() {\n    return this.zipObject.name;\n  }\n\n  set name(value) {\n    this.zipObject.name = value;\n  }\n\n  get isDirectory() {\n    return this.zipObject.dir;\n  }\n\n  constructor(zipObject) {\n    this.zipObject = zipObject;\n  }\n\n  getContentText() {\n    return this.zipObject.async('text');\n  }\n\n  getContentBase64() {\n    return this.zipObject.async('binarystring');\n  }\n\n  getContentBinary(outputType) {\n    const zipOutputType = JsZipHelper.toJsZipOutputType(outputType);\n    return this.zipObject.async(zipOutputType);\n  }\n\n}\n\nclass Zip {\n  static async load(file) {\n    const zip = await JSZip.loadAsync(file);\n    return new Zip(zip);\n  }\n\n  constructor(zip) {\n    this.zip = zip;\n  }\n\n  getFile(path) {\n    const internalZipObject = this.zip.files[path];\n    if (!internalZipObject) return null;\n    return new ZipObject(internalZipObject);\n  }\n\n  setFile(path, content) {\n    this.zip.file(path, content);\n  }\n\n  isFileExist(path) {\n    return !!this.zip.files[path];\n  }\n\n  listFiles() {\n    return Object.keys(this.zip.files);\n  }\n\n  async export(outputType) {\n    const zipOutputType = JsZipHelper.toJsZipOutputType(outputType);\n    const output = await this.zip.generateAsync({\n      type: zipOutputType,\n      compression: \"DEFLATE\",\n      compressionOptions: {\n        level: 6 // between 1 (best speed) and 9 (best compression)\n\n      }\n    });\n    return output;\n  }\n\n}\n\nclass Delimiters {\n  constructor(initial) {\n    _defineProperty(this, \"tagStart\", \"{\");\n\n    _defineProperty(this, \"tagEnd\", \"}\");\n\n    _defineProperty(this, \"containerTagOpen\", \"#\");\n\n    _defineProperty(this, \"containerTagClose\", \"/\");\n\n    Object.assign(this, initial);\n    this.encodeAndValidate();\n    if (this.containerTagOpen === this.containerTagClose) throw new Error(`${\"containerTagOpen\"} can not be equal to ${\"containerTagClose\"}`);\n  }\n\n  encodeAndValidate() {\n    const keys = ['tagStart', 'tagEnd', 'containerTagOpen', 'containerTagClose'];\n\n    for (const key of keys) {\n      const value = this[key];\n      if (!value) throw new Error(`${key} can not be empty.`);\n      if (value !== value.trim()) throw new Error(`${key} can not contain leading or trailing whitespace.`);\n    }\n  }\n\n}\n\nclass TemplateHandlerOptions {\n  /**\r\n   * Determines the behavior in case of an empty input data. If set to true\r\n   * the tag will be left untouched, if set to false the tag will be replaced\r\n   * by an empty string.\r\n   *\r\n   * Default: false\r\n   */\n  constructor(initial) {\n    _defineProperty(this, \"plugins\", createDefaultPlugins());\n\n    _defineProperty(this, \"skipEmptyTags\", false);\n\n    _defineProperty(this, \"defaultContentType\", TEXT_CONTENT_TYPE);\n\n    _defineProperty(this, \"containerContentType\", LOOP_CONTENT_TYPE);\n\n    _defineProperty(this, \"delimiters\", new Delimiters());\n\n    _defineProperty(this, \"maxXmlDepth\", 20);\n\n    _defineProperty(this, \"extensions\", {});\n\n    _defineProperty(this, \"scopeDataResolver\", void 0);\n\n    Object.assign(this, initial);\n\n    if (initial) {\n      this.delimiters = new Delimiters(initial.delimiters);\n    }\n\n    if (!this.plugins.length) {\n      throw new Error('Plugins list can not be empty');\n    }\n  }\n\n}\n\nclass TemplateHandler {\n  /**\r\n   * Version number of the `easy-template-x` library.\r\n   */\n  constructor(options) {\n    var _this$options$extensi, _this$options$extensi2, _this$options$extensi3, _this$options$extensi4;\n\n    _defineProperty(this, \"version\", \"3.0.4\" );\n\n    _defineProperty(this, \"xmlParser\", new XmlParser());\n\n    _defineProperty(this, \"docxParser\", void 0);\n\n    _defineProperty(this, \"compiler\", void 0);\n\n    _defineProperty(this, \"options\", void 0);\n\n    this.options = new TemplateHandlerOptions(options); //\n    // this is the library's composition root\n    //\n\n    this.docxParser = new DocxParser(this.xmlParser);\n    const delimiterSearcher = new DelimiterSearcher(this.docxParser);\n    delimiterSearcher.startDelimiter = this.options.delimiters.tagStart;\n    delimiterSearcher.endDelimiter = this.options.delimiters.tagEnd;\n    delimiterSearcher.maxXmlDepth = this.options.maxXmlDepth;\n    const tagParser = new TagParser(this.docxParser, this.options.delimiters);\n    this.compiler = new TemplateCompiler(delimiterSearcher, tagParser, this.options.plugins, {\n      skipEmptyTags: this.options.skipEmptyTags,\n      defaultContentType: this.options.defaultContentType,\n      containerContentType: this.options.containerContentType\n    });\n    this.options.plugins.forEach(plugin => {\n      plugin.setUtilities({\n        xmlParser: this.xmlParser,\n        docxParser: this.docxParser,\n        compiler: this.compiler\n      });\n    });\n    const extensionUtilities = {\n      xmlParser: this.xmlParser,\n      docxParser: this.docxParser,\n      tagParser,\n      compiler: this.compiler\n    };\n    (_this$options$extensi = this.options.extensions) === null || _this$options$extensi === void 0 ? void 0 : (_this$options$extensi2 = _this$options$extensi.beforeCompilation) === null || _this$options$extensi2 === void 0 ? void 0 : _this$options$extensi2.forEach(extension => {\n      extension.setUtilities(extensionUtilities);\n    });\n    (_this$options$extensi3 = this.options.extensions) === null || _this$options$extensi3 === void 0 ? void 0 : (_this$options$extensi4 = _this$options$extensi3.afterCompilation) === null || _this$options$extensi4 === void 0 ? void 0 : _this$options$extensi4.forEach(extension => {\n      extension.setUtilities(extensionUtilities);\n    });\n  } //\n  // public methods\n  //\n\n\n  async process(templateFile, data) {\n    // load the docx file\n    const docx = await this.loadDocx(templateFile); // prepare context\n\n    const scopeData = new ScopeData(data);\n    scopeData.scopeDataResolver = this.options.scopeDataResolver;\n    const context = {\n      docx,\n      currentPart: null\n    };\n    const contentParts = await docx.getContentParts();\n\n    for (const part of contentParts) {\n      var _this$options$extensi5, _this$options$extensi6;\n\n      context.currentPart = part; // extensions - before compilation\n\n      await this.callExtensions((_this$options$extensi5 = this.options.extensions) === null || _this$options$extensi5 === void 0 ? void 0 : _this$options$extensi5.beforeCompilation, scopeData, context); // compilation (do replacements)\n\n      const xmlRoot = await part.xmlRoot();\n      await this.compiler.compile(xmlRoot, scopeData, context); // extensions - after compilation\n\n      await this.callExtensions((_this$options$extensi6 = this.options.extensions) === null || _this$options$extensi6 === void 0 ? void 0 : _this$options$extensi6.afterCompilation, scopeData, context);\n    } // export the result\n\n\n    return docx.export(templateFile.constructor);\n  }\n  /**\r\n   * Get the text content of a single part of the document.\r\n   * If the part does not exists returns null.\r\n   *\r\n   * @param contentPart\r\n   * The content part of which to get it's text content.\r\n   * Defaults to `ContentPartType.MainDocument`.\r\n   */\n\n\n  async parseTags(templateFile, contentPart = ContentPartType.MainDocument) {\n    const docx = await this.loadDocx(templateFile);\n    const part = await docx.getContentPart(contentPart);\n    const xmlRoot = await part.xmlRoot();\n    return this.compiler.parseTags(xmlRoot);\n  }\n  /**\r\n   * Get the text content of a single part of the document.\r\n   * If the part does not exists returns null.\r\n   *\r\n   * @param contentPart\r\n   * The content part of which to get it's text content.\r\n   * Defaults to `ContentPartType.MainDocument`.\r\n   */\n\n\n  async getText(docxFile, contentPart = ContentPartType.MainDocument) {\n    const docx = await this.loadDocx(docxFile);\n    const part = await docx.getContentPart(contentPart);\n    const text = await part.getText();\n    return text;\n  }\n  /**\r\n   * Get the xml root of a single part of the document.\r\n   * If the part does not exists returns null.\r\n   *\r\n   * @param contentPart\r\n   * The content part of which to get it's text content.\r\n   * Defaults to `ContentPartType.MainDocument`.\r\n   */\n\n\n  async getXml(docxFile, contentPart = ContentPartType.MainDocument) {\n    const docx = await this.loadDocx(docxFile);\n    const part = await docx.getContentPart(contentPart);\n    const xmlRoot = await part.xmlRoot();\n    return xmlRoot;\n  } //\n  // private methods\n  //\n\n\n  async callExtensions(extensions, scopeData, context) {\n    if (!extensions) return;\n\n    for (const extension of extensions) {\n      await extension.execute(scopeData, context);\n    }\n  }\n\n  async loadDocx(file) {\n    // load the zip file\n    let zip;\n\n    try {\n      zip = await Zip.load(file);\n    } catch (_unused) {\n      throw new MalformedFileError('docx');\n    } // load the docx file\n\n\n    const docx = await this.docxParser.load(zip);\n    return docx;\n  }\n\n}\n\nexport { Base64, Binary, ContentPartType, DelimiterSearcher, Delimiters, Docx, DocxParser, ImagePlugin, LOOP_CONTENT_TYPE, LinkPlugin, LoopPlugin, MalformedFileError, MaxXmlDepthError, MimeType, MimeTypeHelper, MissingArgumentError, MissingCloseDelimiterError, MissingStartDelimiterError, Path, PluginContent, RawXmlPlugin, Regex, ScopeData, TEXT_CONTENT_TYPE, TEXT_NODE_NAME, TagDisposition, TagParser, TemplateCompiler, TemplateExtension, TemplateHandler, TemplateHandlerOptions, TemplatePlugin, TextPlugin, UnclosedTagError, UnidentifiedFileTypeError, UnknownContentTypeError, UnopenedTagError, UnsupportedFileTypeError, XmlDepthTracker, XmlNode, XmlNodeType, XmlParser, XmlPart, Zip, ZipObject, createDefaultPlugins, first, inheritsFrom, isNumber, isPromiseLike, last, pushMany, sha1, stringValue, toDictionary };\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","text","staticRenderFns","name","props","String","component","global","globalIsFinite","isFinite","module","exports","Number","it","$","numberIsFinite","target","stat","$values","values","O","DESCRIPTORS","objectDefinePropertyModule","regExpFlags","fails","RegExpPrototype","RegExp","prototype","FORCED","Object","getOwnPropertyDescriptor","get","call","dotAll","sticky","f","configurable","createTypedArrayConstructor","init","data","byteOffset","length","find","list","predicate","ac","undefined","Array","i","hasOwnProperty","item","freeze","object","oc","assign","source","TypeError","key","MIME_TYPE","HTML","isHTML","value","XML_APPLICATION","XML_TEXT","XML_XHTML_APPLICATION","XML_SVG_IMAGE","NAMESPACE","uri","SVG","XML","XMLNS","conventions","require","dom","entities","sax","DOMImplementation","ParseError","XMLReader","normalizeLineEndings","input","replace","DOMParser","options","locator","buildErrorHandler","errorImpl","domBuilder","DOMHandler","errorHandler","isCallback","Function","build","fn","msg","_locator","cdata","position","node","lineNumber","columnNumber","l","systemId","_toString","chars","start","substr","java","lang","appendElement","hander","currentElement","appendChild","doc","parseFromString","mimeType","defaultNSMap","xmlns","test","entityMap","HTML_ENTITIES","XML_ENTITIES","setDocumentLocator","xml","normalize","parse","error","startDocument","createDocument","documentURI","startElement","namespaceURI","localName","qName","el","createElementNS","len","getURI","getValue","attr","getQName","createAttributeNS","getLocator","nodeValue","setAttributeNode","endElement","current","tagName","parentNode","startPrefixMapping","prefix","endPrefixMapping","processingInstruction","ins","createProcessingInstruction","ignorableWhitespace","ch","characters","apply","arguments","charNode","createCDATASection","createTextNode","skippedEntity","endDocument","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","doctype","warning","console","warn","fatalError","notEmptyString","splitOnASCIIWhitespace","split","filter","orderedSetReducer","element","toOrderedSet","keys","reduce","arrayIncludes","indexOf","copy","src","dest","p","_extends","Class","Super","pt","t","constructor","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","code","message","Error","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","lastIndex","Node","_xmlEncoder","c","charCodeAt","_visitNode","callback","firstChild","nextSibling","Document","ns","_nsMap","remove","_onUpdateChild","newChild","cs","childNodes","child","_removeChild","previous","previousSibling","next","lastChild","hasValidParentNodeType","nodeType","hasInsertableNodeType","isElementNode","isTextNode","isDocTypeNode","isElementInsertionPossible","parentChildNodes","docTypeNode","isElementReplacementPossible","hasElementChildThatIsNotChild","assertPreInsertionValidity1to5","parent","assertPreInsertionValidityInDocument","nodeChildNodes","nodeChildElements","parentElementChild","assertPreReplacementValidityInDocument","hasDoctypeChildThatIsNotChild","_insertBefore","_inDocumentAssertion","cp","removeChild","newFirst","newLast","pre","_appendSingleChild","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","XMLSerializer","nodeSerializeToString","isHtml","nodeFilter","buf","refNode","documentElement","lookupPrefix","visibleNamespaces","namespace","serializeToString","join","needNamespaceDefine","addSerializedAttribute","qualifiedName","push","attributes","nodeName","prefixedNodeName","defaultNS","ai","nsi","slice","pubid","sysid","sub","internalSubset","importNode","deep","node2","cloneNode","n","v","attrs2","_ownerElement","index","toString","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","feature","version","root","insertBefore","refChild","replaceChild","oldChild","hasChildNodes","appendData","isSupported","hasAttributes","map","lookupNamespaceURI","isDefaultNamespace","importedNode","getElementById","id","rtv","getAttribute","getElementsByClassName","classNames","classNamesSet","base","nodeClassNames","matches","nodeClassNamesSet","every","createElement","createDocumentFragment","createAttribute","specified","createEntityReference","pl","hasAttribute","getAttributeNode","setAttribute","removeAttribute","removeAttributeNode","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagName","getElementsByTagNameNS","substringData","offset","count","substring","insertData","replaceData","deleteData","end","splitText","newText","newNode","defineProperty","getTextContent","$$length","set","e","amp","apos","gt","lt","quot","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","times","divide","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","there4","sim","cong","asymp","ne","equiv","le","ge","sup","nsub","sube","supe","oplus","otimes","perp","sdot","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","euro","trade","larr","uarr","rarr","darr","harr","crarr","lceil","rceil","lfloor","rfloor","loz","spades","clubs","hearts","diams","nameStartChar","nameChar","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","fromCharCode","entityReplacer","a","k","charAt","parseInt","appendText","xt","m","lineEnd","linePattern","exec","lineStart","parseStack","currentNSMap","closeMap","tagStart","match","config","pop","localNSMap","endMatch","endIgnoreCaseMach","toLowerCase","parseInstruction","parseDCC","ElementAttributes","parseElementStartPart","closed","fixSelfClosed","locator2","copyLocator","parseHtmlSpecialContent","Math","max","addAttribute","qname","startIndex","attributeNames","addValue","attrName","s","setTagName","nsp","nsPrefix","_copy","elStartEnd","elEndStart","pos","lastIndexOf","matchs","lastMatch","endDTD","getLocalName","_isNativeFunction","_wrapNativeSuper","_cache","Map","isNativeFunction","has","Wrapper","construct","getPrototypeOf","create","enumerable","writable","setPrototypeOf","_defineProperty","obj","MalformedFileError","expectedFileType","MaxXmlDepthError","maxDepth","MissingArgumentError","argName","MissingCloseDelimiterError","openDelimiterText","MissingStartDelimiterError","closeDelimiterText","UnclosedTagError","UnknownContentTypeError","contentType","tagRawText","path","UnopenedTagError","UnsupportedFileTypeError","fileType","first","array","last","toDictionary","keySelector","valueSelector","res","forEach","Base64","str","btoa","Buffer","inheritsFrom","derived","isPromiseLike","candidate","then","Binary","isBlob","binary","isBlobConstructor","isArrayBuffer","isArrayBufferConstructor","isBuffer","isBufferConstructor","binaryType","Blob","ArrayBuffer","toBase64","Promise","resolve","fileReader","FileReader","onload","base64","encode","result","readAsBinaryString","binaryStr","Uint8Array","byte","isNumber","Path","lastSlashIndex","parts","trim","Regex","sha1","utf8Encode","j","msgLength","wordArray","A","B","C","D","E","temp","w","H0","H1","H2","H3","H4","blockStart","rotateLeft","cvtHex","t4","val","utfStr","stringValue","XmlNodeType","XmlDepthTracker","depth","TEXT_NODE_NAME","XmlNode","textContent","createGeneralNode","General","encodeValue","serialize","hasChildren","suffix","openTag","childrenXml","closeTag","fromDomNode","domNode","xmlNode","curAttribute","prevChild","domChild","curChild","clone","cloneNodeDeep","referenceNode","beforeNodeIndex","insertChild","insertAfter","referenceNodeIndex","childIndex","RangeError","childAfter","childBefore","splice","currentLastChild","lastTextChild","allTextNodes","lastTextNode","newTextNode","removeSiblings","from","to","lastRemoved","removed","removeMe","splitByChild","left","right","findParent","findParentByName","findChildByName","childName","siblingsInRange","firstNode","lastNode","range","curNode","removeEmptyTextNodes","recursiveRemoveEmptyTextNodes","childOrIndex","beforeChild","original","prevChildClone","childClone","oldChildren","strippedChild","XmlParser","domParse","parser","xmlHeader","TagDisposition","MatchState","delimiterIndex","openNodes","firstMatchIndex","DelimiterSearcher","docxParser","delimiters","maxXmlDepth","lookForOpenDelimiter","isParagraphNode","reset","shouldSearchNode","textIndex","delimiterPattern","startDelimiter","endDelimiter","char","joinTextNodesRange","delimiterMark","createDelimiterMark","findNextNode","increment","decrement","isOpenDelimiter","isOpen","xmlTextNode","ScopeData","allData","pathPart","strItem","strPath","args","scopeDataResolver","defaultResolver","lastKey","curPath","getProp","concat","MimeType","TagParser","docParser","tagRegex","escape","tagEnd","openedTag","openedDelimiter","tags","delimiter","closeTagText","openTagText","normalizeTagNodes","processTag","openDelimiter","closeDelimiter","closeDelimiterIndex","allDelimiters","startTextNode","endTextNode","sameNode","splitTextNode","updated","curDelimiter","tag","rawText","tagParts","tagContent","startsWith","containerTagOpen","disposition","Open","containerTagClose","Close","SelfClosed","ContentPartType","MimeTypeHelper","mime","Png","Jpeg","Gif","Bmp","Svg","TemplatePlugin","utilities","context","nextImageId","ImagePlugin","wordTextNode","containingTextNode","content","getScopeData","docx","mediaFiles","add","format","mediaFilePath","relType","getOfficeRelType","currentPart","rels","relId","contentTypes","ensureContentType","imageId","imageXml","createMarkup","width","height","markupText","pixelsToEmu","pictureMarkup","markupXml","xmlParser","pixels","round","ContentTypesFile","zip","parseContentTypesFile","extension","getDefaultExtension","typeNode","addedNew","xmlContent","setFile","contentTypesFilePath","getFile","getContentText","contentTypesXml","genNode","contentTypeAttribute","MediaFiles","mediaFile","files","hashMediaFiles","hash","hashes","nextFileId","mediaDir","listFiles","filename","getFilename","getContentBase64","fileData","fileHash","Relationship","initial","propKey","toUpperCase","_xml$attributes","_xml$attributes2","_xml$attributes3","_xml$attributes4","type","targetMode","Rels","partPath","partDir","getDirectory","partFilename","relsFilePath","combine","relTarget","relTargetMode","parseRelsFile","relTargetKey","getRelTargetKey","relTargets","getNextRelId","rel","createRootNode","toXml","nextRelId","relsFile","relNode","idAttr","fromXml","typeAttr","targetAttr","XmlPart","xmlRoot","xmlDocument","domDocument","save","Docx","mainDocumentPath","mainDocument","MainDocument","getHeaderOrFooter","partTypes","DefaultHeader","FirstHeader","EvenPagesHeader","DefaultFooter","FirstFooter","EvenPagesFooter","all","getContentPart","outputType","saveChanges","headerFooterNodeName","nodeTypeAttribute","headerFooterType","docRoot","body","sectionProps","reference","_sectionProps$childNo","_node$attributes","_attributes","r","_parts","contentPartType","getMainDocumentPath","rootPart","rootRels","relations","_relations$find","mainDocumentRelType","DocxParser","open","textNode","splitIndex","addBefore","firstXmlTextNode","secondXmlTextNode","newWordTextNode","setSpacePreserveAttribute","curIndex","firstText","secondText","paragraph","removeTextNode","containingParagraph","containingParagraphNode","runNode","containingRunNode","leftRun","rightRun","runProps","RUN_PROPERTIES_NODE","leftRunProps","firstRunChildIndex","leftPara","rightPara","paragraphProps","PARAGRAPH_PROPERTIES_NODE","leftParagraphProps","firstParaChildIndex","isEmptyRun","firstRunNode","secondRunNode","paragraphNode","firstWordTextNode","secondWordTextNode","totalText","curRunNode","curWordTextNode","firstTextNodeChild","curXmlTextNode","textToRemove","runToRemove","second","RUN_NODE","TABLE_CELL_NODE","PARAGRAPH_NODE","paragraphProperties","paragraphPropertiesNode","listNumberProperties","NUMBER_PROPERTIES_NODE","TABLE_ROW_NODE","_node$childNodes","isRunNode","_node$childNodes2","isRunPropertiesNode","isEmptyTextNode","LinkPlugin","linkRelType","wordRunNode","linkMarkup","generateMarkup","insertHyperlinkNode","linkRunProps","unshift","tagRunNode","tagTextNode","textNodesInRun","runBeforeTag","LoopListStrategy","isListParagraph","firstParagraph","lastParagraph","paragraphsToRepeat","nodesToRepeat","paragraphGroups","lastParagraphs","curParagraphsGroup","LoopParagraphStrategy","areSame","splitResult","splitParagraphByTextNode","afterFirstParagraph","middleParagraphs","beforeLastParagraph","inBetween","mergeTo","joinParagraphs","LoopTableStrategy","isTableCellNode","firstRow","containingTableRowNode","lastRow","rowsToRepeat","rowGroups","curRowsGroup","row","LOOP_CONTENT_TYPE","LoopPlugin","loopStrategies","strategy","setUtilities","isCondition","isArray","loopStrategy","isApplicable","splitBefore","repeatedNodes","repeat","compile","compiledNodes","mergeBack","nodes","allResults","curResult","nodeGroups","compiledNodeGroups","curNodes","dummyRootNode","conditionTag","updatePathBefore","compiler","updatePathAfter","groupIndex","pathString","pathPop","pathPush","RawXmlPlugin","replaceNode","replaceParagraph","TEXT_CONTENT_TYPE","TextPlugin","lines","replaceSingleLine","replaceMultiLine","lineBreak","getLineBreak","lineNode","createWordTextNode","createDefaultPlugins","PluginContent","isPluginContent","_type","TemplateCompiler","delimiterSearcher","tagParser","plugins","pluginsLookup","parseTags","doTagReplacements","findDelimiters","tagIndex","detectContentType","plugin","simpleTagReplacements","closingTagIndex","findCloseTagIndex","scopeTags","job","containerTagReplacements","scopeData","containerContentType","defaultContentType","skipEmptyTags","fromIndex","openTags","JsZipHelper","binaryOrType","ZipObject","zipObject","dir","async","zipOutputType","toJsZipOutputType","Zip","internalZipObject","file","generateAsync","compression","compressionOptions","level","output","JSZip","Delimiters","encodeAndValidate","TemplateHandlerOptions","TemplateHandler","_this$options$extensi","_this$options$extensi2","_this$options$extensi3","_this$options$extensi4","extensionUtilities","extensions","beforeCompilation","afterCompilation","templateFile","loadDocx","getContentParts","contentParts","callExtensions","_this$options$extensi5","_this$options$extensi6","contentPart","docxFile","getText","execute","load","FUNC_ERROR_TEXT","HASH_UNDEFINED","INFINITY","funcTag","genTag","symbolTag","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reRegExpChar","reEscapeChar","reIsHostCtor","freeGlobal","freeSelf","self","isHostObject","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","IE_PROTO","funcToString","objectToString","reIsNative","Symbol","getNative","nativeCreate","symbolProto","symbolToString","Hash","entries","clear","entry","hashClear","__data__","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","eq","baseGet","isKey","castPath","toKey","baseIsNative","isObject","isMasked","pattern","isFunction","toSource","baseToString","isSymbol","stringToPath","isKeyable","func","memoize","string","number","quote","resolver","memoized","cache","Cache","other","isObjectLike","defaultValue","asyncGeneratorStep","gen","reject","_next","_throw","arg","info","done","_asyncToGenerator","err","_construct","Parent","isNativeReflectConstruct","Reflect","Constructor","bind","instance","_arrayWithHoles","arr","_iterableToArrayLimit","_i","iterator","_e","_arr","_n","_d","_nonIterableRest","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_arrayWithoutHoles","arrayLikeToArray","_iterableToArray","iter","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","nonIterableSpread"],"sourceRoot":""}
"use strict";(self["webpackChunktims_dexon"]=self["webpackChunktims_dexon"]||[]).push([[2971],{62971:(t,e,o)=>{o.r(e),o.d(e,{default:()=>f});var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-container"},[o("div",{staticClass:"page-section"},[o("DxDataGrid",{attrs:{id:"data-grid-style","key-expr":"id","data-source":t.inspRecordList,"element-attr":t.dataGridAttributes,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"column-hiding-enabled":!0,"word-wrap-enabled":!0},on:{exporting:t.EXPORT_DATA,"row-inserted":t.CREATE_RECORD,"row-updated":t.UPDATE_RECORD,"row-removed":t.DELETE_RECORD}},[o("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"form"}},[o("DxForm",{attrs:{"label-location":"top"}},[o("DxItem",{attrs:{"col-count":2,"col-span":2,"item-type":"group"}},[o("DxItem",{attrs:{"data-field":"inspection_date","col-span":1}}),o("DxItem",{attrs:{"data-field":"project_no","col-span":1}}),o("DxItem",{attrs:{"data-field":"report_no","col-span":1}}),o("DxItem",{attrs:{"col-span":1}}),o("DxItem",{attrs:{"data-field":"remark","col-span":2}})],1)],1)],1),o("DxColumn",{attrs:{"data-field":"inspection_date",caption:"Inspection date","data-type":"date",format:"dd MMM yyyy","sort-order":"desc",width:140,"editor-options":t.inspDateInputOptions}},[o("DxRequiredRule")],1),o("DxColumn",{attrs:{"data-field":"project_no",caption:"Project number",width:140,"editor-options":t.projectNoInputOptions}},[o("DxRequiredRule")],1),o("DxColumn",{attrs:{"data-field":"report_no",caption:"Report number",width:140,"editor-options":t.reportNoInputOptions}}),o("DxColumn",{attrs:{"data-field":"remark",caption:"Remark","editor-options":t.remarkInputOptions}}),o("DxScrolling",{attrs:{mode:"standard"}}),o("DxSearchPanel",{attrs:{visible:!0}}),o("DxPaging",{attrs:{"page-size":10,"page-index":0}}),o("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),o("DxExport",{attrs:{enabled:!0}})],1)],1)])},n=[],i=(o(41539),o(39477)),r=o(17133),s=o.n(r),c=o(71642),d=o(53706),l=o.n(d),p=o(66262),u=o(60082),g=o(48626);const m={name:"inspection-record",components:{DxDataGrid:g.DxDataGrid,DxSearchPanel:g.DxSearchPanel,DxPaging:g.DxPaging,DxPager:g.DxPager,DxScrolling:g.DxScrolling,DxColumn:g.DxColumn,DxExport:g.DxExport,DxForm:g.DxForm,DxItem:u.DxItem,DxEditing:g.DxEditing,DxRequiredRule:g.DxRequiredRule},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"Inspection Record",subpageInnerName:null}),1==this.$store.state.status.server&&this.FETCH_INSP_RECORD()},data:function(){return{inspRecordList:{},campaigeList:{},dataGridAttributes:{class:"data-grid-style"},inspDateInputOptions:{placeholder:"Select date"},projectNoInputOptions:{placeholder:"Enter project no"},reportNoInputOptions:{placeholder:"Enter report no"},remarkInputOptions:{placeholder:"Enter remark"}}},computed:{},methods:{EXPORT_DATA:function(t){var e=new c.Workbook,o=e.addWorksheet("Projects");(0,p.d)({worksheet:o,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){l()(new Blob([t],{type:"application/octet-stream"}),"inspection_record.xlsx")}))})),t.cancel=!0},FETCH_INSP_RECORD:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id_tag;(0,i.Z)({method:"get",url:"/PipingInspectionRecord/get-piping-ir-by-id-line?id_line="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){console.log("insp record:"),console.log(e),200==e.status&&e.data&&(console.log("success"),t.inspRecordList=e.data,console.log(t.inspRecordList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},CREATE_RECORD:function(t){var e=this;t.data.id_line=this.$route.params.id_tag,t.data.id=0,t.data.is_active=!0,t.data.inspection_date=s()(t.data.inspection_date).format("L"),console.log(t.data),(0,i.Z)({method:"post",url:"/PipingInspectionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){200==t.status&&(console.log("create success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},UPDATE_RECORD:function(t){var e=this;t.data.inspection_date=s()(t.data.inspection_date).format("L"),console.log(t.data),(0,i.Z)({method:"put",url:"/PipingInspectionRecord/"+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){200==t.status&&(console.log("update success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(t){var e=this;(0,i.Z)({method:"delete",url:"/PipingInspectionRecord/"+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&(console.log("delete success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))}}},D=m;var h=o(1001),x=(0,h.Z)(D,a,n,!1,null,"49cc5158",null);const f=x.exports}}]);
//# sourceMappingURL=2971.26ae15c1.js.map
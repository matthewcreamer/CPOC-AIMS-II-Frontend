"use strict";(self["webpackChunktims_dexon"]=self["webpackChunktims_dexon"]||[]).push([[956],{95162:(t,e,a)=>{a.d(e,{Z:()=>c});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-loading"},[a("div",{staticClass:"box"},[a("hash-loader",{staticClass:"custom-class",attrs:{color:"#1e1450",loading:!0,size:40,sizeUnit:"px"}}),a("h5",{staticClass:"app-name"},[t._v(t._s(t.text))])],1)])},n=[];const o={name:"app-user-logging-in",props:{text:String}},r=o;var i=a(1001),l=(0,i.Z)(r,s,n,!1,null,"7261fb9f",null);const c=l.exports},99986:(t,e,a)=>{a.d(e,{Z:()=>c});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default")],2)},n=[];const o={name:"LayoutMain",components:{}},r=o;var i=a(1001),l=(0,i.Z)(r,s,n,!1,null,null,null);const c=l.exports},90956:(t,e,a)=>{a.r(e),a.d(e,{default:()=>d});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-body",attrs:{id:"page-login"}},[t._m(0),1==t.current_tab?a("div",{staticClass:"login-panel"},[a("div",{staticClass:"app-logo"},[a("img",{attrs:{src:t.appIcon,alt:"app icon"}})]),a("h1",[t._v("PTTEP AIMS")]),a("label",{staticClass:"sub-title"},[t._v("Asset Integrity Management System")]),a("div",{staticClass:"form-login"},[a("div",{staticClass:"input-set"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"user",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.formData.username},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.SIGN_IN()},input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}})]),a("div",{staticClass:"input-set"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"password",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.formData.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.SIGN_IN()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})]),a("div",{staticClass:"button-set",staticStyle:{"margin-top":"40px"}},[a("button",{staticClass:"blue",on:{click:function(e){return t.SIGN_IN()}}},[a("label",[t._v("Sign In")])])]),t._m(1)])]):t._e(),1==t.isLoading?a("PageLoading",{attrs:{text:"Logging In"}}):t._e(),a("div",{staticClass:"bg-filter"})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-logo-login"},[a("img",{attrs:{src:"/img/logo-dark.png"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"help-label"},[a("label",[t._v(" Need helps? Visit "),a("a",[t._v("Help Center")])])])}],o=(a(32564),a(41539),a(38862),a(39477)),r=a(99986),i=a(95162);const l={name:"Login-View",components:{PageLoading:i.Z},data:function(){return{appIcon:this.$store.state.appIcon,isLoggedIn:localStorage.getItem("user"),isLoading:!1,current_tab:1,formData:{username:"",password:""}}},created:function(){this.$emit("update:layout",r.Z),this.$store.commit("CLEAR_CURRENT_INAPP"),this.isLoggedIn&&this.$router.push("/")},methods:{SIGN_IN:function(){var t=this;this.formData.username?this.formData.password?(this.isLoading=!0,setTimeout((function(){var e=t.formData.password,a=t.formData.username.toLowerCase();(0,o.Z)({method:"post",url:"/UserAccount/login",data:{username:a,password:e}}).then((function(e){e.data.user&&e.data.token&&(localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("token",JSON.stringify(e.data.token)),console.log("==> SIGNED IN USER: "),console.log(e.data.user),t.$router.push("/"))}))["catch"]((function(e){e.response?(e.response.data&&t.$ons.notification.alert(e.response.data.message),0==e.response.status&&t.$ons.notification.alert("Cannot connect to a server.<br/> Please try again later.")):console.log(e)}))["finally"]((function(){t.isLoading=!1}))}),500)):this.$ons.notification.alert('"Password" cannot be empty'):this.$ons.notification.alert('"Username" cannot be empty')}}},c=l;var u=a(1001),p=(0,u.Z)(c,s,n,!1,null,"82ba5722",null);const d=p.exports}}]);
//# sourceMappingURL=956.8aef7338.js.map
"use strict";(self["webpackChunktims_dexon"]=self["webpackChunktims_dexon"]||[]).push([[3499],{30594:(t,e,a)=>{a.d(e,{Z:()=>d});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-content-loading"},[a("div",{staticClass:"box"},[a("hash-loader",{staticClass:"custom-class",attrs:{color:"#1e1450",loading:!0,size:40,sizeUnit:"px"}})],1)])},i=[];const n={name:"AppLoading",props:{text:String,icon:String,color:String}},s=n;var r=a(1001),l=(0,r.Z)(s,o,i,!1,null,"cf1f01c2",null);const d=l.exports},43499:(t,e,a)=>{a.r(e),a.d(e,{default:()=>b});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"tab-wrapper"},[a("vue-tabs-chrome",{attrs:{tabs:t.tabs},model:{value:t.tabCurrent,callback:function(e){t.tabCurrent=e},expression:"tabCurrent"}})],1),"A1"==t.tabCurrent?a("div",{staticClass:"page-section"},[t._m(0),a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"view-grid","key-expr":"id_thk","element-attr":t.dataGridAttributes,"data-source":t.dataList.view,"focused-row-enabled":!1,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0}},[a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxColumn",{attrs:{"data-field":"bottom_no",caption:"Plate No.","sort-order":"asc"}}),a("DxColumn",{attrs:{"data-field":"bottom_row",caption:"Row"}}),a("DxColumn",{attrs:{"data-field":"bottom_column",caption:"Column"}}),a("DxColumn",{attrs:{"data-field":"tp_name",caption:"TP name"}}),a("DxColumn",{attrs:{"data-field":"inservice_date",caption:"In-service date","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"t_nom",caption:"tnom (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"t_req",caption:"treq (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"first_insp_date",caption:"First date","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"first_t_actual",caption:"First thickness (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"previous_insp_date",caption:"Previous date","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"previous_t_actual",caption:"Previous thickness (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"inspection_date",caption:"Last date","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"t_actual",caption:"Last thickness (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"crs",caption:"ST_CR (mm/yr)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"crl",caption:"LT_CR (mm/yr)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"rl",caption:"RL (yrs)",format:"#,##0.00"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1)]):t._e(),"A2"==t.tabCurrent?a("div",{staticClass:"page-section overflow-x",attrs:{id:"x-page"}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header-toolbar",staticStyle:{width:"calc(100% - 82px)"}},[t._m(1),a("div",{staticClass:"right"},[a("div",{staticClass:"dx-table-style"},[a("div",{staticClass:"table-toolbar-set"},[a("div",{staticClass:"download-btn"},[a("v-ons-toolbar-button",{attrs:{id:"toolbarBTN"},on:{click:function(e){return t.FETCH_FILE_CML()}}},[a("label",[t._v("Download")])])],1),a("v-ons-toolbar-button",[a("label",{attrs:{for:"cml-upload-btn"}},[a("i",{staticClass:"las la-file-import"}),t._v("Import Excel ")])])],1)])])]),a("input",{ref:"cml_upload_file",staticStyle:{display:"none"},attrs:{type:"file",id:"cml-upload-btn"},on:{change:function(e){return t.UPLOAD_CML()}}}),a("DxDataGrid",{attrs:{id:"cml-grid","key-expr":"id","element-attr":t.dataGridAttributes,"data-source":t.dataList.cml,"hover-state-enabled":!0,"focused-row-enabled":!1,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0},on:{"row-inserted":t.CREATE_CML,"row-updated":t.UPDATE_CML,"row-removed":t.DELETE_CML,"selection-changed":t.VIEW_TP,"row-click":t.CML_FLAGER}},[a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxSelection",{attrs:{mode:"single"}}),a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"bottom_no",caption:"Plate No.","sort-order":"asc","allow-editing":!1,width:100}}),a("DxColumn",{attrs:{"data-field":"bottom_row",caption:"Row",width:80}}),a("DxColumn",{attrs:{"data-field":"bottom_column",caption:"Column",width:80}}),a("DxColumn",{attrs:{"data-field":"t_nom",caption:"tnom (mm)",format:"#,##0.00",width:100}}),a("DxColumn",{attrs:{"data-field":"t_req",caption:"tretire (mm)",format:"#,##0.00","allow-editing":!1,width:100}}),a("DxColumn",{attrs:{"data-field":"inservice_date",caption:"In-service date","data-type":"date",format:"dd MMM yyyy",width:120}}),a("DxColumn",{attrs:{type:"buttons"}},[a("DxButton",{attrs:{name:"edit",hint:"Edit",icon:"edit"}}),a("DxButton",{attrs:{name:"delete",hint:"Delete",icon:"trash"}})],1),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1),a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header-toolbar",style:t.px},[t._m(2),a("div",{staticClass:"right"},[a("div",{staticClass:"dx-table-style"},[a("div",{staticClass:"table-toolbar-set"},[a("div",{staticClass:"download-btn"},[a("v-ons-toolbar-button",{attrs:{id:"toolbarBTN"},on:{click:function(e){return t.FETCH_FILE_BOTTOM()}}},[a("label",{attrs:{for:"tp-download-tp-btn"}},[t._v("Download")])])],1),a("v-ons-toolbar-button",[a("label",{attrs:{for:"tp-upload-btn"}},[a("i",{staticClass:"las la-file-import"}),t._v("Import Excel ")])])],1)])])]),a("input",{ref:"tp_upload_file",staticStyle:{display:"none"},attrs:{type:"file",id:"tp-upload-btn"},on:{change:function(e){return t.UPLOAD_TP()}}}),a("DxDataGrid",{attrs:{id:"tp-grid","key-expr":"id","element-attr":t.dataGridAttributes,"data-source":t.dataList.tp,"focused-row-enabled":!1,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0},on:{"row-inserted":t.CREATE_TP,"row-updated":t.UPDATE_TP,"row-removed":t.DELETE_TP,"selection-changed":t.VIEW_THK,"row-click":t.TP_FLAGER}},[a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxSelection",{attrs:{mode:"single"}}),a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":t.SELECTION_CML,"use-icons":!0,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"tp_name",caption:"TP Name",width:100}}),a("DxColumn",{attrs:{"data-field":"tp_desc",caption:"TP Desc",width:200}}),a("DxColumn",{attrs:{type:"buttons"}},[a("DxButton",{attrs:{name:"edit",hint:"Edit",icon:"edit"}}),a("DxButton",{attrs:{name:"delete",hint:"Delete",icon:"trash"}})],1),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} i tems)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1),a("div",{staticClass:"table-wrapper"},[t._m(3),a("DxDataGrid",{attrs:{id:"thk-grid","key-expr":"id","element-attr":t.dataGridAttributes,"data-source":t.dataList.thk,"focused-row-enabled":!1,"hover-state-enabled":!0,selection:{mode:"single"},"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0},on:{"row-inserted":t.CREATE_THK,"row-updated":t.UPDATE_THK,"row-removed":t.DELETE_THK}},[a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":t.SELECTION,"use-icons":!0,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"id_inspection_record",caption:"Inspection date",width:150}},[a("DxLookup",{attrs:{"data-source":t.inspRecordList,"display-expr":t.SET_FORMAT_DATE,"value-expr":"id_inspection_record"}})],1),a("DxColumn",{attrs:{"data-field":"t_actual",caption:"tactual (mm)",format:"#,##0.00",width:150}}),a("DxColumn",{attrs:{type:"buttons"}},[a("DxButton",{attrs:{name:"edit",hint:"Edit",icon:"edit"}}),a("DxButton",{attrs:{name:"delete",hint:"Delete",icon:"trash"}})],1),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1)]):t._e(),"A3"==t.tabCurrent?a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-container-A3",class:[0==t.pagePanelHiding?"page-container-A3":"page-container-hide"]},[a("InspectionRecordPanel",{on:{showHidePanel:t.SHOW_HIDE_PANEL,viewItem:t.VIEW_ITEM}}),this.id_inspection_record?a("div",{staticClass:"list-page"},[a("v-ons-list",[a("v-ons-list-header",[t._v(" Inspection Details of "),a("b",[t._v(t._s(t.DATE_FORMAT(t.current_view.inspection_date)))])])],1),a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"data-grid-style","key-expr":"id","data-source":t.additionalRemarkList,"element-attr":t.dataGridAttributes,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1},on:{"row-inserted":t.CREATE_ADDITIONAL_REMARK,"row-updated":t.UPDATE_ADDITIONAL_REMARK,"row-removed":t.DELETE_ADDITIONAL_REMARK,"editing-start":t.EDITING_START_ADDITIONAL_REMARK,"init-new-row":t.INIT_NEW_ROW_ADDITIONAL_REMARK,saved:t.SAVE},scopedSlots:t._u([{key:"attch_img",fn:function(e){var o=e.data;return[a("div",{staticStyle:{position:"relative"}},[a("a",{attrs:{href:t.baseURL+o.value,download:"dwg",target:"_blank"}},[a("img",{attrs:{src:t.baseURL+o.value,width:"300",height:"200"}}),a("br")])])]}},{key:"attch_img-editor",fn:function(e){var o=e.data;return[a("div",[""!=t.imgHolder&&0==t.isInitEdit?a("img",{attrs:{src:t.baseURL+o.value,width:"300",height:"200"}}):t._e(),""!=t.imgHolder&&1==t.isInitEdit?a("img",{attrs:{src:t.imgHolder,width:"300",height:"200"}}):t._e(),""==t.imgHolder?a("img",{attrs:{src:"http://tmt-solution.com/public/image-empty.png",width:"300",height:"200"}}):t._e(),a("DxFileUploader",{attrs:{"select-button-text":"Select photo","label-text":"",accept:"image/*","upload-mode":"useForm"},on:{"value-changed":t.ON_ATTACHMENT_CHANGE}})],1)]}}],null,!1,1434287500)},[a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"form"}},[a("DxForm",{attrs:{"label-location":"top"}},[a("DxItem",{attrs:{"col-count":2,"col-span":2,"item-type":"group"}},[a("DxItem",{attrs:{"data-field":"file_path","col-span":2}}),a("DxItem",{attrs:{"data-field":"remark_desc","col-span":2}})],1)],1)],1),a("DxColumn",{attrs:{"data-field":"file_path",caption:"Attachment","cell-template":"attch_img","edit-cell-template":"attch_img-editor",width:400}}),a("DxColumn",{attrs:{"data-field":"remark_desc",caption:"Description","editor-options":t.fileNameInputOptions}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1)],1)],1):t._e(),""==this.id_inspection_record?a("SelectInspRecord"):t._e()],1)]):t._e(),1==t.isLoading?a("contentLoading",{attrs:{text:"Loading, please wait...",color:"#fc9b21"}}):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-header-toolbar",staticStyle:{width:"calc(100% - 41px)"}},[a("div",{staticClass:"left"},[a("label",[t._v("Thickness Calculation Result")])]),a("div",{staticClass:"right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("label",[t._v("CML")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("label",[t._v("TP")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-header-toolbar",staticStyle:{width:"calc(100% - 82px)"}},[a("div",{staticClass:"left"},[a("label",[t._v("Thickness")])]),a("div",{staticClass:"right"})])}],n=a(4367),s=(a(41539),a(21249),a(57327),a(91058),a(78783),a(33948),a(60285),a(41637),a(39477)),r=a(17133),l=a.n(r),d=a(30594),c=a(25930),u=a.n(c),p=a(3488),h=a(34556),m=a(78417),_=a(60082),g=a(48626);const f={name:"ViewThicknessBottom",components:{DxForm:g.DxForm,DxItem:_.DxItem,DxFileUploader:m.DxFileUploader,SelectInspRecord:h.Z,InspectionRecordPanel:p.Z,contentLoading:d.Z,DxDataGrid:g.DxDataGrid,DxSearchPanel:g.DxSearchPanel,DxPaging:g.DxPaging,DxPager:g.DxPager,DxScrolling:g.DxScrolling,DxColumn:g.DxColumn,DxExport:g.DxExport,DxEditing:g.DxEditing,DxLookup:g.DxLookup,DxButton:g.DxButton,DxHeaderFilter:g.DxHeaderFilter,DxFilterRow:g.DxFilterRow,DxSelection:g.DxSelection,VueTabsChrome:u()},created:function(){this.$store.commit("UPDATE_CURRENT_INAPP",{name:"Tank Management",icon:"/img/icon_menu/tank/tank.png"}),this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"Thickness Messurement",subpageInnerName:"Bottom"}),1==this.$store.state.status.server&&(this.FETCH_INSP_RECORD(),this.FETCH_CML(),this.FETCH_VIEW())},data:function(){return{pagePanelHiding:!1,current_view:"",id_inspection_record:"",additionalRemarkList:[],imgHolder:"",file:[],isInitEdit:0,dataIMGTemp:"",fileNameInputOptions:{placeholder:"Enter description ..."},px:"width: calc(100% - 41px)",cml_flag:!1,tp_flag:!1,dataList:{cml:[],tp:[],thk:[],view:[]},isLoading:!1,id_cml:0,id_tp:0,inspRecordList:{},dataGridAttributes:{class:"data-grid-style"},tabCurrent:"A2",tabs:[{label:"Calculation Result",key:"A1",closable:!1},{label:"Messurement Result",key:"A2",closable:!1},{label:"Additional Attachment",key:"A3",closable:!1}]}},computed:{SELECTION:function(){return!!this.tp_flag&&(console.warn(this.tp_flag),!0)},SELECTION_CML:function(){return!!this.cml_flag&&(console.warn(this.cml_flag),!0)},baseURL:function(){var t=this.$store.state.mode;return"dev"==t?this.$store.state.modeURL.dev:"prod"==t?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_CML:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id_tag;(0,s.Z)({method:"get",url:"TankBottomThickness/tank-bottom-thk-cml-by-tag-id?id="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_tag:e}}).then((function(e){console.log("cml:"),console.log(e.data),200==e.status&&e.data&&(t.dataList.cml=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_TP:function(){var t=this;(0,s.Z)({method:"get",url:"TankBottomThickness/tank-bottom-thk-tp-by-cml-id?id="+this.id_cml,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_cml:this.id_cml}}).then((function(e){console.log("tp:"),console.log(e.data),200==e.status&&e.data&&(t.dataList.tp=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},FETCH_THK:function(){var t=this;(0,s.Z)({method:"get",url:"TankBottomThickness/tank-bottom-thk-data-by-tp-id?id="+this.id_tp,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_tp:this.id_tp}}).then((function(e){console.log("thk:"),console.log(e.data),200==e.status&&e.data&&(t.dataList.thk=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},FETCH_VIEW:function(){var t=this,e=this.$route.params.id_tag;(0,s.Z)({method:"get",url:"TankBottomThickness/tank-bottom-thk-last-data-view-by-tag-id?id_tag="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_tag:e}}).then((function(e){console.log("view:"),console.log(e.data),200==e.status&&e.data&&(t.dataList.view=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},FETCH_INSP_RECORD:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id_tag;(0,s.Z)({method:"get",url:"TankInspectionRecord/get-tank-ir-by-id-tag?id_tag="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.inspRecordList=e.data,t.inspRecordList=t.inspRecordList.map((function(t){return(0,n.Z)((0,n.Z)({},t),{},{id_inspection_record:t.id,id:null})})))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},CREATE_CML:function(t){var e=this;console.log(t);var a=this.$route.params.id_tag;t.data.id_tag=a,t.data.id=0,t.data.inservice_date=l()(t.data.inservice_date).format("L"),t.data.bottom_no=t.data.bottom_row+"-"+t.data.bottom_column,(0,s.Z)({method:"post",url:"TankBottomThickness/add-tank-bottom-thk-cml",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){console.log(t),201==t.status&&t.data&&(e.FETCH_CML(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},UPDATE_CML:function(t){var e=this;this.isLoading=!0,t.data.bottom_no=t.data.bottom_row+"-"+t.data.bottom_column,(0,s.Z)({method:"put",url:"TankBottomThickness/edit-tank-bottom-thk-cml?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){204==t.status&&(e.FETCH_CML(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},DELETE_CML:function(t){var e=this;console.log(t),this.isLoading=!0,(0,s.Z)({method:"delete",url:"TankBottomThickness/delete-tank-bottom-thk-cml?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_cml:t.key}}).then((function(t){console.log(t.data),204==t.status&&(e.FETCH_CML(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},CREATE_TP:function(t){var e=this;t.data.id_cml=this.id_cml,t.data.id=0,this.isLoading=!0,(0,s.Z)({method:"post",url:"TankBottomThickness/add-tank-bottom-thk-tp",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){console.log(t),200==t.status&&t.data&&(e.FETCH_TP(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_TP:function(t){var e=this;console.log(t.data),this.isLoading=!0,(0,s.Z)({method:"put",url:"TankBottomThickness/edit-tank-bottom-thk-tp?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){console.log(t),204==t.status&&(e.FETCH_TP(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},DELETE_TP:function(t){var e=this;console.log(t),(0,s.Z)({method:"delete",url:"TankBottomThickness/delete-tank-bottom-thk-data?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_tp:t.key}}).then((function(t){console.log(t.data),204==t.status&&(e.FETCH_TP(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},CREATE_THK:function(t){var e=this;t.data.id=0,t.data.id_tp=this.id_tp,this.isLoading=!0,(0,s.Z)({method:"post",url:"TankBottomThickness/add-tank-bottom-thk-data",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){201==t.status&&t.data&&(e.FETCH_THK(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_THK:function(t){var e=this,a=this.inspRecordList.filter((function(e){return e.id_inspection_record==t.data.id_inspection_record}));t.data.inspection_date=a[0].inspection_date,console.log(t.data),this.isLoading=!0,(0,s.Z)({method:"put",url:"TankBottomThickness/edit-tank-bottom-thk-data?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){console.log(t.data),204==t.status&&(e.FETCH_TP(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},DELETE_THK:function(t){var e=this;console.log(t),this.isLoading=!0,(0,s.Z)({method:"delete",url:"TankBottomThickness/delete-tank-bottom-thk-data?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id_thk:t.key}}).then((function(t){console.log(t.data),200==t.status&&t.data&&(e.FETCH_THK(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},VIEW_TP:function(t){console.log(t),this.id_cml=t.selectedRowKeys[0],this.FETCH_TP(),this.dataList.thk=[],this.tp_flag=!1},VIEW_THK:function(t){console.log(t),this.id_tp=t.selectedRowKeys[0],this.FETCH_THK()},SET_FORMAT_DATE:function(t){return l()(t.inspection_date).format("DD MMM yyyy")},UPLOAD_CML:function(){var t=this;this.isLoading=!0;var e=this.$refs.cml_upload_file.files[0],a=parseInt(this.$route.params.id_tag);"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.type&&this.$route.params.id_tag?(0,s.Z)({method:"post",url:"/bottom-thickness/upload-bottom-thk-cml?id_tag="+a,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{file:e}}).then((function(e){console.log(e),204==e.status&&(t.FETCH_CML(),t.FETCH_VIEW())}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){t.isLoading=!1,t.$ons.notification.alert("Upload Completed!")})):this.$ons.notification.alert("Incorrect filetype. <br/> Only XLS/XLSX file can be uploaded.")},UPLOAD_TP:function(){var t=this;this.isLoading=!0;var e=this.$refs.tp_upload_file.files[0],a=parseInt(this.$route.params.id_tag);"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.type&&this.$route.params.id_tag?(0,s.Z)({method:"post",url:"/bottom-thickness/upload-bottom-thk-tp?id_tag="+a,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{file:e}}).then((function(e){console.log(e),204==e.status&&(t.FETCH_TP(),t.FETCH_VIEW())}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){t.isLoading=!1,t.$ons.notification.alert("Upload Completed!")})):this.$ons.notification.alert("Incorrect filetype. <br/> Only XLS/XLSX file can be uploaded.")},TP_FLAGER:function(){this.tp_flag=!0},CML_FLAGER:function(){this.cml_flag=!0,this.px="width: calc(100% - 82px)"},FETCH_FILE_BOTTOM:function(){var t=this;console.log("in");var e=parseInt(this.$route.params.id_tag);(0,s.Z)({method:"get",url:"bottom-thickness/download-bottom-thk?id_tag="+e,responseType:"blob",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){var a=e.data;t.downLoadFileExcel(a,"Bottom_TP_TEMPLATE")}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},FETCH_FILE_CML:function(){var t=this,e=parseInt(this.$route.params.id_tag);(0,s.Z)({method:"get",url:"bottom-thickness/download-bottom-cml?id_tag="+e,responseType:"blob",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){var a=e.data;t.downLoadFileExcel(a,"Bottom_CML_TEMPLATE")}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},downLoadFileExcel:function(t,e){console.log(t);var a=document.createElement("a");a.setAttribute("href",window.URL.createObjectURL(new Blob([t]))),a.setAttribute("download",e+".xlsx"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},VIEW_ITEM:function(t){this.current_view={},this.current_view=t,this.id_component=this.$route.params.id_component,this.id_inspection_record=t.id_inspection_record,this.FETCH_ADDITIONAL_REMARK()},FETCH_ADDITIONAL_REMARK:function(){var t=this,e=this.id_inspection_record;(0,s.Z)({method:"get",url:"additional-remark/get-additional-remark-by-ir-id-type?id_inspection_record="+e+"&type=bottom_thk",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&(console.warn("FETCH ADDITIONAL"),console.log(e.data),t.additionalRemarkList=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},CREATE_ADDITIONAL_REMARK:function(t){var e=this;console.log(t);var a=new FormData,o=JSON.parse(localStorage.getItem("user"));a.append("id_inspection_record",this.id_inspection_record),a.append("id_tag",this.$route.params.id_tag),a.append("remark_type","bottom_thk"),a.append("remark_desc",t.data.remark_desc),a.append("file",this.file),a.append("created_by",o.id_account),a.append("updated_by",o.id_account),(0,s.Z)({method:"post",url:"additional-remark/add-additional-remark",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(t){201==t.status&&t.data&&e.FETCH_ADDITIONAL_REMARK()}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},DELETE_ADDITIONAL_REMARK:function(t){var e=this;console.log(t),(0,s.Z)({method:"delete",url:"additional-remark/delete-additional-remark?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id:t.key}}).then((function(t){200==t.status&&t.data&&e.FETCH_ADDITIONAL_REMARK()}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_ADDITIONAL_REMARK:function(t){var e=this;console.log(t);var a=JSON.parse(localStorage.getItem("user")),o=new FormData;o.append("id",t.key),o.append("id_tag",this.$route.params.id_tag),o.append("id_inspection_record",this.id_inspection_record),o.append("file",this.file),o.append("file_path",this.file_path),o.append("remark_type",t.data.remark_type),o.append("remark_desc",t.data.remark_desc),o.append("created_time",t.data.created_time),o.append("created_by",t.data.created_by),o.append("updated_by",a.id_account),(0,s.Z)({method:"put",url:"additional-remark/edit-additional-remark?id="+t.key,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:o}).then((function(t){204==t.status&&e.FETCH_ADDITIONAL_REMARK()}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1,e.is_changed_dwg=0}))},ON_ATTACHMENT_CHANGE:function(t){var e=this;console.log(t),this.isInitEdit=1;var a=new FileReader;a.readAsDataURL(t.value[0]),a.onload=function(){e.imgHolder=a.result},this.file=t.value[0]},EDITING_START_ADDITIONAL_REMARK:function(t){console.warn("EDIT"),console.log(t),this.file=[],this.isInitEdit=0,this.file_path=t.data.file_path,this.dataIMGTemp=t},SAVE:function(t){console.log("save:"),console.log(t),0==t.changes.length&&this.UPDATE_ADDITIONAL_REMARK(this.dataIMGTemp)},INIT_NEW_ROW_ADDITIONAL_REMARK:function(){this.imgHolder="",this.file=[],this.isInitEdit=1},SHOW_HIDE_PANEL:function(){this.pagePanelHiding=!this.pagePanelHiding},DATE_FORMAT:function(t){return l()(t).format("LL")}}},E=f;var T=a(1001),D=(0,T.Z)(E,o,i,!1,null,"24922626",null);const b=D.exports},3488:(t,e,a)=>{a.d(e,{Z:()=>h});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inspection-record-panel",class:[0==t.panelHiding?"inspection-record-panel":"inspection-record-panel-hide"]},[1==t.panelHiding?a("div",{staticClass:"insp-panel-header"},[a("span",[t._v("Inspection Record")])]):t._e(),0==t.panelHiding?a("v-ons-list",[a("v-ons-list-header",[t._v("Inspection Record")]),t._l(t.inspectionList,(function(e){return a("v-ons-list-item",{key:e.id_inspection_record,staticStyle:{cursor:"pointer"},attrs:{tappable:"",id:[e.id_inspection_record]},on:{click:function(a){return t.VIEW_ITEM(e)}}},[a("div",{staticClass:"center"},[a("span",{staticClass:"date",staticStyle:{"margin-top":"5px"}},[t._v(t._s(t.DATE_FORMAT(e.inspection_date)))]),a("span",{staticStyle:{position:"absolute",bottom:"0",right:"14px","font-size":"12px",color:"red"}},[t._v("id_insp: "+t._s(e.id_inspection_record))])]),a("div",{staticClass:"right"},[a("v-ons-toolbar-button",[a("i",{staticClass:"las la-search"})])],1)])}))],2):t._e(),a("div",{staticClass:"fixed-panel"},[a("v-ons-toolbar-button",{staticClass:"item bottom-btn",on:{click:function(e){return t.SHOW_HIDE_PANEL()}}},[0==t.panelHiding?a("i",{staticClass:"las la-caret-square-left"}):t._e(),1==t.panelHiding?a("i",{staticClass:"las la-caret-square-right"}):t._e(),a("span",[t._v("Hide List")])])],1)],1)},i=[],n=a(4367),s=(a(41539),a(21249),a(39477)),r=a(17133),l=a.n(r);const d={name:"inspection-record-panel",data:function(){return{isLoading:!1,inspectionList:[],panelHiding:!1,current_view:{}}},created:function(){1==this.$store.state.status.server&&this.FETCH_INSP_RECORD()},watch:{$route:function(){this.current_view.id_inspection_record&&document.getElementById(this.current_view.id_inspection_record).classList.remove("active"),this.current_view.id_inspection_record=""}},methods:{FETCH_INSP_RECORD:function(){var t=this;this.inspectionList=[],this.isLoading=!0;var e=this.$route.params.id_tag;(0,s.Z)({method:"get",url:"/TankInspectionRecord/get-tank-ir-by-id-tag?id_tag="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(console.log("==> SUCCESS: Inspection Record"),t.inspectionList=e.data.map((function(t){return(0,n.Z)((0,n.Z)({},t),{},{id_inspection_record:t.id})})),console.log(t.inspectionList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},DATE_FORMAT:function(t){return l()(t).format("LL")},SHOW_HIDE_PANEL:function(){1==this.panelHiding?this.panelHiding=!1:this.panelHiding=!0,this.$emit("showHidePanel")},VIEW_ITEM:function(t){this.current_view.id_inspection_record&&document.getElementById(this.current_view.id_inspection_record).classList.remove("active"),console.log("==> VIEW: Inspection Record Item"),console.log(t),this.$emit("viewItem",t),document.getElementById(t.id_inspection_record).classList.add("active"),this.current_view.id_inspection_record=t.id_inspection_record}}},c=d;var u=a(1001),p=(0,u.Z)(c,o,i,!1,null,"563a63c1",null);const h=p.exports}}]);
//# sourceMappingURL=3499.2d3bff5f.js.map
"use strict";(self["webpackChunktims_dexon"]=self["webpackChunktims_dexon"]||[]).push([[2594],{30594:(t,e,a)=>{a.d(e,{Z:()=>l});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-content-loading"},[a("div",{staticClass:"box"},[a("hash-loader",{staticClass:"custom-class",attrs:{color:"#1e1450",loading:!0,size:40,sizeUnit:"px"}})],1)])},n=[];const o={name:"AppLoading",props:{text:String,icon:String,color:String}},s=o;var r=a(1001),d=(0,r.Z)(s,i,n,!1,null,"cf1f01c2",null);const l=d.exports},2594:(t,e,a)=>{a.r(e),a.d(e,{default:()=>v});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"tab-wrapper"},[a("vue-tabs-chrome",{attrs:{tabs:t.tabs},model:{value:t.tabCurrent,callback:function(e){t.tabCurrent=e},expression:"tabCurrent"}})],1),"A1"==t.tabCurrent?a("div",{staticClass:"page-section"},[t._m(0),a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{staticStyle:{"margin-top":"20px"},attrs:{id:"view-grid","key-expr":"id_thk","element-attr":t.dataGridAttributes,"data-source":t.dataList.view,"focused-row-enabled":!1,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0}},[a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxColumn",{attrs:{"data-field":"tp_no",caption:"TP No.","sort-order":"asc"}}),a("DxColumn",{attrs:{"data-field":"tp_desc",caption:"TP desc"}}),a("DxColumn",{attrs:{"data-field":"inservice_date",caption:"In-service date","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"t_nom",caption:"tnom (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"t_req",caption:"treq (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"first_insp_date",caption:"First date","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"first_t_actual",caption:"First thickness (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"previous_insp_date",caption:"Previous date","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"previous_t_actual",caption:"Previous thickness (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"inspection_date",caption:"Last date","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"t_actual",caption:"Last thickness (mm)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"crs",caption:"ST_CR (mm/yr)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"crl",caption:"LT_CR (mm/yr)",format:"#,##0.00"}}),a("DxColumn",{attrs:{"data-field":"rl",caption:"RL (yrs)",format:"#,##0.00"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1)]):t._e(),"A2"==t.tabCurrent?a("div",{staticClass:"page-section overflow-x",attrs:{id:"x-page"}},[a("div",{staticClass:"table-wrapper"},[t._m(1),a("DxDataGrid",{attrs:{"key-expr":"id","element-attr":t.dataGridAttributes,selection:{mode:"single"},"data-source":t.dataList.tp,"hover-state-enabled":!0,"focused-row-enabled":!1,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0},on:{"row-inserted":t.CREATE_TP,"row-updated":t.UPDATE_TP,"row-removed":t.DELETE_TP,"init-new-row":t.ADDING,"editing-start":t.EDITING,"selection-changed":t.VIEW_THK,"row-click":t.TP_FLAGER}},[a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"tp_no",caption:"TP No.","sort-order":"asc","allow-editing":!0,width:100}}),a("DxColumn",{attrs:{"data-field":"tp_num",caption:"TP num",width:"0","allow-editing":t.editTpNum}}),a("DxColumn",{attrs:{"data-field":"tp_desc",caption:"TP desc",width:100}}),a("DxColumn",{attrs:{"data-field":"t_nom",caption:"tnom (mm)",format:"#,##0.00","allow-editing":!0,width:100}}),a("DxColumn",{attrs:{"data-field":"t_req",caption:"treq (mm)",format:"#,##0.00","allow-editing":!1,width:100}}),a("DxColumn",{attrs:{"data-field":"inservice_date",caption:"In-service date","data-type":"date",format:"dd MMM yyyy",width:120,"allow-editing":!0}}),a("DxColumn",{attrs:{type:"buttons"}},[a("DxButton",{attrs:{name:"edit",hint:"Edit",icon:"edit"}}),a("DxButton",{attrs:{name:"delete",hint:"Delete",icon:"trash"}})],1),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1),a("div",{staticClass:"table-wrapper"},[t._m(2),a("DxDataGrid",{attrs:{"key-expr":"id","element-attr":t.dataGridAttributes,"data-source":t.dataList.thk,"focused-row-enabled":!1,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0},on:{"row-inserted":t.CREATE_THK,"row-updated":t.UPDATE_THK,"row-removed":t.DELETE_THK}},[a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":t.SELECTION,"use-icons":!0,mode:"row"}}),a("DxColumn",{attrs:{"data-field":"id_inspection_record",caption:"Inspection date",width:150}},[a("DxLookup",{attrs:{"data-source":t.inspRecordList,"display-expr":t.SET_FORMAT_DATE,"value-expr":"id_inspection_record"}})],1),a("DxColumn",{attrs:{"data-field":"t_actual",caption:"tactual (mm)",format:"#,##0.00",width:150}}),a("DxColumn",{attrs:{type:"buttons"}},[a("DxButton",{attrs:{name:"edit",hint:"Edit",icon:"edit"}}),a("DxButton",{attrs:{name:"delete",hint:"Delete",icon:"trash"}})],1),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!0}})],1)],1)]):t._e(),"A3"==t.tabCurrent?a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-container-A3",class:[0==t.pagePanelHiding?"page-container-A3":"page-container-hide"]},[a("InspectionRecordPanel",{on:{showHidePanel:t.SHOW_HIDE_PANEL,viewItem:t.VIEW_ITEM}}),this.id_inspection_record?a("div",{staticClass:"list-page"},[a("v-ons-list",[a("v-ons-list-header",[t._v(" Inspection Details of "),a("b",[t._v(t._s(t.DATE_FORMAT(t.current_view.inspection_date)))])])],1),a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"data-grid-style","key-expr":"id","data-source":t.additionalRemarkList,"element-attr":t.dataGridAttributes,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1},on:{"row-inserted":t.CREATE_ADDITIONAL_REMARK,"row-updated":t.UPDATE_ADDITIONAL_REMARK,"row-removed":t.DELETE_ADDITIONAL_REMARK,"editing-start":t.EDITING_START_ADDITIONAL_REMARK,"init-new-row":t.INIT_NEW_ROW_ADDITIONAL_REMARK,saved:t.SAVE},scopedSlots:t._u([{key:"attch_img",fn:function(e){var i=e.data;return[a("div",{staticStyle:{position:"relative"}},[a("a",{attrs:{href:t.baseURL+i.value,download:"dwg",target:"_blank"}},[a("img",{attrs:{src:t.baseURL+i.value,width:"300",height:"200"}}),a("br")])])]}},{key:"attch_img-editor",fn:function(e){var i=e.data;return[a("div",[""!=t.imgHolder&&0==t.isInitEdit?a("img",{attrs:{src:t.baseURL+i.value,width:"300",height:"200"}}):t._e(),""!=t.imgHolder&&1==t.isInitEdit?a("img",{attrs:{src:t.imgHolder,width:"300",height:"200"}}):t._e(),""==t.imgHolder?a("img",{attrs:{src:"http://tmt-solution.com/public/image-empty.png",width:"300",height:"200"}}):t._e(),a("DxFileUploader",{attrs:{"select-button-text":"Select photo","label-text":"",accept:"image/*","upload-mode":"useForm"},on:{"value-changed":t.ON_ATTACHMENT_CHANGE}})],1)]}}],null,!1,1434287500)},[a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"form"}},[a("DxForm",{attrs:{"label-location":"top"}},[a("DxItem",{attrs:{"col-count":2,"col-span":2,"item-type":"group"}},[a("DxItem",{attrs:{"data-field":"file_path","col-span":2}}),a("DxItem",{attrs:{"data-field":"remark_desc","col-span":2}})],1)],1)],1),a("DxColumn",{attrs:{"data-field":"file_path",caption:"Attachment","cell-template":"attch_img","edit-cell-template":"attch_img-editor",width:400}}),a("DxColumn",{attrs:{"data-field":"remark_desc",caption:"Description","editor-options":t.fileNameInputOptions}}),a("DxSearchPanel",{attrs:{visible:!1}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1)],1)],1):t._e(),""==this.id_inspection_record?a("SelectInspRecord"):t._e()],1)]):t._e(),1==t.isLoading?a("contentLoading",{attrs:{text:"Loading, please wait...",color:"#fc9b21"}}):t._e()],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-header-toolbar",staticStyle:{width:"calc(100% - 41px)"}},[a("div",{staticClass:"left"},[a("label",[t._v("Thickness Calculation Result")])]),a("div",{staticClass:"right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-header-toolbar",staticStyle:{width:"calc(100% - 82px)"}},[a("div",{staticClass:"left"},[a("label",[t._v("TP")])]),a("div",{staticClass:"right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-header-toolbar",staticStyle:{width:"calc(100% - 82px)"}},[a("div",{staticClass:"left"},[a("label",[t._v("Thickness")])]),a("div",{staticClass:"right"})])}],o=a(4367),s=(a(41539),a(21249),a(91058),a(78783),a(33948),a(60285),a(41637),a(39477)),r=a(17133),d=a.n(r),l=a(30594),c=a(25930),p=a.n(c),u=a(3488),h=a(34556),_=a(78417),m=a(60082),g=a(48626);const f={name:"ViewThicknessBottom",components:{DxForm:g.DxForm,DxItem:m.DxItem,DxFileUploader:_.DxFileUploader,SelectInspRecord:h.Z,InspectionRecordPanel:u.Z,contentLoading:l.Z,DxDataGrid:g.DxDataGrid,DxSearchPanel:g.DxSearchPanel,DxPaging:g.DxPaging,DxPager:g.DxPager,DxScrolling:g.DxScrolling,DxColumn:g.DxColumn,DxExport:g.DxExport,DxEditing:g.DxEditing,DxLookup:g.DxLookup,DxButton:g.DxButton,DxHeaderFilter:g.DxHeaderFilter,DxFilterRow:g.DxFilterRow,VueTabsChrome:p()},created:function(){this.$store.commit("UPDATE_CURRENT_INAPP",{name:"Tank Management",icon:"/img/icon_menu/tank/tank.png"}),this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"Thickness Messurement",subpageInnerName:"Projection Plate"}),1==this.$store.state.status.server&&(this.FETCH_INSP_RECORD(),this.FETCH_TP(),this.FETCH_VIEW())},data:function(){return{pagePanelHiding:!1,current_view:"",id_inspection_record:"",additionalRemarkList:[],imgHolder:"",file:[],isInitEdit:0,dataIMGTemp:"",fileNameInputOptions:{placeholder:"Enter description ..."},tp_flag:!1,dataList:{tp:[],thk:[],view:[]},isLoading:!1,id_cml:0,id_tp:0,inspRecordList:{},dataGridAttributes:{class:"data-grid-style"},editInserviceDate:!1,editTnom:!1,editTpDesc:!1,editTpNo:!1,editTreq:!1,editTpNum:!1,tabCurrent:"A2",tabs:[{label:"Calculation Result",key:"A1",closable:!1},{label:"Messurement Result",key:"A2",closable:!1},{label:"Additional Attachment",key:"A3",closable:!1}]}},computed:{SELECTION:function(){return!!this.tp_flag&&(console.warn(this.tp_flag),!0)},baseURL:function(){var t=this.$store.state.mode;return"dev"==t?this.$store.state.modeURL.dev:"prod"==t?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_TP:function(){var t=this,e=this.$route.params.id_tag;(0,s.Z)({method:"get",url:"TankProjectionPlateThickness/tank-plate-thk-tp-by-tag-id?id="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.dataList.tp=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},FETCH_THK:function(){var t=this;(0,s.Z)({method:"get",url:"TankProjectionPlateThickness/tank-plate-thk-data-by-tp-id?id="+this.id_tp,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.dataList.thk=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},FETCH_VIEW:function(){var t=this,e=this.$route.params.id_tag;(0,s.Z)({method:"get",url:"TankProjectionPlateThickness/tank-plate-thk-data-view-by-tag-id?id_tag="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.dataList.view=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},FETCH_INSP_RECORD:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id_tag;(0,s.Z)({method:"get",url:"TankInspectionRecord/get-tank-ir-by-id-tag?id_tag="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.inspRecordList=e.data,t.inspRecordList=t.inspRecordList.map((function(t){return(0,o.Z)((0,o.Z)({},t),{},{id_inspection_record:t.id,id:null})})))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},CREATE_TP:function(t){var e=this;t.data.id_tag=this.$route.params.id_tag,t.data.id=0,t.data.inservice_date=d()(t.data.inservice_date).format("L"),this.isLoading=!0,(0,s.Z)({method:"post",url:"TankProjectionPlateThickness/add-tank-plate-thk-tp",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){201==t.status&&t.data&&(e.FETCH_TP(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_TP:function(t){var e=this;this.isLoading=!0,(0,s.Z)({method:"put",url:"TankProjectionPlateThickness/edit-tank-plate-thk-tp?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){204==t.status&&(e.FETCH_TP(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},DELETE_TP:function(t){var e=this;(0,s.Z)({method:"delete",url:"TankProjectionPlateThickness/delete-tank-plate-thk-tp?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){204==t.status&&(e.FETCH_TP(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},CREATE_THK:function(t){var e=this;t.data.id=0,t.data.id_tp=this.id_tp,this.isLoading=!0,(0,s.Z)({method:"post",url:"TankProjectionPlateThickness/add-tank-plate-thk-data",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){201==t.status&&t.data&&(e.FETCH_THK(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_THK:function(t){var e=this;this.isLoading=!0,(0,s.Z)({method:"put",url:"TankProjectionPlateThickness/edit-tank-plate-thk-data?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){204==t.status&&(e.FETCH_TP(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},DELETE_THK:function(t){var e=this;this.isLoading=!0,(0,s.Z)({method:"delete",url:"TankProjectionPlateThickness/delete-tank-plate-thk-data?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){204==t.status&&(e.FETCH_THK(),e.FETCH_VIEW())}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},VIEW_TP:function(t){console.log(t),this.id_cml=t.selectedRowKeys[0],this.FETCH_TP(),this.tp_flag=!1},VIEW_THK:function(t){console.log(t),this.id_tp=t.selectedRowKeys[0],this.FETCH_THK()},SET_FORMAT_DATE:function(t){return console.log(t),d()(t.inspection_date).format("DD MMM yyyy")},EDITING:function(){this.editTpNo=!0,this.editTpDesc=!0,this.editTnom=!0,this.editInserviceDate=!0,this.editTpNum=!1,this.editTreq=!1},ADDING:function(t){console.log("ADDING"),console.log(t),this.editTpNo=!1,this.editTpDesc=!1,this.editTnom=!0,this.editInserviceDate=!0,this.editTpNum=!0,this.editTreq=!1},TP_FLAGER:function(){this.tp_flag=!0},FETCH_FILE_PROJECTION:function(){var t=this;console.log("in");var e=parseInt(this.$route.params.id_tag);(0,s.Z)({method:"get",url:""+e,responseType:"blob",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){var a=e.data;t.downLoadFileExcel(a,"testtttttttt")}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},downLoadFileExcel:function(t,e){console.log(t);var a=document.createElement("a");a.setAttribute("href",window.URL.createObjectURL(new Blob([t]))),a.setAttribute("download",e+".xlsx"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},VIEW_ITEM:function(t){this.current_view={},this.current_view=t,this.id_component=this.$route.params.id_component,this.id_inspection_record=t.id_inspection_record,this.FETCH_ADDITIONAL_REMARK()},FETCH_ADDITIONAL_REMARK:function(){var t=this,e=this.id_inspection_record;(0,s.Z)({method:"get",url:"additional-remark/get-additional-remark-by-ir-id-type?id_inspection_record="+e+"&type=sump_thk",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&(console.warn("FETCH ADDITIONAL"),console.log(e.data),t.additionalRemarkList=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},CREATE_ADDITIONAL_REMARK:function(t){var e=this;console.log(t);var a=new FormData,i=JSON.parse(localStorage.getItem("user"));a.append("id_inspection_record",this.id_inspection_record),a.append("id_tag",this.$route.params.id_tag),a.append("remark_type","projection_thk"),a.append("remark_desc",t.data.remark_desc),a.append("file",this.file),a.append("created_by",i.id_account),a.append("updated_by",i.id_account),(0,s.Z)({method:"post",url:"additional-remark/add-additional-remark",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(t){201==t.status&&t.data&&e.FETCH_ADDITIONAL_REMARK()}))["catch"]((function(t){console.log(t)}))["finally"]((function(){}))},DELETE_ADDITIONAL_REMARK:function(t){var e=this;console.log(t),(0,s.Z)({method:"delete",url:"additional-remark/delete-additional-remark?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{id:t.key}}).then((function(t){200==t.status&&t.data&&e.FETCH_ADDITIONAL_REMARK()}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_ADDITIONAL_REMARK:function(t){var e=this;console.log(t);var a=JSON.parse(localStorage.getItem("user")),i=new FormData;i.append("id",t.key),i.append("id_tag",this.$route.params.id_tag),i.append("id_inspection_record",this.id_inspection_record),i.append("file",this.file),i.append("file_path",this.file_path),i.append("remark_type",t.data.remark_type),i.append("remark_desc",t.data.remark_desc),i.append("created_time",t.data.created_time),i.append("created_by",t.data.created_by),i.append("updated_by",a.id_account),(0,s.Z)({method:"put",url:"additional-remark/edit-additional-remark?id="+t.key,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:i}).then((function(t){204==t.status&&e.FETCH_ADDITIONAL_REMARK()}))["catch"]((function(t){console.log(t)}))["finally"]((function(){e.isLoading=!1,e.is_changed_dwg=0}))},ON_ATTACHMENT_CHANGE:function(t){var e=this;console.log(t),this.isInitEdit=1;var a=new FileReader;a.readAsDataURL(t.value[0]),a.onload=function(){e.imgHolder=a.result},this.file=t.value[0]},EDITING_START_ADDITIONAL_REMARK:function(t){console.warn("EDIT"),console.log(t),this.file=[],this.isInitEdit=0,this.file_path=t.data.file_path,this.dataIMGTemp=t},SAVE:function(t){console.log("save:"),console.log(t),0==t.changes.length&&this.UPDATE_ADDITIONAL_REMARK(this.dataIMGTemp)},INIT_NEW_ROW_ADDITIONAL_REMARK:function(){this.imgHolder="",this.file=[],this.isInitEdit=1},SHOW_HIDE_PANEL:function(){this.pagePanelHiding=!this.pagePanelHiding},DATE_FORMAT:function(t){return d()(t).format("LL")}}},D=f;var T=a(1001),E=(0,T.Z)(D,i,n,!1,null,"53922d63",null);const v=E.exports},3488:(t,e,a)=>{a.d(e,{Z:()=>h});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inspection-record-panel",class:[0==t.panelHiding?"inspection-record-panel":"inspection-record-panel-hide"]},[1==t.panelHiding?a("div",{staticClass:"insp-panel-header"},[a("span",[t._v("Inspection Record")])]):t._e(),0==t.panelHiding?a("v-ons-list",[a("v-ons-list-header",[t._v("Inspection Record")]),t._l(t.inspectionList,(function(e){return a("v-ons-list-item",{key:e.id_inspection_record,staticStyle:{cursor:"pointer"},attrs:{tappable:"",id:[e.id_inspection_record]},on:{click:function(a){return t.VIEW_ITEM(e)}}},[a("div",{staticClass:"center"},[a("span",{staticClass:"date",staticStyle:{"margin-top":"5px"}},[t._v(t._s(t.DATE_FORMAT(e.inspection_date)))]),a("span",{staticStyle:{position:"absolute",bottom:"0",right:"14px","font-size":"12px",color:"red"}},[t._v("id_insp: "+t._s(e.id_inspection_record))])]),a("div",{staticClass:"right"},[a("v-ons-toolbar-button",[a("i",{staticClass:"las la-search"})])],1)])}))],2):t._e(),a("div",{staticClass:"fixed-panel"},[a("v-ons-toolbar-button",{staticClass:"item bottom-btn",on:{click:function(e){return t.SHOW_HIDE_PANEL()}}},[0==t.panelHiding?a("i",{staticClass:"las la-caret-square-left"}):t._e(),1==t.panelHiding?a("i",{staticClass:"las la-caret-square-right"}):t._e(),a("span",[t._v("Hide List")])])],1)],1)},n=[],o=a(4367),s=(a(41539),a(21249),a(39477)),r=a(17133),d=a.n(r);const l={name:"inspection-record-panel",data:function(){return{isLoading:!1,inspectionList:[],panelHiding:!1,current_view:{}}},created:function(){1==this.$store.state.status.server&&this.FETCH_INSP_RECORD()},watch:{$route:function(){this.current_view.id_inspection_record&&document.getElementById(this.current_view.id_inspection_record).classList.remove("active"),this.current_view.id_inspection_record=""}},methods:{FETCH_INSP_RECORD:function(){var t=this;this.inspectionList=[],this.isLoading=!0;var e=this.$route.params.id_tag;(0,s.Z)({method:"get",url:"/TankInspectionRecord/get-tank-ir-by-id-tag?id_tag="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(console.log("==> SUCCESS: Inspection Record"),t.inspectionList=e.data.map((function(t){return(0,o.Z)((0,o.Z)({},t),{},{id_inspection_record:t.id})})),console.log(t.inspectionList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},DATE_FORMAT:function(t){return d()(t).format("LL")},SHOW_HIDE_PANEL:function(){1==this.panelHiding?this.panelHiding=!1:this.panelHiding=!0,this.$emit("showHidePanel")},VIEW_ITEM:function(t){this.current_view.id_inspection_record&&document.getElementById(this.current_view.id_inspection_record).classList.remove("active"),console.log("==> VIEW: Inspection Record Item"),console.log(t),this.$emit("viewItem",t),document.getElementById(t.id_inspection_record).classList.add("active"),this.current_view.id_inspection_record=t.id_inspection_record}}},c=l;var p=a(1001),u=(0,p.Z)(c,i,n,!1,null,"563a63c1",null);const h=u.exports}}]);
//# sourceMappingURL=2594.b39e41d8.js.map